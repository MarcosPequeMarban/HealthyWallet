=== Inicio del archivo ===

===== MANIFEST =====


--- AndroidManifest.xml ---

<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools">

    <application
        android:allowBackup="true"
        android:dataExtractionRules="@xml/data_extraction_rules"
        android:fullBackupContent="@xml/backup_rules"
        android:icon="@mipmap/ic_launcher"
        android:label="@string/app_name"
        android:roundIcon="@mipmap/ic_launcher_round"
        android:supportsRtl="true"
        android:theme="@style/Theme.HealthyWallet"
        tools:targetApi="33"
        android:enableOnBackInvokedCallback="true">


        <activity
            android:name=".ui.MainActivity"
            android:exported="true"
            android:label="@string/app_name"
            android:theme="@style/Theme.HealthyWallet">

            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>

        </activity>

    </application>

</manifest>

===== JAVA =====


--- FILE: C:\AndroidProjects\HealthyWallet\app\src\main\java\com\example\healthywallet\adapters\AdaptadorCategorias.java ---

package com.example.healthywallet.adapters;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

import androidx.annotation.NonNull;
import androidx.recyclerview.widget.RecyclerView;

import com.example.healthywallet.R;
import com.example.healthywallet.database.entities.Categoria;

import java.util.List;

public class AdaptadorCategorias extends RecyclerView.Adapter<AdaptadorCategorias.ViewHolderCategoria> {

    private final Context context;
    private final List<Categoria> lista;

    public AdaptadorCategorias(Context context, List<Categoria> lista) {
        this.context = context;
        this.lista = lista;
    }

    @NonNull
    @Override
    public ViewHolderCategoria onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {
        View vista = LayoutInflater.from(context).inflate(R.layout.item_categoria, parent, false);
        return new ViewHolderCategoria(vista);
    }

    @Override
    public void onBindViewHolder(@NonNull ViewHolderCategoria holder, int position) {
        Categoria categoria = lista.get(position);

        holder.txtNombre.setText(categoria.getNombre());
        holder.txtDescripcion.setText(categoria.getDescripcion());
    }

    @Override
    public int getItemCount() {
        return lista.size();
    }

    static class ViewHolderCategoria extends RecyclerView.ViewHolder {

        TextView txtNombre, txtDescripcion;

        public ViewHolderCategoria(@NonNull View itemView) {
            super(itemView);

            txtNombre = itemView.findViewById(R.id.txtNombreCategoria);
            txtDescripcion = itemView.findViewById(R.id.txtDescripcionCategoria);
        }
    }
}

--- FILE: C:\AndroidProjects\HealthyWallet\app\src\main\java\com\example\healthywallet\adapters\AdaptadorFormacion.java ---

package com.example.healthywallet.adapters;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

import androidx.annotation.NonNull;
import androidx.recyclerview.widget.RecyclerView;

import com.example.healthywallet.R;
import com.example.healthywallet.database.entities.Formacion;

import java.util.List;

public class AdaptadorFormacion extends RecyclerView.Adapter<AdaptadorFormacion.ViewHolderFormacion> {

    private final Context context;
    private final List<Formacion> lista;

    public AdaptadorFormacion(Context context, List<Formacion> lista) {
        this.context = context;
        this.lista = lista;
    }

    @NonNull
    @Override
    public ViewHolderFormacion onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {
        View vista = LayoutInflater.from(context).inflate(R.layout.item_formacion, parent, false);
        return new ViewHolderFormacion(vista);
    }

    @Override
    public void onBindViewHolder(@NonNull ViewHolderFormacion holder, int position) {
        Formacion f = lista.get(position);

        holder.txtTitulo.setText(f.getTitulo());
        holder.txtNivel.setText(f.getNivel());
        holder.txtDescripcion.setText("");
    }

    @Override
    public int getItemCount() {
        return lista.size();
    }

    static class ViewHolderFormacion extends RecyclerView.ViewHolder {

        TextView txtTitulo, txtNivel, txtDescripcion;

        public ViewHolderFormacion(@NonNull View itemView) {
            super(itemView);

            txtTitulo = itemView.findViewById(R.id.txtTituloFormacion);
            txtNivel = itemView.findViewById(R.id.txtNivelFormacion);
            txtDescripcion = itemView.findViewById(R.id.txtDescripcionFormacion);
        }
    }
}

--- FILE: C:\AndroidProjects\HealthyWallet\app\src\main\java\com\example\healthywallet\adapters\AdaptadorMetas.java ---

package com.example.healthywallet.adapters;

import android.content.Context;
import android.graphics.Color;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ProgressBar;
import android.widget.TextView;

import androidx.annotation.NonNull;
import androidx.cardview.widget.CardView;
import androidx.recyclerview.widget.RecyclerView;

import com.example.healthywallet.R;
import com.example.healthywallet.database.entities.Meta;

import java.util.List;

public class AdaptadorMetas extends RecyclerView.Adapter<AdaptadorMetas.ViewHolderMeta> {

    private final Context context;
    private final List<Meta> lista;

    private OnMetaClickListener listenerNormal;
    private OnMetaCompletadaListener listenerCompletada;

    // ---------------------------------------------------------
    // LISTENER PARA ABRIR EL DETALLE
    // ---------------------------------------------------------
    public interface OnMetaClickListener {
        void onMetaClick(Meta meta);
    }

    public void setOnMetaClickListener(OnMetaClickListener l) {
        this.listenerNormal = l;
    }

    // ---------------------------------------------------------
    // LISTENER PARA META COMPLETADA (100%)
    // ---------------------------------------------------------
    public interface OnMetaCompletadaListener {
        void onMetaCompletada(Meta meta);
    }

    public void setOnMetaCompletadaListener(OnMetaCompletadaListener l) {
        this.listenerCompletada = l;
    }

    // ---------------------------------------------------------
    // CONSTRUCTOR
    // ---------------------------------------------------------
    public AdaptadorMetas(Context context, List<Meta> lista) {
        this.context = context;
        this.lista = lista;
    }

    @NonNull
    @Override
    public ViewHolderMeta onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {
        View v = LayoutInflater.from(context).inflate(R.layout.item_meta, parent, false);
        return new ViewHolderMeta(v);
    }

    @Override
    public void onBindViewHolder(@NonNull ViewHolderMeta holder, int position) {

        Meta meta = lista.get(position);

        // NOMBRE
        holder.txtNombre.setText(meta.getNombre());

        // FECHA OBJETIVO
        holder.txtFecha.setText("Fecha objetivo: " + meta.getFechaObjetivo());

        // CANTIDADES
        holder.txtCantidades.setText(
                String.format("%.2f â‚¬ / %.2f â‚¬", meta.getCantidadActual(), meta.getCantidadObjetivo())
        );

        // PORCENTAJE
        double porcentaje = (meta.getCantidadActual() / meta.getCantidadObjetivo()) * 100.0;
        if (porcentaje > 100) porcentaje = 100;

        holder.txtPorcentaje.setText(String.format("%.0f%%", porcentaje));
        holder.barra.setProgress((int) porcentaje);

        // ---------------------------------------------------------
        // COLORES SEGÃšN PROGRESO
        // ---------------------------------------------------------
        if (porcentaje >= 100) {
            holder.barra.setProgressTintList(context.getColorStateList(R.color.meta_verde));
            holder.card.setCardBackgroundColor(Color.parseColor("#D1FFD8")); // verde triunfo
        }
        else if (porcentaje >= 80) {
            holder.barra.setProgressTintList(context.getColorStateList(R.color.meta_verde));
            holder.card.setCardBackgroundColor(Color.parseColor("#E8F5E9"));
        }
        else if (porcentaje >= 40) {
            holder.barra.setProgressTintList(context.getColorStateList(R.color.meta_amarillo));
            holder.card.setCardBackgroundColor(Color.parseColor("#FFFDE7"));
        }
        else {
            holder.barra.setProgressTintList(context.getColorStateList(R.color.meta_rojo));
            holder.card.setCardBackgroundColor(Color.parseColor("#FFEBEE"));
        }

        // ---------------------------------------------------------
        // CLICK (NORMAL o META COMPLETADA)
        // ---------------------------------------------------------
        final double porcentajeFinal = porcentaje;
        holder.itemView.setOnClickListener(v -> {

            if (porcentajeFinal >= 100) {
                if (listenerCompletada != null)
                    listenerCompletada.onMetaCompletada(meta);
            } else {
                if (listenerNormal != null)
                    listenerNormal.onMetaClick(meta);
            }
        });
    }

    @Override
    public int getItemCount() {
        return lista.size();
    }

    // ---------------------------------------------------------
    // VIEW HOLDER
    // ---------------------------------------------------------
    static class ViewHolderMeta extends RecyclerView.ViewHolder {

        CardView card;
        TextView txtNombre, txtCantidades, txtPorcentaje, txtFecha;
        ProgressBar barra;

        public ViewHolderMeta(@NonNull View itemView) {
            super(itemView);

            card = itemView.findViewById(R.id.cardViewMeta);
            txtNombre = itemView.findViewById(R.id.txtNombreMeta);
            txtCantidades = itemView.findViewById(R.id.txtCantidadesMeta);
            txtPorcentaje = itemView.findViewById(R.id.txtPorcentajeMeta);
            txtFecha = itemView.findViewById(R.id.txtFechaMeta);
            barra = itemView.findViewById(R.id.barraProgresoMeta);
        }
    }
}

--- FILE: C:\AndroidProjects\HealthyWallet\app\src\main\java\com\example\healthywallet\adapters\AdaptadorMovimientos.java ---

package com.example.healthywallet.adapters;

import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

import androidx.annotation.NonNull;
import androidx.recyclerview.widget.RecyclerView;

import com.example.healthywallet.R;
import com.example.healthywallet.database.entities.Movimiento;

import java.util.List;

public class AdaptadorMovimientos extends RecyclerView.Adapter<AdaptadorMovimientos.ViewHolderMovimiento> {

    private final Context context;
    private List<Movimiento> lista;

    // =========================================================
    //  LISTENER DE PULSACIÃ“N LARGA (NUEVO)
    // =========================================================
    public interface OnMovimientoLongClickListener {
        void onLongClick(Movimiento mov);
    }

    private OnMovimientoLongClickListener longClickListener;

    public void setOnMovimientoLongClickListener(OnMovimientoLongClickListener l) {
        this.longClickListener = l;
    }
    // =========================================================


    public AdaptadorMovimientos(Context context, List<Movimiento> lista) {
        this.context = context;
        this.lista = lista;
    }

    @NonNull
    @Override
    public ViewHolderMovimiento onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {
        View vista = LayoutInflater.from(context).inflate(R.layout.item_movimiento, parent, false);
        return new ViewHolderMovimiento(vista);
    }

    @Override
    public void onBindViewHolder(@NonNull ViewHolderMovimiento holder, int position) {
        Movimiento mov = lista.get(position);

        holder.txtTipo.setText(mov.getTipo());
        holder.txtCategoria.setText(mov.getCategoria());
        holder.txtCantidad.setText(mov.getCantidad() + " â‚¬");
        holder.txtFecha.setText(mov.getFecha());

        // =========================================================
        //  AÃ‘ADIR PULSACIÃ“N LARGA EN EL ITEM (NUEVO)
        // =========================================================
        holder.itemView.setOnLongClickListener(v -> {
            if (longClickListener != null) {
                longClickListener.onLongClick(mov);
            }
            return true; // importante â†’ indica que el evento se consume
        });
        // =========================================================
    }

    @Override
    public int getItemCount() {
        return lista.size();
    }

    /** MÃ©todo para refrescar la lista */
    public void actualizarLista(List<Movimiento> nuevaLista) {
        lista.clear();
        lista.addAll(nuevaLista);
        notifyDataSetChanged();
    }

    static class ViewHolderMovimiento extends RecyclerView.ViewHolder {

        TextView txtTipo, txtCategoria, txtCantidad, txtFecha;

        public ViewHolderMovimiento(@NonNull View itemView) {
            super(itemView);

            txtTipo = itemView.findViewById(R.id.txtTipoMovimiento);
            txtCategoria = itemView.findViewById(R.id.txtCategoriaMovimiento);
            txtCantidad = itemView.findViewById(R.id.txtCantidadMovimiento);
            txtFecha = itemView.findViewById(R.id.txtFechaMovimiento);
        }
    }
}

--- FILE: C:\AndroidProjects\HealthyWallet\app\src\main\java\com\example\healthywallet\adapters\AdaptadorPresupuestos.java ---

package com.example.healthywallet.adapters;

import android.content.Context;
import android.graphics.Color;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

import androidx.annotation.NonNull;
import androidx.recyclerview.widget.RecyclerView;

import com.example.healthywallet.R;
import com.example.healthywallet.database.entities.Presupuesto;

import java.util.List;

public class AdaptadorPresupuestos extends RecyclerView.Adapter<AdaptadorPresupuestos.ViewHolderPresupuesto> {

    private final Context context;
    private final List<Presupuesto> lista;

    // ==========================================================
    //     LISTENER DE MANTENER PULSADO (NUEVO)
    // ==========================================================
    public interface OnPresupuestoLongClickListener {
        void onLongClick(Presupuesto presupuesto);
    }

    private OnPresupuestoLongClickListener longClickListener;

    public void setOnPresupuestoLongClickListener(OnPresupuestoLongClickListener listener) {
        this.longClickListener = listener;
    }
    // ==========================================================

    public AdaptadorPresupuestos(Context context, List<Presupuesto> lista) {
        this.context = context;
        this.lista = lista;
    }

    @NonNull
    @Override
    public ViewHolderPresupuesto onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {
        View vista = LayoutInflater.from(context).inflate(R.layout.item_presupuesto, parent, false);
        return new ViewHolderPresupuesto(vista);
    }

    @Override
    public void onBindViewHolder(@NonNull ViewHolderPresupuesto holder, int position) {
        Presupuesto p = lista.get(position);

        holder.txtCategoria.setText(p.getCategoria());
        holder.txtLimite.setText("LÃ­mite: " + p.getLimite() + " â‚¬");
        holder.txtGastoActual.setText("Gastado: " + p.getGastoActual() + " â‚¬");

        double limite = p.getLimite();
        double gasto = p.getGastoActual();

        // ðŸ”¥ COLOR DINÃMICO SEGÃšN EL NIVEL DE GASTO
        if (gasto > limite) {
            holder.itemView.setBackgroundColor(Color.parseColor("#FF8A80"));
        }
        else if (gasto >= limite * 0.80) {
            holder.itemView.setBackgroundColor(Color.parseColor("#FFF176"));
        }
        else {
            holder.itemView.setBackgroundColor(Color.parseColor("#FFFFFF"));
        }

        // ==========================================================
        //     AÃ‘ADIMOS LA PULSACIÃ“N LARGA (NUEVO)
        // ==========================================================
        holder.itemView.setOnLongClickListener(v -> {
            if (longClickListener != null) {
                longClickListener.onLongClick(p);
            }
            return true; // consumimos el evento
        });
    }

    @Override
    public int getItemCount() {
        return lista.size();
    }

    static class ViewHolderPresupuesto extends RecyclerView.ViewHolder {

        TextView txtCategoria, txtLimite, txtGastoActual;

        public ViewHolderPresupuesto(@NonNull View itemView) {
            super(itemView);

            txtCategoria = itemView.findViewById(R.id.txtCategoriaPresupuesto);
            txtLimite = itemView.findViewById(R.id.txtLimitePresupuesto);
            txtGastoActual = itemView.findViewById(R.id.txtGastoActualPresupuesto);
        }
    }
}

--- FILE: C:\AndroidProjects\HealthyWallet\app\src\main\java\com\example\healthywallet\adapters\AdaptadorVideos.java ---

package com.example.healthywallet.adapters;

import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.CheckBox;
import android.widget.TextView;

import androidx.annotation.NonNull;
import androidx.recyclerview.widget.RecyclerView;

import com.example.healthywallet.R;
import com.example.healthywallet.database.entities.Formacion;

import java.util.List;

public class AdaptadorVideos extends RecyclerView.Adapter<AdaptadorVideos.VideoViewHolder> {

    /** Callback cuando un video se marca o desmarca */
    public interface OnCheckListener {
        void onChecked(Formacion video, boolean nuevoEstado);
    }

    private List<Formacion> lista;
    private final OnCheckListener listener;

    public AdaptadorVideos(List<Formacion> lista, OnCheckListener listener) {
        this.lista = lista;
        this.listener = listener;
    }

    @NonNull
    @Override
    public VideoViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {
        View vista = LayoutInflater.from(parent.getContext())
                .inflate(R.layout.item_video, parent, false);

        return new VideoViewHolder(vista);
    }

    @Override
    public void onBindViewHolder(@NonNull VideoViewHolder holder, int position) {
        Formacion video = lista.get(position);

        holder.txtTitulo.setText(video.getTitulo());

        // Evitar conflictos cuando el RecyclerView recicla las vistas
        holder.chkCompletado.setOnCheckedChangeListener(null);
        holder.chkCompletado.setChecked(video.isCompletado());

        holder.chkCompletado.setOnCheckedChangeListener((button, marcado) -> {
            listener.onChecked(video, marcado);
        });

        // Permite pulsar en toda la tarjeta para marcar/desmarcar
        holder.itemView.setOnClickListener(v -> {
            boolean nuevoEstado = !holder.chkCompletado.isChecked();
            holder.chkCompletado.setChecked(nuevoEstado);
            listener.onChecked(video, nuevoEstado);
        });
    }

    @Override
    public int getItemCount() {
        return lista.size();
    }

    public void actualizar(List<Formacion> nuevaLista) {
        this.lista = nuevaLista;
        notifyDataSetChanged();
    }

    static class VideoViewHolder extends RecyclerView.ViewHolder {

        TextView txtTitulo;
        CheckBox chkCompletado;

        public VideoViewHolder(@NonNull View itemView) {
            super(itemView);

            txtTitulo = itemView.findViewById(R.id.txtTituloVideo);
            chkCompletado = itemView.findViewById(R.id.checkCompletado);

            // Ripple cuando pulsas el item
            itemView.setForeground(
                    itemView.getContext().getDrawable(
                            androidx.appcompat.R.drawable.abc_list_selector_holo_light
                    )
            );
        }
    }
}

--- FILE: C:\AndroidProjects\HealthyWallet\app\src\main\java\com\example\healthywallet\controller\FormacionControlador.java ---

package com.example.healthywallet.controller;

import android.content.Context;
import android.content.SharedPreferences;

import com.example.healthywallet.database.GestorBaseDatos;
import com.example.healthywallet.database.DAO.FormacionDao;
import com.example.healthywallet.database.entities.Formacion;

import java.util.List;
import java.util.concurrent.ExecutorService;

public class FormacionControlador {

    // ==== Callbacks ====
    public interface CallbackListaFormacion { void onResult(List<Formacion> lista); }
    public interface CallbackInt { void onResult(int valor); }
    public interface CallbackSimple { void onFinish(); }
    public interface CallbackFormacion { void onResult(Formacion formacion); }

    private final FormacionDao dao;
    private final ExecutorService executor;
    private final int userId;

    public FormacionControlador(Context context) {
        GestorBaseDatos db = GestorBaseDatos.obtenerInstancia(context);
        dao = db.formacionDao();
        executor = GestorBaseDatos.databaseExecutor;

        SharedPreferences prefs = context.getSharedPreferences("session", Context.MODE_PRIVATE);
        userId = prefs.getInt("usuarioId", -1);
    }

    // ===============================
    // INSERTAR VIDEO
    // ===============================
    public void insertar(Formacion formacion, CallbackInt callback) {
        formacion.setUserId(userId);
        executor.execute(() -> callback.onResult((int) dao.insertar(formacion)));
    }

    // ===============================
    // OBTENER TODOS LOS VIDEOS
    // ===============================
    public void obtenerTodas(CallbackListaFormacion callback) {
        executor.execute(() -> callback.onResult(dao.obtenerTodas(userId)));
    }

    // ===============================
    // ELIMINAR VIDEO
    // ===============================
    public void eliminarPorId(int id, CallbackInt callback) {
        executor.execute(() -> callback.onResult(dao.eliminarPorId(id, userId)));
    }

    // ===============================
    // OBTENER VIDEOS POR NIVEL
    // ===============================
    public void obtenerPorNivel(String nivel, CallbackListaFormacion callback) {
        executor.execute(() -> callback.onResult(
                dao.obtenerPorNivel(nivel, userId)
        ));
    }

    // ===============================
    // MARCAR COMPLETADO / NO COMPLETADO
    // ===============================
    public void marcarCompletado(Formacion video, boolean nuevoEstado, CallbackSimple callback) {
        executor.execute(() -> {
            video.setCompletado(nuevoEstado);

            if (nuevoEstado)
                video.setFechaCompletado(System.currentTimeMillis());
            else
                video.setFechaCompletado(0);

            dao.actualizar(video);
            callback.onFinish();
        });
    }

    // ===============================
    // CONTAR TOTAL VIDEOS POR NIVEL
    // ===============================
    public void contarVideosNivel(String nivel, CallbackInt callback) {
        executor.execute(() -> callback.onResult(
                dao.contarPorNivel(nivel, userId)
        ));
    }

    // ===============================
    // CONTAR COMPLETADOS POR NIVEL
    // ===============================
    public void contarCompletadosNivel(String nivel, CallbackInt callback) {
        executor.execute(() -> callback.onResult(
                dao.contarCompletadosNivel(nivel, userId)
        ));
    }

    // ===============================
    // CONTAR TODOS GLOBAL
    // ===============================
    public void contarTodosGlobal(CallbackInt callback) {
        executor.execute(() ->
                callback.onResult(dao.contarTodos(userId))
        );
    }

    // ===============================
    // CONTAR COMPLETADOS GLOBAL
    // ===============================
    public void contarCompletadosGlobal(CallbackInt callback) {
        executor.execute(() ->
                callback.onResult(dao.contarTodosCompletados(userId))
        );
    }

    // ===============================
    // CALCULAR % PROGRESO GLOBAL
    // ===============================
    public void calcularProgresoGlobal(CallbackInt callback) {
        executor.execute(() -> {

            int total = dao.contarTodos(userId);
            int completados = dao.contarTodosCompletados(userId);

            int porcentaje = (total == 0) ? 0 : (completados * 100 / total);

            callback.onResult(porcentaje);
        });
    }

    // ===============================
    // LIBRO DE LA SEMANA
    // ===============================
    public void obtenerLibroSemana(CallbackFormacion callback) {
        executor.execute(() -> {
            List<Formacion> libros = dao.obtenerPorNivel("LIBRO", userId);

            if (libros.isEmpty()) {
                callback.onResult(null);
                return;
            }

            int week = (int) (System.currentTimeMillis() / (7L * 24 * 60 * 60 * 1000));
            int index = week % libros.size();

            callback.onResult(libros.get(index));
        });
    }

    // ===============================
    // ACTUALIZAR VIDEO
    // ===============================
    public void actualizar(Formacion f, CallbackInt callback) {
        executor.execute(() -> callback.onResult(dao.actualizar(f)));
    }

    // ===============================
    // INSERTAR VIDEOS SI NO EXISTEN
    // ===============================
    public void inicializarDatosSiNecesario() {
        executor.execute(() -> {

            int total = dao.contarTodos(userId);

            if (total > 0) return;

            // PRINCIPIANTE
            dao.insertar(new Formacion(
                    "IntroducciÃ³n a la inversiÃ³n",
                    "https://youtu.be/ujY0DkyL--w?si=rHrEaVOZDL-fqa61",
                    "PRINCIPIANTE",
                    userId
            ));

            dao.insertar(new Formacion(
                    "CÃ³mo funcionan los fondos indexados",
                    "https://youtu.be/6Uw-27uRoO4?si=VtSpx85TXxHNtW6L",
                    "PRINCIPIANTE",
                    userId
            ));

            // INTERMEDIO
            dao.insertar(new Formacion(
                    "AnÃ¡lisis tÃ©cnico bÃ¡sico",
                    "https://youtu.be/bL8sNc0n984?si=Q6lH0YWyPPut2UI0",
                    "INTERMEDIO",
                    userId
            ));

            dao.insertar(new Formacion(
                    "CÃ³mo empezar en las inversiones",
                    "https://youtu.be/VYuoxeZ33hw?si=zTY_9RWkbpU4sPjS",
                    "INTERMEDIO",
                    userId
            ));

            // EXPERTO
            dao.insertar(new Formacion(
                    "Podcast experto financiero",
                    "https://youtu.be/SKEsbnJHTkc?si=qPKL_LbBTmJpKQCa",
                    "EXPERTO",
                    userId
            ));

            dao.insertar(new Formacion(
                    "Clase de renta fija con gestor experto",
                    "https://youtu.be/EE0eJM_BTqU?si=qNMcUCfUGcXOcDQ3",
                    "EXPERTO",
                    userId
            ));
        });
    }
}

--- FILE: C:\AndroidProjects\HealthyWallet\app\src\main\java\com\example\healthywallet\controller\MetaControlador.java ---

package com.example.healthywallet.controller;

import android.content.Context;
import android.content.SharedPreferences;

import com.example.healthywallet.database.GestorBaseDatos;
import com.example.healthywallet.database.DAO.MetaDao;
import com.example.healthywallet.database.entities.Meta;

import java.util.List;
import java.util.concurrent.ExecutorService;

public class MetaControlador {

    // === CALLBACKS ===
    public interface CallbackListaMeta {
        void onResult(List<Meta> lista);
    }

    public interface CallbackMeta {
        void onResult(Meta meta);
    }

    public interface CallbackLong {
        void onResult(long valor);
    }

    public interface CallbackInt {
        void onResult(int valor);
    }

    // === CAMPOS ===
    private final MetaDao dao;
    private final ExecutorService executor;
    private final int userId;

    // === CONSTRUCTOR ===
    public MetaControlador(Context context) {
        GestorBaseDatos db = GestorBaseDatos.obtenerInstancia(context);
        dao = db.metaDao();
        executor = GestorBaseDatos.databaseExecutor;

        SharedPreferences prefs = context.getSharedPreferences("session", Context.MODE_PRIVATE);
        userId = prefs.getInt("usuarioId", -1);
    }

    // === CRUD ===

    /** Insertar una meta y devolver el ID generado */
    public void insertar(Meta meta, CallbackLong callback) {
        meta.setUserId(userId);
        executor.execute(() -> {
            long id = dao.insertar(meta);
            callback.onResult(id);
        });
    }

    /** Actualizar una meta */
    public void actualizar(Meta meta, CallbackInt callback) {
        executor.execute(() -> {
            int filas = dao.actualizar(meta);
            callback.onResult(filas);
        });
    }

    /** Obtener meta por ID */
    public void obtenerPorId(int id, CallbackMeta callback) {
        executor.execute(() -> {
            Meta meta = dao.obtenerPorId(id, userId);
            callback.onResult(meta);
        });
    }

    /** Obtener todas las metas del usuario */
    public void obtenerTodas(CallbackListaMeta callback) {
        executor.execute(() -> {
            List<Meta> lista = dao.obtenerTodas(userId);
            callback.onResult(lista);
        });
    }

    /** Actualizar solo la cantidad actual */
    public void actualizarCantidad(int id, double nuevaCantidad, CallbackInt callback) {
        executor.execute(() -> {
            int filas = dao.actualizarCantidad(nuevaCantidad, id, userId);
            callback.onResult(filas);
        });
    }

    /** Eliminar una meta */
    public void eliminar(Meta meta, CallbackInt callback) {
        executor.execute(() -> {
            int filas = dao.eliminar(meta);
            callback.onResult(filas);
        });
    }
}

--- FILE: C:\AndroidProjects\HealthyWallet\app\src\main\java\com\example\healthywallet\controller\MovimientosControlador.java ---

package com.example.healthywallet.controller;

import android.content.Context;
import android.content.SharedPreferences;

import com.example.healthywallet.database.GestorBaseDatos;
import com.example.healthywallet.database.DAO.MovimientoDao;
import com.example.healthywallet.database.entities.Movimiento;
import com.example.healthywallet.database.entities.CategoriaGasto;

import java.util.List;
import java.util.concurrent.ExecutorService;

public class MovimientosControlador {

    // =============================
    //      CALLBACKS
    // =============================

    public interface CallbackMovimiento {
        void onResult(Movimiento mov);
    }

    public interface CallbackListaMovimiento {
        void onResult(List<Movimiento> lista);
    }

    public interface CallbackDouble {
        void onResult(double valor);
    }

    public interface CallbackInt {
        void onResult(int valor);
    }

    public interface CallbackCategoriaGasto {
        void onResult(List<CategoriaGasto> lista);
    }

    public interface CallbackUnaCategoria {
        void onResult(CategoriaGasto categoria);
    }

    public interface CallbackListaCategoriaGasto {
        void onResult(List<CategoriaGasto> lista);
    }

    // =============================
    //  ATRIBUTOS
    // =============================

    private final MovimientoDao dao;
    private final ExecutorService executor;
    private final int userId;

    // =============================
    //  CONSTRUCTOR
    // =============================

    public MovimientosControlador(Context context) {
        GestorBaseDatos db = GestorBaseDatos.obtenerInstancia(context);
        dao = db.movimientoDao();
        executor = GestorBaseDatos.databaseExecutor;

        SharedPreferences prefs = context.getSharedPreferences("session", Context.MODE_PRIVATE);
        userId = prefs.getInt("usuarioId", -1);
    }

    // =============================
    //      CRUD BÃSICO
    // =============================

    public void insertar(Movimiento mov, CallbackInt callback) {
        mov.setUserId(userId);
        executor.execute(() -> {
            int result = (int) dao.insertar(mov);
            callback.onResult(result);
        });
    }

    public void actualizar(Movimiento mov, CallbackInt callback) {
        mov.setUserId(userId);
        executor.execute(() -> {
            int result = dao.actualizar(mov);
            callback.onResult(result);
        });
    }

    public void obtenerPorId(int id, CallbackMovimiento callback) {
        executor.execute(() -> {
            Movimiento mov = dao.obtenerPorId(id, userId);
            callback.onResult(mov);
        });
    }

    public void obtenerTodos(CallbackListaMovimiento callback) {
        executor.execute(() -> {
            List<Movimiento> lista = dao.obtenerTodos(userId);
            callback.onResult(lista);
        });
    }

    public void obtenerPorTipo(String tipo, CallbackListaMovimiento callback) {
        executor.execute(() -> {
            List<Movimiento> lista = dao.obtenerPorTipo(tipo, userId);
            callback.onResult(lista);
        });
    }

    public void obtenerSumaPorTipo(String tipo, CallbackDouble callback) {
        executor.execute(() -> {
            Double valor = dao.obtenerSumaPorTipo(tipo, userId);
            callback.onResult(valor != null ? valor : 0.0);
        });
    }

    // =============================
    //      ESTADÃSTICAS NUEVAS
    // =============================

    public void obtenerCategoriaMayorGasto(CallbackUnaCategoria callback) {
        executor.execute(() -> {
            CategoriaGasto cat = dao.obtenerCategoriaMayorGasto(userId);
            callback.onResult(cat);
        });
    }

    public void obtenerGastosPorCategoria(CallbackListaCategoriaGasto callback) {
        executor.execute(() -> {
            List<CategoriaGasto> lista = dao.obtenerGastosPorCategoria(userId);
            callback.onResult(lista);
        });
    }

    // =============================
    //      ELIMINAR MOVIMIENTO
    // =============================

    public void eliminar(Movimiento mov, CallbackInt callback) {
        executor.execute(() -> {
            int filas = dao.eliminar(mov);
            callback.onResult(filas);
        });
    }
}

--- FILE: C:\AndroidProjects\HealthyWallet\app\src\main\java\com\example\healthywallet\controller\PresupuestoControlador.java ---

package com.example.healthywallet.controller;

import android.content.Context;
import android.content.SharedPreferences;

import com.example.healthywallet.database.GestorBaseDatos;
import com.example.healthywallet.database.DAO.PresupuestoDao;
import com.example.healthywallet.database.entities.Presupuesto;

import java.util.List;
import java.util.concurrent.ExecutorService;

public class PresupuestoControlador {

    public interface CallbackListaPresupuesto {
        void onResult(List<Presupuesto> lista);
    }

    public interface CallbackPresupuesto {
        void onResult(Presupuesto p);
    }

    public interface CallbackInt {
        void onResult(int valor);
    }

    public interface CallbackLong {
        void onResult(long valor);
    }

    private final PresupuestoDao dao;
    private final ExecutorService executor;
    private final int userId;   // â† userId del usuario actual

    public PresupuestoControlador(Context context) {
        GestorBaseDatos db = GestorBaseDatos.obtenerInstancia(context);
        dao = db.presupuestoDao();
        executor = GestorBaseDatos.databaseExecutor;

        SharedPreferences prefs = context.getSharedPreferences("session", Context.MODE_PRIVATE);
        userId = prefs.getInt("usuarioId", -1);
    }

    public void insertar(Presupuesto p, CallbackLong callback) {
        p.setUserId(userId);
        executor.execute(() -> callback.onResult(dao.insertar(p)));
    }

    public void actualizar(Presupuesto p, CallbackInt callback) {
        executor.execute(() -> callback.onResult(dao.actualizar(p)));
    }

    public void obtenerPorId(int id, CallbackPresupuesto callback) {
        executor.execute(() -> callback.onResult(dao.obtenerPorId(id, userId)));
    }

    public void obtenerTodos(CallbackListaPresupuesto callback) {
        executor.execute(() -> callback.onResult(dao.obtenerTodos(userId)));
    }

    public void actualizarGasto(int id, double gasto, CallbackInt callback) {
        executor.execute(() -> callback.onResult(dao.actualizarGasto(id, userId, gasto)));
    }

    public void eliminar(Presupuesto p, CallbackInt callback) {
        executor.execute(() -> callback.onResult(dao.eliminar(p)));
    }
}

--- FILE: C:\AndroidProjects\HealthyWallet\app\src\main\java\com\example\healthywallet\controller\UsuarioControlador.java ---

package com.example.healthywallet.controller;

import android.content.Context;

import com.example.healthywallet.database.DAO.UsuarioDao;
import com.example.healthywallet.database.GestorBaseDatos;
import com.example.healthywallet.database.entities.Usuario;

import java.nio.charset.StandardCharsets;
import java.security.MessageDigest;
import java.util.concurrent.ExecutorService;

public class UsuarioControlador {

    private final UsuarioDao usuarioDao;
    private final ExecutorService executor;

    public interface Callback<T> {
        void onComplete(T resultado);
    }

    public UsuarioControlador(Context context) {
        GestorBaseDatos db = GestorBaseDatos.obtenerInstancia(context);
        usuarioDao = db.usuarioDao();
        executor = GestorBaseDatos.databaseExecutor;
    }

    // ===============================
    //       REGISTRO SEGURO
    // ===============================
    public void registrar(Usuario usuario, Callback<Boolean> callback) {
        executor.execute(() -> {
            try {
                Usuario existe = usuarioDao.obtenerPorEmail(usuario.getEmail());
                if (existe != null) {
                    callback.onComplete(false);
                    return;
                }

                // âœ” hash antes de guardar
                String hash = hashearPassword(usuario.getPassword());
                usuario.setPassword(hash);

                usuarioDao.insertar(usuario);
                callback.onComplete(true);

            } catch (Exception e) {
                callback.onComplete(false);
            }
        });
    }

    // ===============================
    //       LOGIN SEGURO
    // ===============================
    public void login(String email, String password, Callback<Usuario> callback) {
        executor.execute(() -> {

            Usuario user = null;

            try {
                Usuario existente = usuarioDao.obtenerPorEmail(email);

                if (existente != null) {

                    String hash = hashearPassword(password);

                    //ya estaba en hash
                    if (hash.equals(existente.getPassword())) {
                        user = existente;
                    }
                    //contraseÃ±a antigua (texto plano)
                    else if (password.equals(existente.getPassword())) {

                        // Actualizamos a hash automÃ¡ticamente
                        usuarioDao.actualizarPassword(email, hash);
                        existente.setPassword(hash);

                        user = existente;
                    }
                }
            } catch (Exception ignored) {}

            callback.onComplete(user);
        });
    }

    // ===============================
    //       hashing SHA-256
    // ===============================
    private String hashearPassword(String password) throws Exception {
        MessageDigest digest = MessageDigest.getInstance("SHA-256");
        byte[] hash = digest.digest(password.getBytes(StandardCharsets.UTF_8));

        StringBuilder hexString = new StringBuilder();
        for (byte b : hash) {
            String hex = Integer.toHexString(0xff & b);
            if (hex.length() == 1) hexString.append("0");
            hexString.append(hex);
        }
        return hexString.toString();
    }
}

--- FILE: C:\AndroidProjects\HealthyWallet\app\src\main\java\com\example\healthywallet\controller\VideoEducacionControlador.java ---

package com.example.healthywallet.controller;

import android.content.Context;
import android.content.SharedPreferences;

import com.example.healthywallet.database.GestorBaseDatos;
import com.example.healthywallet.database.DAO.VideoEducacionDao;
import com.example.healthywallet.database.entities.VideoEducacion;

import java.util.List;
import java.util.concurrent.ExecutorService;

public class VideoEducacionControlador {

    private final VideoEducacionDao dao;
    private final ExecutorService executor;
    private final int userId;

    public interface CallbackLista { void onResult(List<VideoEducacion> lista); }
    public interface CallbackSimple { void onResult(); }

    public VideoEducacionControlador(Context context) {
        dao = GestorBaseDatos.obtenerInstancia(context).videoEducacionDao();
        executor = GestorBaseDatos.databaseExecutor;

        SharedPreferences prefs = context.getSharedPreferences("session", Context.MODE_PRIVATE);
        userId = prefs.getInt("usuarioId", -1);
    }

    public void insertar(VideoEducacion video, CallbackSimple callback) {
        video.userId = userId;
        executor.execute(() -> {
            dao.insertar(video);
            callback.onResult();
        });
    }

    public void insertarTodos(List<VideoEducacion> lista, CallbackSimple callback) {
        for (VideoEducacion v : lista) v.userId = userId;

        executor.execute(() -> {
            dao.insertarTodos(lista);
            callback.onResult();
        });
    }

    public void obtenerTodos(CallbackLista callback) {
        executor.execute(() -> {
            List<VideoEducacion> lista = dao.obtenerTodos(userId);
            callback.onResult(lista);
        });
    }

    public void obtenerPorNivel(String nivel, CallbackLista callback) {
        executor.execute(() -> {
            List<VideoEducacion> lista = dao.obtenerPorNivel(nivel, userId);
            callback.onResult(lista);
        });
    }

    public void marcarComoCompletado(VideoEducacion video, CallbackSimple callback) {
        video.setCompletado(true);
        video.setFechaCompletado(System.currentTimeMillis());

        executor.execute(() -> {
            dao.actualizar(video);
            callback.onResult();
        });
    }
}

--- FILE: C:\AndroidProjects\HealthyWallet\app\src\main\java\com\example\healthywallet\database\DAO\CategoriaDao.java ---

package com.example.healthywallet.database.DAO;

import androidx.room.Dao;
import androidx.room.Insert;
import androidx.room.OnConflictStrategy;
import androidx.room.Query;

import com.example.healthywallet.database.entities.Categoria;

import java.util.List;

@Dao
public interface CategoriaDao {

    @Insert(onConflict = OnConflictStrategy.REPLACE)
    long insertar(Categoria categoria);

    @Query("SELECT * FROM categorias ORDER BY nombre ASC")
    List<Categoria> obtenerTodas();

    @Query("DELETE FROM categorias WHERE id = :id")
    int eliminarPorId(int id);
}

--- FILE: C:\AndroidProjects\HealthyWallet\app\src\main\java\com\example\healthywallet\database\DAO\FormacionDao.java ---

package com.example.healthywallet.database.DAO;

import androidx.room.Dao;
import androidx.room.Insert;
import androidx.room.OnConflictStrategy;
import androidx.room.Query;
import androidx.room.Update;

import com.example.healthywallet.database.entities.Formacion;

import java.util.List;

@Dao
public interface FormacionDao {

    // =========================
    // INSERTAR
    // =========================
    @Insert(onConflict = OnConflictStrategy.REPLACE)
    long insertar(Formacion formacion);

    // =========================
    // ACTUALIZAR
    // =========================
    @Update
    int actualizar(Formacion formacion);

    // =========================
    // OBTENER TODOS
    // =========================
    @Query("SELECT * FROM formacion WHERE userId = :userId ORDER BY nivel ASC")
    List<Formacion> obtenerTodas(int userId);

    // =========================
    // OBTENER POR NIVEL
    // =========================
    @Query("SELECT * FROM formacion WHERE nivel = :nivel AND userId = :userId ORDER BY id ASC")
    List<Formacion> obtenerPorNivel(String nivel, int userId);

    // =========================
    // CONTAR TOTAL POR NIVEL
    // =========================
    @Query("SELECT COUNT(*) FROM formacion WHERE nivel = :nivel AND userId = :userId")
    int contarPorNivel(String nivel, int userId);

    // =========================
    // CONTAR COMPLETADOS POR NIVEL
    // =========================
    @Query("SELECT COUNT(*) FROM formacion WHERE nivel = :nivel AND completado = 1 AND userId = :userId")
    int contarCompletadosNivel(String nivel, int userId);

    // =========================
    // CONTAR TODOS LOS VIDEOS
    // =========================
    @Query("SELECT COUNT(*) FROM formacion WHERE userId = :userId")
    int contarTodos(int userId);

    // =========================
    // CONTAR TODOS COMPLETADOS
    // =========================
    @Query("SELECT COUNT(*) FROM formacion WHERE completado = 1 AND userId = :userId")
    int contarTodosCompletados(int userId);

    // =========================
    // ELIMINAR POR ID
    // =========================
    @Query("DELETE FROM formacion WHERE id = :id AND userId = :userId")
    int eliminarPorId(int id, int userId);
}

--- FILE: C:\AndroidProjects\HealthyWallet\app\src\main\java\com\example\healthywallet\database\DAO\MetaDao.java ---

package com.example.healthywallet.database.DAO;

import androidx.room.Dao;
import androidx.room.Insert;
import androidx.room.OnConflictStrategy;
import androidx.room.Query;
import androidx.room.Update;
import androidx.room.Delete;

import com.example.healthywallet.database.entities.Meta;

import java.util.List;

@Dao
public interface MetaDao {

    @Insert(onConflict = OnConflictStrategy.REPLACE)
    long insertar(Meta meta);

    @Update
    int actualizar(Meta meta);

    @Delete
    int eliminar(Meta meta);

    @Query("SELECT * FROM metas WHERE userId = :userId ORDER BY fechaObjetivo ASC")
    List<Meta> obtenerTodas(int userId);

    @Query("SELECT * FROM metas WHERE id = :id AND userId = :userId LIMIT 1")
    Meta obtenerPorId(int id, int userId);

    @Query("UPDATE metas SET cantidadActual = :cantidad WHERE id = :id AND userId = :userId")
    int actualizarCantidad(double cantidad, int id, int userId);
}

--- FILE: C:\AndroidProjects\HealthyWallet\app\src\main\java\com\example\healthywallet\database\DAO\MovimientoDao.java ---

package com.example.healthywallet.database.DAO;

import androidx.room.Dao;
import androidx.room.Insert;
import androidx.room.OnConflictStrategy;
import androidx.room.Query;
import androidx.room.Delete;
import androidx.room.Update;

import com.example.healthywallet.database.entities.Movimiento;
import com.example.healthywallet.database.entities.CategoriaGasto;

import java.util.List;

@Dao
public interface MovimientoDao {

    @Insert
    long insertar(Movimiento movimiento);

    @Update
    int actualizar(Movimiento movimiento);

    @Delete
    int eliminar(Movimiento movimiento);

    @Query("SELECT * FROM movimientos WHERE userId = :userId ORDER BY fecha DESC")
    List<Movimiento> obtenerTodos(int userId);

    @Query("SELECT * FROM movimientos WHERE id = :id AND userId = :userId LIMIT 1")
    Movimiento obtenerPorId(int id, int userId);

    @Query("SELECT * FROM movimientos WHERE tipo = :tipo AND userId = :userId ORDER BY fecha DESC")
    List<Movimiento> obtenerPorTipo(String tipo, int userId);

    @Query("SELECT SUM(cantidad) FROM movimientos WHERE tipo = :tipo AND userId = :userId")
    Double obtenerSumaPorTipo(String tipo, int userId);

    // ============= NUEVOS MÃ‰TODOS =============

    @Query("SELECT categoria AS categoria, SUM(cantidad) AS total " +
            "FROM movimientos WHERE userId = :userId AND tipo='Gasto' " +
            "GROUP BY categoria ORDER BY total DESC")
    List<CategoriaGasto> obtenerGastosPorCategoria(int userId);

    @Query("SELECT categoria AS categoria, SUM(cantidad) AS total " +
            "FROM movimientos " +
            "WHERE userId = :userId AND tipo = 'Gasto' " +
            "GROUP BY categoria " +
            "ORDER BY total DESC " +
            "LIMIT 1")
    CategoriaGasto obtenerCategoriaMayorGasto(int userId);
}

--- FILE: C:\AndroidProjects\HealthyWallet\app\src\main\java\com\example\healthywallet\database\DAO\PresupuestoDao.java ---

package com.example.healthywallet.database.DAO;

import androidx.room.Dao;
import androidx.room.Insert;
import androidx.room.OnConflictStrategy;
import androidx.room.Query;
import androidx.room.Update;
import androidx.room.Delete;

import com.example.healthywallet.database.entities.Presupuesto;

import java.util.List;

@Dao
public interface PresupuestoDao {

    @Insert(onConflict = OnConflictStrategy.REPLACE)
    long insertar(Presupuesto presupuesto);

    @Update
    int actualizar(Presupuesto presupuesto);

    @Delete
    int eliminar(Presupuesto presupuesto);

    @Query("SELECT * FROM presupuestos WHERE userId = :userId ORDER BY categoria ASC")
    List<Presupuesto> obtenerTodos(int userId);

    @Query("SELECT * FROM presupuestos WHERE id = :id AND userId = :userId LIMIT 1")
    Presupuesto obtenerPorId(int id, int userId);

    @Query("UPDATE presupuestos SET gastoActual = :nuevoGasto WHERE id = :id AND userId = :userId")
    int actualizarGasto(int id, int userId, double nuevoGasto);
}

--- FILE: C:\AndroidProjects\HealthyWallet\app\src\main\java\com\example\healthywallet\database\DAO\UsuarioDao.java ---

package com.example.healthywallet.database.DAO;

import androidx.room.Dao;
import androidx.room.Delete;
import androidx.room.Insert;
import androidx.room.OnConflictStrategy;
import androidx.room.Query;

import com.example.healthywallet.database.entities.Usuario;

import java.util.List;

@Dao
public interface UsuarioDao {

    @Insert(onConflict = OnConflictStrategy.ABORT)
    long insertar(Usuario usuario);

    @Query("SELECT * FROM usuarios WHERE email = :email LIMIT 1")
    Usuario obtenerPorEmail(String email);

    // Mantengo login antiguo (solo para compatibilidad)
    @Query("SELECT * FROM usuarios WHERE email = :email AND password = :password LIMIT 1")
    Usuario login(String email, String password);

    // actualizar password ya hasheada
    @Query("UPDATE usuarios SET password = :password WHERE email = :email")
    void actualizarPassword(String email, String password);

    @Query("SELECT * FROM usuarios")
    List<Usuario> obtenerTodos();

    @Delete
    int borrar(Usuario usuario);
}

--- FILE: C:\AndroidProjects\HealthyWallet\app\src\main\java\com\example\healthywallet\database\DAO\VideoEducacionDao.java ---

package com.example.healthywallet.database.DAO;

import androidx.room.Dao;
import androidx.room.Insert;
import androidx.room.Query;
import androidx.room.Update;

import com.example.healthywallet.database.entities.VideoEducacion;

import java.util.List;

@Dao
public interface VideoEducacionDao {

    @Insert
    void insertar(VideoEducacion video);

    @Insert
    void insertarTodos(List<VideoEducacion> lista);

    @Update
    void actualizar(VideoEducacion video);

    @Query("SELECT * FROM video_educacion WHERE userId = :userId")
    List<VideoEducacion> obtenerTodos(int userId);

    @Query("SELECT * FROM video_educacion WHERE nivel = :nivel AND userId = :userId")
    List<VideoEducacion> obtenerPorNivel(String nivel, int userId);
}

--- FILE: C:\AndroidProjects\HealthyWallet\app\src\main\java\com\example\healthywallet\database\entities\Categoria.java ---

package com.example.healthywallet.database.entities;

import androidx.room.ColumnInfo;
import androidx.room.Entity;
import androidx.room.PrimaryKey;

@Entity(tableName = "categorias")
public class Categoria {

    @PrimaryKey(autoGenerate = true)
    private int id;

    @ColumnInfo(name = "nombre")
    private String nombre;

    @ColumnInfo(name = "descripcion")
    private String descripcion;

    public Categoria(String nombre, String descripcion) {
        this.nombre = nombre;
        this.descripcion = descripcion;
    }

    // Getters y setters
    public int getId() { return id; }
    public void setId(int id) { this.id = id; }

    public String getNombre() { return nombre; }
    public void setNombre(String nombre) { this.nombre = nombre; }

    public String getDescripcion() { return descripcion; }
    public void setDescripcion(String descripcion) { this.descripcion = descripcion; }
}

--- FILE: C:\AndroidProjects\HealthyWallet\app\src\main\java\com\example\healthywallet\database\entities\CategoriaGasto.java ---

package com.example.healthywallet.database.entities;

public class CategoriaGasto {

    private String categoria;
    private double total;

    public CategoriaGasto(String categoria, double total) {
        this.categoria = categoria;
        this.total = total;
    }

    public String getCategoria() {
        return categoria;
    }

    public double getTotal() {
        return total;
    }
}

--- FILE: C:\AndroidProjects\HealthyWallet\app\src\main\java\com\example\healthywallet\database\entities\Formacion.java ---

package com.example.healthywallet.database.entities;

import androidx.room.Entity;
import androidx.room.PrimaryKey;

@Entity(tableName = "formacion")
public class Formacion {

    @PrimaryKey(autoGenerate = true)
    private int id;

    private String titulo;
    private String url;
    private String nivel; // PRINCIPIANTE / INTERMEDIO / EXPERTO

    private boolean completado;     // â† IMPORTANTE
    private long fechaCompletado;   // â† IMPORTANTE

    private int userId; // MULTICUENTA

    public Formacion(String titulo, String url, String nivel, int userId) {
        this.titulo = titulo;
        this.url = url;
        this.nivel = nivel;
        this.userId = userId;
        this.completado = false;
        this.fechaCompletado = 0;
    }

    // ==== GETTERS ====
    public int getId() { return id; }
    public String getTitulo() { return titulo; }
    public String getUrl() { return url; }
    public String getNivel() { return nivel; }
    public boolean isCompletado() { return completado; }
    public long getFechaCompletado() { return fechaCompletado; }
    public int getUserId() { return userId; }

    // ==== SETTERS ====
    public void setId(int id) { this.id = id; }
    public void setTitulo(String titulo) { this.titulo = titulo; }
    public void setUrl(String url) { this.url = url; }
    public void setNivel(String nivel) { this.nivel = nivel; }
    public void setCompletado(boolean completado) { this.completado = completado; }
    public void setFechaCompletado(long fechaCompletado) { this.fechaCompletado = fechaCompletado; }
    public void setUserId(int userId) { this.userId = userId; }
}

--- FILE: C:\AndroidProjects\HealthyWallet\app\src\main\java\com\example\healthywallet\database\entities\Meta.java ---

package com.example.healthywallet.database.entities;

import androidx.room.ColumnInfo;
import androidx.room.Entity;
import androidx.room.ForeignKey;
import androidx.room.PrimaryKey;

@Entity(
        tableName = "metas",
        foreignKeys = @ForeignKey(
                entity = Usuario.class,
                parentColumns = "id",
                childColumns = "userId",
                onDelete = ForeignKey.CASCADE
        )
)
public class Meta {

    @PrimaryKey(autoGenerate = true)
    private int id;

    @ColumnInfo(name = "nombre")
    private String nombre;

    @ColumnInfo(name = "cantidadObjetivo")
    private double cantidadObjetivo;

    @ColumnInfo(name = "cantidadActual")
    private double cantidadActual;

    @ColumnInfo(name = "fechaObjetivo")
    private String fechaObjetivo;

    @ColumnInfo(name = "userId", index = true)
    private int userId;  // â† NUEVO: dueÃ±o de la meta

    public Meta(String nombre, double cantidadObjetivo, double cantidadActual, String fechaObjetivo, int userId) {
        this.nombre = nombre;
        this.cantidadObjetivo = cantidadObjetivo;
        this.cantidadActual = cantidadActual;
        this.fechaObjetivo = fechaObjetivo;
        this.userId = userId;
    }

    // Getters y setters
    public int getId() { return id; }
    public void setId(int id) { this.id = id; }

    public String getNombre() { return nombre; }
    public void setNombre(String nombre) { this.nombre = nombre; }

    public double getCantidadObjetivo() { return cantidadObjetivo; }
    public void setCantidadObjetivo(double cantidadObjetivo) { this.cantidadObjetivo = cantidadObjetivo; }

    public double getCantidadActual() { return cantidadActual; }
    public void setCantidadActual(double cantidadActual) { this.cantidadActual = cantidadActual; }

    public String getFechaObjetivo() { return fechaObjetivo; }
    public void setFechaObjetivo(String fechaObjetivo) { this.fechaObjetivo = fechaObjetivo; }

    public int getUserId() { return userId; }
    public void setUserId(int userId) { this.userId = userId; }
}

--- FILE: C:\AndroidProjects\HealthyWallet\app\src\main\java\com\example\healthywallet\database\entities\Movimiento.java ---

package com.example.healthywallet.database.entities;

import androidx.room.ColumnInfo;
import androidx.room.Entity;
import androidx.room.ForeignKey;
import androidx.room.PrimaryKey;

@Entity(
        tableName = "movimientos",
        foreignKeys = @ForeignKey(
                entity = Usuario.class,
                parentColumns = "id",
                childColumns = "userId",
                onDelete = ForeignKey.CASCADE
        )
)
public class Movimiento {

    @PrimaryKey(autoGenerate = true)
    private int id;

    @ColumnInfo(name = "tipo")
    private String tipo;

    @ColumnInfo(name = "categoria")
    private String categoria;

    @ColumnInfo(name = "cantidad")
    private double cantidad;

    @ColumnInfo(name = "fecha")
    private String fecha;

    @ColumnInfo(name = "descripcion")
    private String descripcion;

    @ColumnInfo(name = "userId", index = true)
    private int userId;  // â† NUEVO: para asociar este movimiento al usuario

    public Movimiento(String tipo, String categoria, double cantidad, String fecha, String descripcion, int userId) {
        this.tipo = tipo;
        this.categoria = categoria;
        this.cantidad = cantidad;
        this.fecha = fecha;
        this.descripcion = descripcion;
        this.userId = userId;
    }

    // Getters y setters
    public int getId() { return id; }
    public void setId(int id) { this.id = id; }

    public String getTipo() { return tipo; }
    public void setTipo(String tipo) { this.tipo = tipo; }

    public String getCategoria() { return categoria; }
    public void setCategoria(String categoria) { this.categoria = categoria; }

    public double getCantidad() { return cantidad; }
    public void setCantidad(double cantidad) { this.cantidad = cantidad; }

    public String getFecha() { return fecha; }
    public void setFecha(String fecha) { this.fecha = fecha; }

    public String getDescripcion() { return descripcion; }
    public void setDescripcion(String descripcion) { this.descripcion = descripcion; }

    public int getUserId() { return userId; }
    public void setUserId(int userId) { this.userId = userId; }
}

--- FILE: C:\AndroidProjects\HealthyWallet\app\src\main\java\com\example\healthywallet\database\entities\Presupuesto.java ---

package com.example.healthywallet.database.entities;

import androidx.room.ColumnInfo;
import androidx.room.Entity;
import androidx.room.ForeignKey;
import androidx.room.PrimaryKey;

@Entity(
        tableName = "presupuestos",
        foreignKeys = @ForeignKey(
                entity = Usuario.class,
                parentColumns = "id",
                childColumns = "userId",
                onDelete = ForeignKey.CASCADE
        )
)
public class Presupuesto {

    @PrimaryKey(autoGenerate = true)
    private int id;

    @ColumnInfo(name = "categoria")
    private String categoria;

    @ColumnInfo(name = "limite")
    private double limite;

    @ColumnInfo(name = "gastoActual")
    private double gastoActual;

    @ColumnInfo(name = "userId", index = true)
    private int userId; // â† NUEVO: identifica al dueÃ±o del presupuesto

    // Constructor principal
    public Presupuesto(String categoria, double limite, double gastoActual, int userId) {
        this.categoria = categoria;
        this.limite = limite;
        this.gastoActual = gastoActual;
        this.userId = userId;
    }

    // Getters y setters
    public int getId() { return id; }
    public void setId(int id) { this.id = id; }

    public String getCategoria() { return categoria; }
    public void setCategoria(String categoria) { this.categoria = categoria; }

    public double getLimite() { return limite; }
    public void setLimite(double limite) { this.limite = limite; }

    public double getGastoActual() { return gastoActual; }
    public void setGastoActual(double gastoActual) { this.gastoActual = gastoActual; }

    public int getUserId() { return userId; }
    public void setUserId(int userId) { this.userId = userId; }
}

--- FILE: C:\AndroidProjects\HealthyWallet\app\src\main\java\com\example\healthywallet\database\entities\Usuario.java ---

package com.example.healthywallet.database.entities;

import androidx.annotation.NonNull;
import androidx.room.ColumnInfo;
import androidx.room.Entity;
import androidx.room.Ignore;
import androidx.room.Index;
import androidx.room.PrimaryKey;

@Entity(
        tableName = "usuarios",
        indices = { @Index(value = "email", unique = true) } // Opcional pero recomendado
)
public class Usuario {

    @PrimaryKey(autoGenerate = true)
    private int id;

    @NonNull
    @ColumnInfo(name = "nombre")
    private String nombre;

    @NonNull
    @ColumnInfo(name = "email")
    private String email;

    @NonNull
    @ColumnInfo(name = "password")
    private String password;

    // Constructor vacÃ­o requerido por Room
    public Usuario() {
        this.nombre = "";
        this.email = "";
        this.password = "";
    }

    @Ignore
    public Usuario(@NonNull String nombre, @NonNull String email, @NonNull String password) {
        this.nombre = nombre;
        this.email = email;
        this.password = password;
    }

    // Getters y Setters
    public int getId() { return id; }
    public void setId(int id) { this.id = id; }

    @NonNull
    public String getNombre() { return nombre; }
    public void setNombre(@NonNull String nombre) { this.nombre = nombre; }

    @NonNull
    public String getEmail() { return email; }
    public void setEmail(@NonNull String email) { this.email = email; }

    @NonNull
    public String getPassword() { return password; }
    public void setPassword(@NonNull String password) { this.password = password; }
}

--- FILE: C:\AndroidProjects\HealthyWallet\app\src\main\java\com\example\healthywallet\database\entities\VideoEducacion.java ---

package com.example.healthywallet.database.entities;

import androidx.room.Entity;
import androidx.room.PrimaryKey;

@Entity(tableName = "video_educacion")
public class VideoEducacion {

    @PrimaryKey(autoGenerate = true)
    public int id;

    public String nivel;          // principiante / medio / avanzado
    public String titulo;
    public String url;

    public int completado = 0;    // 0 = no, 1 = sÃ­
    public long fechaCompletado = 0;

    public int userId;            // necesario para multicuenta

    // --- SETTERS NECESARIOS ---
    public void setCompletado(boolean valor) {
        this.completado = valor ? 1 : 0;
    }

    public void setFechaCompletado(long fecha) {
        this.fechaCompletado = fecha;
    }
}

--- FILE: C:\AndroidProjects\HealthyWallet\app\src\main\java\com\example\healthywallet\database\GestorBaseDatos.java ---

package com.example.healthywallet.database;

import android.content.Context;

import androidx.annotation.NonNull;
import androidx.room.Database;
import androidx.room.Room;
import androidx.room.RoomDatabase;
import androidx.room.migration.Migration;
import androidx.sqlite.db.SupportSQLiteDatabase;

import com.example.healthywallet.database.DAO.CategoriaDao;
import com.example.healthywallet.database.DAO.FormacionDao;
import com.example.healthywallet.database.DAO.MetaDao;
import com.example.healthywallet.database.DAO.MovimientoDao;
import com.example.healthywallet.database.DAO.PresupuestoDao;
import com.example.healthywallet.database.DAO.UsuarioDao;
import com.example.healthywallet.database.DAO.VideoEducacionDao;

import com.example.healthywallet.database.entities.Categoria;
import com.example.healthywallet.database.entities.Formacion;
import com.example.healthywallet.database.entities.Meta;
import com.example.healthywallet.database.entities.Movimiento;
import com.example.healthywallet.database.entities.Presupuesto;
import com.example.healthywallet.database.entities.Usuario;
import com.example.healthywallet.database.entities.VideoEducacion;

import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;

@Database(
        entities = {
                Movimiento.class,
                Categoria.class,
                Presupuesto.class,
                Meta.class,
                Formacion.class,
                Usuario.class,
                VideoEducacion.class  // â† NUEVA ENTIDAD
        },
        version = 6  // â† SUBIDA A VERSIÃ“N 6
)
public abstract class GestorBaseDatos extends RoomDatabase {

    // ==== DAOs ====
    public abstract MovimientoDao movimientoDao();
    public abstract PresupuestoDao presupuestoDao();
    public abstract MetaDao metaDao();
    public abstract FormacionDao formacionDao();
    public abstract CategoriaDao categoriaDao();
    public abstract UsuarioDao usuarioDao();
    public abstract VideoEducacionDao videoEducacionDao();   // â† NUEVO DAO

    // ==== SINGLETON ====
    private static volatile GestorBaseDatos INSTANCIA;

    private static final int NUM_HILOS = 4;
    public static final ExecutorService databaseExecutor =
            Executors.newFixedThreadPool(NUM_HILOS);

    // ==== MIGRACIONES ====

    // MigraciÃ³n 1â†’2
    static final Migration MIGRACION_1_2 = new Migration(1, 2) {
        @Override public void migrate(@NonNull SupportSQLiteDatabase db) {}
    };

    // MigraciÃ³n 2â†’3
    static final Migration MIGRACION_2_3 = new Migration(2, 3) {
        @Override public void migrate(@NonNull SupportSQLiteDatabase db) {
            db.execSQL("CREATE TABLE IF NOT EXISTS `recursos_educativos` (" +
                    "`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, " +
                    "`tipo` TEXT NOT NULL, " +
                    "`titulo` TEXT NOT NULL, " +
                    "`url` TEXT NOT NULL, " +
                    "`completado` INTEGER NOT NULL, " +
                    "`fechaCompletado` INTEGER NOT NULL, " +
                    "`fechaRecomendado` INTEGER NOT NULL)");
        }
    };

    // MigraciÃ³n 3â†’4
    static final Migration MIGRACION_3_4 = new Migration(3, 4) {
        @Override public void migrate(@NonNull SupportSQLiteDatabase db) {
            db.execSQL("CREATE TABLE IF NOT EXISTS usuarios (" +
                    "id INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, " +
                    "nombre TEXT NOT NULL, " +
                    "email TEXT NOT NULL, " +
                    "password TEXT NOT NULL)");
        }
    };

    // MigraciÃ³n 4â†’5
    static final Migration MIGRACION_4_5 = new Migration(4, 5) {
        @Override public void migrate(@NonNull SupportSQLiteDatabase db) {
            db.execSQL("ALTER TABLE presupuestos ADD COLUMN userId INTEGER NOT NULL DEFAULT -1");
            db.execSQL("ALTER TABLE movimientos ADD COLUMN userId INTEGER NOT NULL DEFAULT -1");
            db.execSQL("ALTER TABLE metas ADD COLUMN userId INTEGER NOT NULL DEFAULT -1");
            db.execSQL("ALTER TABLE formacion ADD COLUMN userId INTEGER NOT NULL DEFAULT -1");
        }
    };

    // ==== NUEVA MIGRACIÃ“N 5â†’6 ====
    static final Migration MIGRACION_5_6 = new Migration(5, 6) {
        @Override public void migrate(@NonNull SupportSQLiteDatabase db) {

            db.execSQL("" +
                    "CREATE TABLE IF NOT EXISTS `videos_educacion` (" +
                    "`id` INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, " +
                    "`titulo` TEXT NOT NULL, " +
                    "`url` TEXT NOT NULL, " +
                    "`nivel` TEXT NOT NULL, " +
                    "`completado` INTEGER NOT NULL, " +
                    "`fechaCompletado` INTEGER NOT NULL)");
        }
    };

    // ==== OBTENER INSTANCIA (SINGLETON) ====
    public static GestorBaseDatos obtenerInstancia(Context context) {
        if (INSTANCIA == null) {
            synchronized (GestorBaseDatos.class) {
                if (INSTANCIA == null) {
                    INSTANCIA = Room.databaseBuilder(
                                    context.getApplicationContext(),
                                    GestorBaseDatos.class,
                                    "HealthyWalletDB"
                            )
                            .addMigrations(
                                    MIGRACION_1_2,
                                    MIGRACION_2_3,
                                    MIGRACION_3_4,
                                    MIGRACION_4_5,
                                    MIGRACION_5_6   // â† REGISTRADA
                            )
                            .build();
                }
            }
        }
        return INSTANCIA;
    }
}

--- FILE: C:\AndroidProjects\HealthyWallet\app\src\main\java\com\example\healthywallet\ui\educacion\PantallaEducacion.java ---

package com.example.healthywallet.ui.educacion;

import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.LinearLayout;
import android.widget.TextView;

import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;

import com.example.healthywallet.R;
import com.example.healthywallet.controller.FormacionControlador;
import com.example.healthywallet.database.entities.Formacion;
import com.google.android.material.card.MaterialCardView;
import com.google.android.material.progressindicator.LinearProgressIndicator;

import java.util.ArrayList;
import java.util.Calendar;
import java.util.List;

public class PantallaEducacion extends Fragment {

    private FormacionControlador controlador;

    // ==== VISTAS ====
    private TextView txtProgresoGlobal;
    private LinearProgressIndicator barraProgresoGlobal;

    private LinearLayout contPrincipiante, contIntermedio, contExperto;

    private LinearProgressIndicator barraPrincipiante, barraIntermedio, barraExperto;

    private TextView txtLibroTitulo, txtLibroAutor;
    private Button btnAbrirLibro;

    public PantallaEducacion() {
        super(R.layout.pantalla_educacion);
    }

    @Override
    public void onViewCreated(View vista, @Nullable Bundle savedInstanceState) {
        super.onViewCreated(vista, savedInstanceState);

        controlador = new FormacionControlador(requireContext());
        controlador.inicializarDatosSiNecesario();

        // ==== REFERENCIAS ====
        txtProgresoGlobal = vista.findViewById(R.id.txtProgresoGlobal);
        barraProgresoGlobal = vista.findViewById(R.id.progresoGlobalBarra);

        contPrincipiante = vista.findViewById(R.id.contenedorVideosPrincipiante);
        contIntermedio = vista.findViewById(R.id.contenedorVideosIntermedio);
        contExperto = vista.findViewById(R.id.contenedorVideosExperto);

        barraPrincipiante = vista.findViewById(R.id.barraNivelPrincipiante);
        barraIntermedio = vista.findViewById(R.id.barraNivelIntermedio);
        barraExperto = vista.findViewById(R.id.barraNivelExperto);

        txtLibroTitulo = vista.findViewById(R.id.txtLibroTitulo);
        txtLibroAutor = vista.findViewById(R.id.txtLibroAutor);
        btnAbrirLibro = vista.findViewById(R.id.btnAbrirLibro);

        // === HERRAMIENTAS ===
        MaterialCardView toolCalc = vista.findViewById(R.id.toolCalculadoraInteres);
        MaterialCardView toolSim = vista.findViewById(R.id.toolSimuladorInversion);
        MaterialCardView toolDic = vista.findViewById(R.id.toolDiccionarioFinanciero);

        toolCalc.setOnClickListener(v -> abrirWeb("http://www.moneychimp.com/international/es/calculator/compound_interest_calculator.htm"));
        toolSim.setOnClickListener(v -> abrirWeb("https://es.investing.com/"));
        toolDic.setOnClickListener(v -> abrirWeb("https://es.tradingview.com/"));

        // CARGA
        cargarVideos();
        cargarLibroSemana();
    }

    // =====================================================================================
    //   ABRIR LINKS
    // =====================================================================================
    private void abrirWeb(String url) {
        Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
        startActivity(intent);
    }

    // =====================================================================================
    //   CARGAR VIDEOS DESDE BASE DE DATOS
    // =====================================================================================
    private void cargarVideos() {

        controlador.obtenerTodas(lista -> {
            if (lista == null) return;

            requireActivity().runOnUiThread(() -> {
                contPrincipiante.removeAllViews();
                contIntermedio.removeAllViews();
                contExperto.removeAllViews();
            });

            List<Formacion> principiantes = new ArrayList<>();
            List<Formacion> intermedios = new ArrayList<>();
            List<Formacion> expertos = new ArrayList<>();

            for (Formacion v : lista) {
                switch (v.getNivel().toLowerCase()) {
                    case "principiante":
                        principiantes.add(v);
                        break;
                    case "intermedio":
                        intermedios.add(v);
                        break;
                    case "experto":
                        expertos.add(v);
                        break;
                }
            }

            cargarVideosEnContenedor(principiantes, contPrincipiante, barraPrincipiante);
            cargarVideosEnContenedor(intermedios, contIntermedio, barraIntermedio);
            cargarVideosEnContenedor(expertos, contExperto, barraExperto);

            calcularProgresoGlobal();
        });
    }

    // =====================================================================================
    //   AGREGAR VIDEOS A SU CONTENEDOR + ACTUALIZAR BARRA
    // =====================================================================================
    private void cargarVideosEnContenedor(List<Formacion> lista, LinearLayout contenedor, LinearProgressIndicator barra) {

        final int total = lista.size();
        final int[] completados = {0};

        requireActivity().runOnUiThread(() -> {

            LayoutInflater infl = LayoutInflater.from(requireContext());

            for (Formacion v : lista) {

                if (v.isCompletado()) completados[0]++;

                View item = infl.inflate(R.layout.item_video, contenedor, false);

                TextView titulo = item.findViewById(R.id.txtTituloVideo);
                CheckBox check = item.findViewById(R.id.checkCompletado);

                titulo.setText(v.getTitulo());
                check.setChecked(v.isCompletado());

                // âœ” CLICK EN EL ITEM PARA ABRIR EL VIDEO
                item.setOnClickListener(vw -> {
                    Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(v.getUrl()));
                    startActivity(intent);
                });

                // âœ” CLICK EN EL CHECKBOX PARA COMPLETAR
                check.setOnCheckedChangeListener((btn, marcado) -> {
                    v.setCompletado(marcado);
                    controlador.actualizar(v, ok -> cargarVideos());
                });

                contenedor.addView(item);
            }

            int porcentaje = total == 0 ? 0 : (completados[0] * 100 / total);
            barra.setProgress(porcentaje);
        });
    }


    // =====================================================================================
    //   CALCULAR PROGRESO TOTAL (%)
    // =====================================================================================
    private void calcularProgresoGlobal() {

        controlador.calcularProgresoGlobal(porcentaje -> {
            requireActivity().runOnUiThread(() -> {
                barraProgresoGlobal.setProgress(porcentaje);
                txtProgresoGlobal.setText(porcentaje + "% completado");
            });
        });
    }

    // =====================================================================================
    //   LIBRO DE LA SEMANA
    // =====================================================================================
    private void cargarLibroSemana() {

        List<String[]> libros = new ArrayList<>();
        libros.add(new String[]{"Padre Rico Padre Pobre", "Robert Kiyosaki", "https://www.amazon.es/Padre-padre-Pobre-edici%C3%B3n-actualizada/dp/8466373004/ref=sr_1_1?dib=eyJ2IjoiMSJ9.X73yUfrT8lmywIVH8vGwZ_SXnHqOWEPvcsqtFm38fme59Q2NSqTHab1YvZSFO8WlqbyYdjJNVjKjRFcAnTGTFJfT9fgm9tDs6z3LneONmsHeGKQ9FrDCmLcVEATDWyaq9yX4ZygsmX5gVL7q-ZchoYKH1m2oUI9_EcWBD5KKe684dx71bLnd5PO111diydEFxGACx0qKVcr9WXJmxJxzVYjWs9cgH5Wc7lO8h_S2VJRaV9r79yJ2rvJj8fYDlEQ1VBusjgfJ3A4wxzyGjTE28oNK3XI6737JzNTvIqPqeWo.RNiwyZTujMqJ68reXXxzYNR6JBNO4sQpPOcJ7m6-suE&dib_tag=se&keywords=Padre+Rico+Padre+Pobre&qid=1764771563&sr=8-1"});
        libros.add(new String[]{"El Hombre MÃ¡s Rico de Babilonia", "George S. Clason", "https://www.amazon.es/hombre-m%C3%A1s-rico-Babilonia-ficci%C3%B3n/dp/8413149444/ref=sr_1_2?__mk_es_ES=%C3%85M%C3%85%C5%BD%C3%95%C3%91&crid=X4F6Q55IEW42&dib=eyJ2IjoiMSJ9.QOVHWy3S0uFBJSPpeFysqEUFTf1iBHbWPbgoK4W-pejOB9kwRx9XorO1Lj4yYifuaoY6uGeESUJTHtWsiXN351xa_Goeq9A7cGPjzoa0EyxAWRI-1CyLKm85b8SZywfGrle6Qczd0cjKz6jIWMf7HXndN3MnYH8kE0op0UkGhLh3r2gJ6lhMQgU4tP2hhAz_nqDne4VjE2WK73v3LO5Fvd3asF3IUHd8Mh1Al8gVBgl6vx3sUorTWgswO3VzRC2xS1VwYBjI0xqTiEbUKl1BRrv-jMZygvLLOuVR2zHTrg4.Tv4kGXzZKrvzRtA9rdlQgj9cD2V0nRe-Vdza4Ei4oZI&dib_tag=se&keywords=El+Hombre+M%C3%A1s+Rico+de+Babilonia&qid=1764771587&sprefix=el+hombre+m%C3%A1s+rico+de+babilonia%2Caps%2C66&sr=8-2"});
        libros.add(new String[]{"Piense y HÃ¡gase Rico", "Napoleon Hill", "https://www.amazon.es/Piense-y-h%C3%A1gase-rico-EXITO/dp/8497778219/ref=sr_1_1?__mk_es_ES=%C3%85M%C3%85%C5%BD%C3%95%C3%91&crid=HFSCFM9WJCZG&dib=eyJ2IjoiMSJ9.vFSEkAszDLCg232Bagf7Y4enmAG1NZP95ODIaQ7MKWGok58FB5bV_LlX2LvTUPFkhzvWz4luysA66HZfB6unOfJBcrUsqZsuJ4sDLKMrZHKaUdvHtN8UhACCGfpLvG0PW3sNp-x8TTvwXkbeZC2DromHOqQXjE4A0s9NCZ738KCMJKEEXWXW1l7LvrhaA1Wiuv___roxBtZCp00ewyaxquJ0afGEwfbno_yPgL32zwXE4mlUerm2_TBfoA0Eapw9X35GhR9-jQOblcTWpwDbJo-NaYgfs8fb-cMZpxbqb2k.fbL_SCB4Fn1GIyjpXBNrcDYAmngleWPg7Wrh088a9dI&dib_tag=se&keywords=Piense+y+H%C3%A1gase+Rico&qid=1764771607&sprefix=piense+y+h%C3%A1gase+rico%2Caps%2C60&sr=8-1"});

        int semana = Calendar.getInstance().get(Calendar.WEEK_OF_YEAR);
        int indice = semana % libros.size();

        String[] libro = libros.get(indice);

        requireActivity().runOnUiThread(() -> {
            txtLibroTitulo.setText(libro[0]);
            txtLibroAutor.setText(libro[1]);

            btnAbrirLibro.setOnClickListener(v -> abrirWeb(libro[2]));
        });
    }
}

--- FILE: C:\AndroidProjects\HealthyWallet\app\src\main\java\com\example\healthywallet\ui\inicio\PantallaBalanceGeneral.java ---

package com.example.healthywallet.ui.inicio;

import android.graphics.Color;
import android.graphics.Typeface;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.LinearLayout;
import android.widget.ProgressBar;
import android.widget.TextView;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.cardview.widget.CardView;
import androidx.fragment.app.Fragment;

import com.example.healthywallet.R;
import com.example.healthywallet.controller.MetaControlador;
import com.example.healthywallet.controller.MovimientosControlador;
import com.example.healthywallet.controller.PresupuestoControlador;
import com.example.healthywallet.database.entities.CategoriaGasto;
import com.example.healthywallet.database.entities.Meta;
import com.example.healthywallet.database.entities.Presupuesto;


public class PantallaBalanceGeneral extends Fragment {

    // --- UI ---
    private TextView txtBalanceMes, txtIngresosGastosMes;

    private ProgressBar barraAhorroMes, barraPresupuestoMes, barraMetas;

    private TextView txtPctAhorro, txtPctPresupuesto, txtPctMetas;

    private TextView txtCategoriaMayorGasto, txtGastoSuperfluo, txtRecomendacion;

    private LinearLayout layoutCategorias;

    // --- Controladores ---
    private MovimientosControlador movC;
    private PresupuestoControlador preC;
    private MetaControlador metaC;

    @Nullable
    @Override
    public View onCreateView(@NonNull LayoutInflater inflater,
                             @Nullable ViewGroup container,
                             @Nullable Bundle savedInstanceState) {

        View v = inflater.inflate(R.layout.pantalla_balance_general, container, false);

        // Referencias UI
        txtBalanceMes = v.findViewById(R.id.txtBalanceMes);
        txtIngresosGastosMes = v.findViewById(R.id.txtIngresosGastosMes);

        barraAhorroMes = v.findViewById(R.id.barraAhorroMes);
        barraPresupuestoMes = v.findViewById(R.id.barraPresupuestoMes);
        barraMetas = v.findViewById(R.id.barraMetas);

        txtPctAhorro = v.findViewById(R.id.txtPctAhorro);
        txtPctPresupuesto = v.findViewById(R.id.txtPctPresupuesto);
        txtPctMetas = v.findViewById(R.id.txtPctMetas);

        txtCategoriaMayorGasto = v.findViewById(R.id.txtCategoriaMayorGasto);
        txtGastoSuperfluo = v.findViewById(R.id.txtGastoSuperfluo);
        txtRecomendacion = v.findViewById(R.id.txtRecomendacion);

        layoutCategorias = v.findViewById(R.id.layoutCategorias);

        // Controladores
        movC = new MovimientosControlador(requireContext());
        preC = new PresupuestoControlador(requireContext());
        metaC = new MetaControlador(requireContext());

        // Cargar datos
        cargarBalanceMes();
        cargarPresupuestos();
        cargarMetas();
        cargarEstadisticasGasto();
        cargarCategorias();

        return v;
    }


    // ---------------------------------------------------------
    // Cargar balance general del mes
    // ---------------------------------------------------------
    private void cargarBalanceMes() {

        movC.obtenerSumaPorTipo("Ingreso", ingresos ->
                movC.obtenerSumaPorTipo("Gasto", gastos -> {

                    double balance = ingresos - gastos;
                    int pct = ingresos == 0 ? 0 : (int) ((balance / ingresos) * 100);

                    if (!isAdded()) return;

                    requireActivity().runOnUiThread(() -> {
                        txtBalanceMes.setText(String.format("%.2f â‚¬", balance));
                        txtIngresosGastosMes.setText(
                                String.format("+%.2f ingresos | -%.2f gastos", ingresos, gastos)
                        );

                        barraAhorroMes.setProgress(pct);
                        txtPctAhorro.setText(pct + "% â€” " + generarMensaje(pct));
                    });

                })
        );
    }


    // ---------------------------------------------------------
    // Cargar Presupuestos
    // ---------------------------------------------------------
    private void cargarPresupuestos() {

        preC.obtenerTodos(lista -> {

            double gasto = 0;
            double limite = 0;

            for (Presupuesto p : lista) {
                gasto += p.getGastoActual();
                limite += p.getLimite();
            }

            int pct = limite == 0 ? 0 : (int) ((gasto / limite) * 100);

            if (!isAdded()) return;

            requireActivity().runOnUiThread(() -> {
                barraPresupuestoMes.setProgress(pct);
                txtPctPresupuesto.setText(pct + "% â€” " + generarMensaje(100 - pct));
            });
        });
    }


    // ---------------------------------------------------------
    // Cargar metas
    // ---------------------------------------------------------
    private void cargarMetas() {

        metaC.obtenerTodas(lista -> {

            double progreso = 0;
            double total = 0;

            for (Meta m : lista) {
                progreso += m.getCantidadActual();
                total += m.getCantidadObjetivo();
            }

            int pct = total == 0 ? 0 : (int) ((progreso / total) * 100);

            if (!isAdded()) return;

            requireActivity().runOnUiThread(() -> {
                barraMetas.setProgress(pct);
                txtPctMetas.setText(pct + "% â€” " + generarMensaje(pct));
            });
        });
    }


    // ---------------------------------------------------------
    // EstadÃ­sticas: categorÃ­a mayor gasto + superfluo
    // ---------------------------------------------------------
    private void cargarEstadisticasGasto() {

        movC.obtenerGastosPorCategoria(resultado -> {

            if (!isAdded()) return;

            requireActivity().runOnUiThread(() -> {

                if (resultado == null || resultado.isEmpty()) {
                    txtCategoriaMayorGasto.setText("CategorÃ­a con mÃ¡s gasto: ---");
                    txtGastoSuperfluo.setText("Gasto superfluo: ---");
                    txtRecomendacion.setText("RecomendaciÃ³n: ---");
                    return;
                }

                double total = 0;
                String maxCat = "";
                double maxVal = 0;

                for (CategoriaGasto item : resultado) {
                    total += item.getTotal();
                    if (item.getTotal() > maxVal) {
                        maxVal = item.getTotal();
                        maxCat = item.getCategoria();
                    }
                }

                int pct = total == 0 ? 0 : (int) ((maxVal / total) * 100);

                txtCategoriaMayorGasto.setText("CategorÃ­a con mÃ¡s gasto: " + maxCat);
                txtGastoSuperfluo.setText("Gasto superfluo: " + pct + "%");

                String rec =
                        pct >= 50 ? "Revisa tus gastos en " + maxCat + " y busca alternativas."
                                : pct >= 25 ? "Puedes optimizar tus gastos en " + maxCat + "."
                                : "Tu gasto estÃ¡ bien equilibrado.";

                txtRecomendacion.setText(rec);
            });
        });
    }



    // ---------------------------------------------------------
    // Cargar categorÃ­as en tarjetas
    // ---------------------------------------------------------
    private void cargarCategorias() {

        movC.obtenerGastosPorCategoria(resultado -> {

            if (!isAdded()) return;

            requireActivity().runOnUiThread(() -> {

                layoutCategorias.removeAllViews();

                if (resultado == null || resultado.isEmpty()) {

                    TextView txt = new TextView(getContext());
                    txt.setText("No hay gastos registrados este mes.");
                    txt.setTextColor(Color.GRAY);
                    layoutCategorias.addView(txt);
                    return;
                }

                for (CategoriaGasto item : resultado) {

                    String categoria = item.getCategoria();
                    double total = item.getTotal();

                    // Crear tarjeta
                    CardView card = new CardView(getContext());
                    card.setCardElevation(6);
                    card.setRadius(14);
                    card.setUseCompatPadding(true);

                    LinearLayout layout = new LinearLayout(getContext());
                    layout.setOrientation(LinearLayout.VERTICAL);
                    layout.setPadding(20, 20, 20, 20);

                    TextView txtCat = new TextView(getContext());
                    txtCat.setText("â€¢ " + categoria);
                    txtCat.setTextSize(16f);
                    txtCat.setTextColor(Color.BLACK);

                    TextView txtTotal = new TextView(getContext());
                    txtTotal.setText(String.format("%.2f â‚¬", total));
                    txtTotal.setTextSize(14f);
                    txtTotal.setTextColor(Color.DKGRAY);

                    layout.addView(txtCat);
                    layout.addView(txtTotal);

                    card.addView(layout);
                    layoutCategorias.addView(card);
                }
            });
        });
    }



    // ---------------------------------------------------------
    // Mensajes motivadores
    // ---------------------------------------------------------
    private String generarMensaje(int pct) {
        if (pct >= 80) return "Â¡Excelente progreso! ðŸŽ‰";
        if (pct >= 50) return "Vas por buen camino ðŸ‘";
        if (pct >= 20) return "Puedes mejorar ðŸ’¡";
        return "Sin progreso significativo aÃºn âš ï¸";
    }
}

--- FILE: C:\AndroidProjects\HealthyWallet\app\src\main\java\com\example\healthywallet\ui\inicio\PantallaInicio.java ---

package com.example.healthywallet.ui.inicio;

import android.content.Context;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.cardview.widget.CardView;
import androidx.fragment.app.Fragment;
import androidx.navigation.Navigation;

import com.example.healthywallet.R;
import com.example.healthywallet.controller.FormacionControlador;
import com.example.healthywallet.controller.MetaControlador;
import com.example.healthywallet.controller.MovimientosControlador;
import com.example.healthywallet.controller.PresupuestoControlador;
import com.example.healthywallet.database.entities.Meta;
import com.example.healthywallet.database.entities.Presupuesto;

public class PantallaInicio extends Fragment {

    // UI
    private TextView txtBalanceCantidadInicio;
    private TextView txtResumenMovimientosInicio;
    private TextView txtResumenPresupuestosInicio;
    private TextView txtResumenMetasInicio;
    private TextView txtResumenEducacionInicio;

    private CardView cardBalanceGeneral;
    private CardView cardMovimientos, cardPresupuestos, cardMetas, cardEducacion;

    // Controllers
    private MovimientosControlador movimientosControlador;
    private PresupuestoControlador presupuestoControlador;
    private MetaControlador metaControlador;
    private FormacionControlador formacionControlador;

    private int userId;

    @Nullable
    @Override
    public View onCreateView(
            @NonNull LayoutInflater inflater,
            @Nullable ViewGroup container,
            @Nullable Bundle savedInstanceState
    ) {

        View vista = inflater.inflate(R.layout.pantalla_inicio, container, false);

        // Obtener sesiÃ³n
        SharedPreferences prefs = requireContext().getSharedPreferences("session", Context.MODE_PRIVATE);
        userId = prefs.getInt("usuarioId", -1);

        // Controladores
        movimientosControlador = new MovimientosControlador(requireContext());
        presupuestoControlador = new PresupuestoControlador(requireContext());
        metaControlador = new MetaControlador(requireContext());
        formacionControlador = new FormacionControlador(requireContext());

        // UI
        txtBalanceCantidadInicio = vista.findViewById(R.id.txtBalanceCantidadInicio);
        txtResumenMovimientosInicio = vista.findViewById(R.id.txtResumenMovimientosInicio);
        txtResumenPresupuestosInicio = vista.findViewById(R.id.txtResumenPresupuestosInicio);
        txtResumenMetasInicio = vista.findViewById(R.id.txtResumenMetasInicio);
        txtResumenEducacionInicio = vista.findViewById(R.id.txtResumenEducacionInicio);

        cardBalanceGeneral = vista.findViewById(R.id.cardBalanceGeneral);
        cardMovimientos = vista.findViewById(R.id.cardMovimientos);
        cardPresupuestos = vista.findViewById(R.id.cardPresupuestos);
        cardMetas = vista.findViewById(R.id.cardMetas);
        cardEducacion = vista.findViewById(R.id.cardEducacion);

        // NavegaciÃ³n
        cardBalanceGeneral.setOnClickListener(v ->
                Navigation.findNavController(v).navigate(R.id.pantallaBalanceGeneral)
        );

        cardMovimientos.setOnClickListener(v ->
                Navigation.findNavController(v).navigate(R.id.nav_movimientos));

        cardPresupuestos.setOnClickListener(v ->
                Navigation.findNavController(v).navigate(R.id.nav_presupuestos));

        cardMetas.setOnClickListener(v ->
                Navigation.findNavController(v).navigate(R.id.nav_metas));

        cardEducacion.setOnClickListener(v ->
                Navigation.findNavController(v).navigate(R.id.nav_educacion));

        cargarDatos();

        return vista;
    }

    @Override
    public void onResume() {
        super.onResume();
        cargarDatos();
    }

    private void cargarDatos() {

        if (userId == -1) return;

        // -------- MOVIMIENTOS --------
        movimientosControlador.obtenerSumaPorTipo("Ingreso", ingresos ->
                movimientosControlador.obtenerSumaPorTipo("Gasto", gastos -> {

                    double ingresoTotal = ingresos;
                    double gastoTotal = gastos;

                    double balance = ingresoTotal - gastoTotal;

                    requireActivity().runOnUiThread(() -> {
                        txtBalanceCantidadInicio.setText(
                                String.format("%.2f â‚¬", balance)
                        );

                        txtResumenMovimientosInicio.setText(
                                String.format("+%.2f ingresos | -%.2f gastos",
                                        ingresoTotal, gastoTotal)
                        );
                    });

                })
        );

        // -------- PRESUPUESTOS --------
        presupuestoControlador.obtenerTodos(presupuestos -> {

            double totalLimite = 0, totalGasto = 0;

            if (presupuestos != null) {
                for (Presupuesto p : presupuestos) {
                    totalLimite += p.getLimite();
                    totalGasto += p.getGastoActual();
                }
            }

            double finalLimite = totalLimite;
            double finalGasto = totalGasto;

            requireActivity().runOnUiThread(() ->
                    txtResumenPresupuestosInicio.setText(
                            String.format("%.2f â‚¬ gastados / %.2f â‚¬", finalGasto, finalLimite)
                    )
            );
        });

        // -------- METAS --------
        metaControlador.obtenerTodas(metas -> {

            int activas = 0;
            int completadas = 0;

            if (metas != null) {
                for (Meta m : metas) {
                    if (m.getCantidadActual() >= m.getCantidadObjetivo())
                        completadas++;
                    else
                        activas++;
                }
            }

            int a = activas;
            int c = completadas;

            requireActivity().runOnUiThread(() ->
                    txtResumenMetasInicio.setText(
                            String.format("%d activas | %d completadas", a, c)
                    ));
        });

        // =====================================================================================
        //   ðŸŒŸ EDUCACIÃ“N FINANCIERA â€” TEXTO CORREGIDO
        // =====================================================================================
        formacionControlador.contarTodosGlobal(total ->
                formacionControlador.contarCompletadosGlobal(completados ->
                        requireActivity().runOnUiThread(() ->
                                txtResumenEducacionInicio.setText(
                                        String.format("%d de %d mÃ³dulos completados", completados, total)
                                )
                        )
                )
        );
    }
}

--- FILE: C:\AndroidProjects\HealthyWallet\app\src\main\java\com\example\healthywallet\ui\metas\PantallaAgregarAhorro.java ---

package com.example.healthywallet.ui.metas;

import android.content.Context;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.EditText;
import android.widget.ProgressBar;
import android.widget.TextView;
import android.widget.Toast;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.navigation.Navigation;

import com.example.healthywallet.R;
import com.example.healthywallet.controller.MetaControlador;
import com.example.healthywallet.database.entities.Meta;
import com.google.android.material.floatingactionbutton.FloatingActionButton;

public class PantallaAgregarAhorro extends Fragment {

    private TextView txtNombreMeta, txtResumen;
    private ProgressBar barra;
    private EditText inputCantidad;
    private FloatingActionButton btnGuardar;

    private MetaControlador controlador;
    private Meta metaActual;
    private int userId;
    private int metaId;

    @Nullable
    @Override
    public View onCreateView(@NonNull LayoutInflater inflater,
                             @Nullable ViewGroup container,
                             @Nullable Bundle savedInstanceState) {

        View vista = inflater.inflate(R.layout.pantalla_agregar_ahorro, container, false);
        controlador = new MetaControlador(requireContext());

        // obtener usuario logueado
        SharedPreferences prefs = requireContext().getSharedPreferences("session", Context.MODE_PRIVATE);
        userId = prefs.getInt("usuarioId", -1);

        txtNombreMeta = vista.findViewById(R.id.txtNombreMetaAhorro);
        txtResumen = vista.findViewById(R.id.txtResumenAhorro);
        barra = vista.findViewById(R.id.barraMetaAhorro);
        inputCantidad = vista.findViewById(R.id.inputCantidadAhorro);
        btnGuardar = vista.findViewById(R.id.btnGuardarAhorro);

        // obtener id de meta
        Bundle args = getArguments();
        if (args == null || !args.containsKey("metaId")) {
            Toast.makeText(requireContext(), "Error al cargar meta", Toast.LENGTH_SHORT).show();
            Navigation.findNavController(vista).navigateUp();
            return vista;
        }

        metaId = args.getInt("metaId");
        cargarMeta(metaId);

        configurarBotonGuardar(vista);

        return vista;
    }

    private void cargarMeta(int id) {
        controlador.obtenerPorId(id, meta -> {
            requireActivity().runOnUiThread(() -> {

                if (meta == null) {
                    Toast.makeText(requireContext(), "Meta no encontrada", Toast.LENGTH_SHORT).show();
                    Navigation.findNavController(requireView()).navigateUp();
                    return;
                }

                metaActual = meta;

                txtNombreMeta.setText(meta.getNombre());

                txtResumen.setText(String.format("%.2f â‚¬ / %.2f â‚¬",
                        meta.getCantidadActual(),
                        meta.getCantidadObjetivo()));

                double porcentaje = 0;
                if (meta.getCantidadObjetivo() > 0) {
                    porcentaje = (meta.getCantidadActual() / meta.getCantidadObjetivo()) * 100;
                }

                if (porcentaje > 100) porcentaje = 100;

                barra.setProgress((int) porcentaje);
            });
        });
    }

    private void configurarBotonGuardar(View vista) {

        btnGuardar.setOnClickListener(v -> {

            if (metaActual == null) {
                Toast.makeText(requireContext(), "Error: meta no cargada", Toast.LENGTH_SHORT).show();
                return;
            }

            String cantidadStr = inputCantidad.getText().toString().trim();

            if (cantidadStr.isEmpty()) {
                Toast.makeText(requireContext(), "Introduce una cantidad", Toast.LENGTH_SHORT).show();
                return;
            }

            double cantidad;
            try {
                cantidad = Double.parseDouble(cantidadStr);
            } catch (Exception e) {
                Toast.makeText(requireContext(), "Formato invÃ¡lido", Toast.LENGTH_SHORT).show();
                return;
            }

            if (cantidad <= 0) {
                Toast.makeText(requireContext(), "La cantidad debe ser mayor que 0", Toast.LENGTH_SHORT).show();
                return;
            }

            // actualizar meta
            double nuevoTotal = metaActual.getCantidadActual() + cantidad;
            metaActual.setCantidadActual(nuevoTotal);

            controlador.actualizar(metaActual, filas -> {
                requireActivity().runOnUiThread(() -> {

                    if (filas > 0) {
                        Toast.makeText(requireContext(), "Ahorro aÃ±adido", Toast.LENGTH_SHORT).show();
                        Navigation.findNavController(vista).navigateUp();
                    } else {
                        Toast.makeText(requireContext(), "Error al guardar", Toast.LENGTH_SHORT).show();
                    }

                });
            });
        });
    }
}

--- FILE: C:\AndroidProjects\HealthyWallet\app\src\main\java\com\example\healthywallet\ui\metas\PantallaAgregarMeta.java ---

package com.example.healthywallet.ui.metas;

import android.app.DatePickerDialog;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.DatePicker;
import android.widget.EditText;
import android.widget.Toast;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.navigation.Navigation;

import com.example.healthywallet.R;
import com.example.healthywallet.controller.MetaControlador;
import com.example.healthywallet.database.entities.Meta;
import com.google.android.material.floatingactionbutton.FloatingActionButton;

import java.util.Calendar;

public class PantallaAgregarMeta extends Fragment {

    private EditText inputNombreMeta, inputCantidadObjetivo, inputCantidadActual, inputFechaObjetivo;
    private FloatingActionButton btnGuardar;
    private MetaControlador controlador;

    @Nullable
    @Override
    public View onCreateView(@NonNull LayoutInflater inflater,
                             @Nullable ViewGroup container,
                             @Nullable Bundle savedInstanceState) {

        View vista = inflater.inflate(R.layout.pantalla_agregar_meta, container, false);

        controlador = new MetaControlador(requireContext());

        // Referencias UI
        inputNombreMeta = vista.findViewById(R.id.inputNombreMeta);
        inputCantidadObjetivo = vista.findViewById(R.id.inputCantidadObjetivo);
        inputCantidadActual = vista.findViewById(R.id.inputCantidadActual);
        inputFechaObjetivo = vista.findViewById(R.id.inputFechaObjetivo);
        btnGuardar = vista.findViewById(R.id.btnGuardarMeta);

        configurarFecha();
        configurarBotonGuardar();

        return vista;
    }

    private void configurarFecha() {
        inputFechaObjetivo.setOnClickListener(v -> {

            Calendar calendar = Calendar.getInstance();
            int year = calendar.get(Calendar.YEAR);
            int month = calendar.get(Calendar.MONTH);
            int day = calendar.get(Calendar.DAY_OF_MONTH);

            DatePickerDialog dialog = new DatePickerDialog(
                    requireContext(),
                    (DatePicker view, int y, int m, int d) ->
                            inputFechaObjetivo.setText(d + "/" + (m + 1) + "/" + y),
                    year, month, day
            );

            dialog.show();
        });
    }

    private void configurarBotonGuardar() {

        btnGuardar.setOnClickListener(v -> {

            String nombre = inputNombreMeta.getText().toString().trim();
            String objStr = inputCantidadObjetivo.getText().toString().trim();
            String actualStr = inputCantidadActual.getText().toString().trim();
            String fecha = inputFechaObjetivo.getText().toString().trim();

            if (nombre.isEmpty() || objStr.isEmpty() || fecha.isEmpty()) {
                Toast.makeText(requireContext(), "Completa todos los campos obligatorios", Toast.LENGTH_SHORT).show();
                return;
            }

            double objetivo, actual;

            try {
                objetivo = Double.parseDouble(objStr);
                actual = actualStr.isEmpty() ? 0 : Double.parseDouble(actualStr);
            } catch (Exception e) {
                Toast.makeText(requireContext(), "Formato de cantidad invÃ¡lido", Toast.LENGTH_SHORT).show();
                return;
            }

            if (objetivo <= 0) {
                Toast.makeText(requireContext(), "La meta debe tener una cantidad mayor a 0", Toast.LENGTH_SHORT).show();
                return;
            }

            Meta meta = new Meta(nombre, objetivo, actual, fecha, 0);

            controlador.insertar(meta, id -> {
                requireActivity().runOnUiThread(() -> {
                    if (id > 0) {
                        Toast.makeText(requireContext(), "Meta creada", Toast.LENGTH_SHORT).show();
                        Navigation.findNavController(v).navigateUp();
                    } else {
                        Toast.makeText(requireContext(), "Error al guardar", Toast.LENGTH_SHORT).show();
                    }
                });
            });

        });
    }
}

--- FILE: C:\AndroidProjects\HealthyWallet\app\src\main\java\com\example\healthywallet\ui\metas\PantallaDetalleMeta.java ---

package com.example.healthywallet.ui.metas;

import android.content.Context;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.ProgressBar;
import android.widget.TextView;
import android.widget.Toast;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.appcompat.app.AlertDialog;
import androidx.fragment.app.Fragment;
import androidx.navigation.Navigation;

import com.example.healthywallet.R;
import com.example.healthywallet.controller.MetaControlador;
import com.example.healthywallet.database.entities.Meta;

public class PantallaDetalleMeta extends Fragment {

    private TextView txtTitulo, txtCantidades, txtPorcentaje, txtFecha;
    private ProgressBar barra;
    private Button btnAgregarAhorro, btnEliminar;

    private MetaControlador controlador;
    private Meta metaActual;
    private int metaId;
    private int userId;

    @Nullable
    @Override
    public View onCreateView(@NonNull LayoutInflater inflater,
                             @Nullable ViewGroup container,
                             @Nullable Bundle savedInstanceState) {

        View vista = inflater.inflate(R.layout.pantalla_detalle_meta, container, false);

        controlador = new MetaControlador(requireContext());

        // Obtener usuario logueado
        SharedPreferences prefs = requireContext().getSharedPreferences("session", Context.MODE_PRIVATE);
        userId = prefs.getInt("usuarioId", -1);

        txtTitulo = vista.findViewById(R.id.txtTituloMeta);
        txtCantidades = vista.findViewById(R.id.txtCantidadesDetalle);
        txtPorcentaje = vista.findViewById(R.id.txtPorcentajeDetalle);
        txtFecha = vista.findViewById(R.id.txtFechaDetalle);
        barra = vista.findViewById(R.id.barraDetalleMeta);
        btnAgregarAhorro = vista.findViewById(R.id.btnAgregarAhorro);
        btnEliminar = vista.findViewById(R.id.btnEliminarMeta);

        // Obtener argumento
        Bundle args = getArguments();
        if (args == null || !args.containsKey("metaId")) {
            Toast.makeText(requireContext(), "Error al cargar meta", Toast.LENGTH_SHORT).show();
            return vista;
        }

        metaId = args.getInt("metaId");

        cargarMeta();

        btnAgregarAhorro.setOnClickListener(v -> {
            Bundle bundle = new Bundle();
            bundle.putInt("metaId", metaId);
            Navigation.findNavController(v).navigate(R.id.pantallaAgregarAhorro, bundle);
        });

        // CONFIRMAR antes de eliminar
        btnEliminar.setOnClickListener(v -> confirmarEliminar());

        return vista;
    }

    private void cargarMeta() {
        controlador.obtenerPorId(metaId, meta -> requireActivity().runOnUiThread(() -> {

            if (meta == null) {
                Toast.makeText(requireContext(), "Meta no encontrada", Toast.LENGTH_SHORT).show();
                return;
            }

            metaActual = meta;

            txtTitulo.setText(metaActual.getNombre());
            txtCantidades.setText(
                    String.format("%.2f â‚¬ / %.2f â‚¬",
                            metaActual.getCantidadActual(),
                            metaActual.getCantidadObjetivo())
            );

            txtFecha.setText("Fecha objetivo: " + metaActual.getFechaObjetivo());

            double porcentaje = 0;
            if (metaActual.getCantidadObjetivo() > 0)
                porcentaje = (metaActual.getCantidadActual() / metaActual.getCantidadObjetivo()) * 100;

            if (porcentaje > 100) porcentaje = 100;

            txtPorcentaje.setText(String.format("%.0f%%", porcentaje));
            barra.setProgress((int) porcentaje);

            // =============================
            //   POPUP DE META COMPLETADA
            // =============================
            if (porcentaje >= 100) {

                new AlertDialog.Builder(requireContext())
                        .setTitle("ðŸŽ‰ Â¡Meta completada!")
                        .setMessage("Has alcanzado tu objetivo de ahorro.")
                        .setPositiveButton("Aceptar", null)
                        .show();
            }

        }));
    }

    // ======================================
    //     CONFIRMACIÃ“N DE ELIMINAR META
    // ======================================
    private void confirmarEliminar() {

        if (metaActual == null) {
            Toast.makeText(requireContext(), "Meta no cargada", Toast.LENGTH_SHORT).show();
            return;
        }

        new AlertDialog.Builder(requireContext())
                .setTitle("Eliminar meta")
                .setMessage("Â¿EstÃ¡s seguro de que quieres eliminar esta meta?")
                .setPositiveButton("SÃ­", (dialog, which) -> eliminarMeta())
                .setNegativeButton("No", null)
                .show();
    }

    private void eliminarMeta() {

        controlador.eliminar(metaActual, filas -> requireActivity().runOnUiThread(() -> {

            if (filas > 0) {
                Toast.makeText(requireContext(), "Meta eliminada", Toast.LENGTH_SHORT).show();
                Navigation.findNavController(requireView()).navigateUp();
            } else {
                Toast.makeText(requireContext(), "Error al eliminar la meta", Toast.LENGTH_SHORT).show();
            }

        }));
    }
}

--- FILE: C:\AndroidProjects\HealthyWallet\app\src\main\java\com\example\healthywallet\ui\metas\PantallaMetas.java ---

package com.example.healthywallet.ui.metas;

import android.content.Context;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Toast;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.navigation.Navigation;
import androidx.recyclerview.widget.LinearLayoutManager;
import androidx.recyclerview.widget.RecyclerView;

import com.example.healthywallet.R;
import com.example.healthywallet.adapters.AdaptadorMetas;
import com.example.healthywallet.controller.MetaControlador;
import com.example.healthywallet.database.entities.Meta;
import com.google.android.material.floatingactionbutton.FloatingActionButton;

import java.util.ArrayList;
import java.util.List;

public class PantallaMetas extends Fragment {

    private RecyclerView recycler;
    private AdaptadorMetas adaptador;
    private FloatingActionButton fabAgregarMeta;

    private MetaControlador controlador;
    private int userId;

    private final List<Meta> lista = new ArrayList<>();

    @Nullable
    @Override
    public View onCreateView(@NonNull LayoutInflater inflater,
                             @Nullable ViewGroup container,
                             @Nullable Bundle savedInstanceState) {

        View vista = inflater.inflate(R.layout.pantalla_metas, container, false);

        controlador = new MetaControlador(requireContext());

        SharedPreferences prefs = requireContext().getSharedPreferences("session", Context.MODE_PRIVATE);
        userId = prefs.getInt("usuarioId", -1);

        recycler = vista.findViewById(R.id.recyclerMetas);
        fabAgregarMeta = vista.findViewById(R.id.fabAgregarMeta);

        recycler.setLayoutManager(new LinearLayoutManager(getContext()));
        adaptador = new AdaptadorMetas(requireContext(), lista);
        recycler.setAdapter(adaptador);

        // =======================================================
        // AÃ‘ADIMOS LISTENER NORMAL â†’ ABRIR DETALLE DE META
        // =======================================================
        adaptador.setOnMetaClickListener(meta -> {
            Bundle bundle = new Bundle();
            bundle.putInt("metaId", meta.getId());

            Navigation.findNavController(requireView())
                    .navigate(R.id.action_metas_to_detalleMeta, bundle);
        });

        // =======================================================
        // AÃ‘ADIMOS LISTENER META COMPLETADA â†’ POPUP O DETALLE
        // =======================================================
        adaptador.setOnMetaCompletadaListener(meta -> {

            new androidx.appcompat.app.AlertDialog.Builder(requireContext())
                    .setTitle("ðŸŽ‰ Meta completada")
                    .setMessage("Has alcanzado el 100% de esta meta.\nÂ¿Deseas eliminarla?")
                    .setPositiveButton("Eliminar", (dialog, which) -> {

                        // SOLO BORRA SI EL USUARIO LO CONFIRMA
                        controlador.eliminar(meta, filas -> requireActivity().runOnUiThread(() -> {

                            if (filas > 0) {
                                Toast.makeText(requireContext(),
                                        "Meta eliminada", Toast.LENGTH_SHORT).show();
                                cargarMetas(); // refrescar la lista
                            } else {
                                Toast.makeText(requireContext(),
                                        "Error al eliminar la meta", Toast.LENGTH_SHORT).show();
                            }
                        }));

                    })
                    .setNegativeButton("Cancelar", null)
                    .show();
        });

        fabAgregarMeta.setOnClickListener(v ->
                Navigation.findNavController(v).navigate(R.id.action_metas_to_agregarMeta)
        );

        cargarMetas();

        return vista;
    }

    @Override
    public void onResume() {
        super.onResume();
        cargarMetas();
    }

    private void cargarMetas() {
        controlador.obtenerTodas(metas -> {
            requireActivity().runOnUiThread(() -> {
                lista.clear();
                if (metas != null) lista.addAll(metas);
                adaptador.notifyDataSetChanged();
            });
        });
    }

}

--- FILE: C:\AndroidProjects\HealthyWallet\app\src\main\java\com\example\healthywallet\ui\movimientos\PantallaAgregarMovimiento.java ---

package com.example.healthywallet.ui.movimientos;

import android.app.DatePickerDialog;
import android.content.Context;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.DatePicker;
import android.widget.EditText;
import android.widget.Spinner;
import android.widget.Toast;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.navigation.Navigation;

import com.example.healthywallet.R;
import com.example.healthywallet.controller.MovimientosControlador;
import com.example.healthywallet.database.entities.Movimiento;
import com.google.android.material.floatingactionbutton.FloatingActionButton;

import java.util.Calendar;

public class PantallaAgregarMovimiento extends Fragment {

    private EditText inputCantidad, inputFecha, inputDescripcion;
    private Spinner spinnerTipo, spinnerCategoria;
    private FloatingActionButton btnGuardar;

    private MovimientosControlador controlador;

    private final String[] categoriasGasto = {
            "Comida", "Transporte", "EducaciÃ³n", "Ocio", "Hogar", "Salud", "Otros"
    };

    private final String[] categoriasIngreso = {
            "Trabajo", "Beca", "Regalo", "Venta", "Premio", "Extra", "Otros ingresos"
    };

    @Nullable
    @Override
    public View onCreateView(@NonNull LayoutInflater inflater,
                             @Nullable ViewGroup container,
                             @Nullable Bundle savedInstanceState) {

        View vista = inflater.inflate(R.layout.pantalla_agregar_movimiento, container, false);

        controlador = new MovimientosControlador(requireContext());

        // Referencias UI
        inputCantidad = vista.findViewById(R.id.inputCantidad);
        inputFecha = vista.findViewById(R.id.inputFecha);
        inputDescripcion = vista.findViewById(R.id.inputDescripcion);
        spinnerTipo = vista.findViewById(R.id.spinnerTipo);
        spinnerCategoria = vista.findViewById(R.id.spinnerCategoria);
        btnGuardar = vista.findViewById(R.id.btnGuardarMovimiento);

        configurarSpinners();
        configurarCambioCategorias();
        configurarSelectorFecha();
        configurarBotonGuardar();

        return vista;
    }

    private void configurarSpinners() {

        String[] tipos = {"Ingreso", "Gasto"};

        ArrayAdapter<String> adapterTipo = new ArrayAdapter<>(
                requireContext(),
                android.R.layout.simple_spinner_dropdown_item,
                tipos
        );

        spinnerTipo.setAdapter(adapterTipo);

        // Por defecto â†’ categorÃ­as de gasto
        ArrayAdapter<String> adapterCat = new ArrayAdapter<>(
                requireContext(),
                android.R.layout.simple_spinner_dropdown_item,
                categoriasGasto
        );
        spinnerCategoria.setAdapter(adapterCat);
    }

    private void configurarCambioCategorias() {

        spinnerTipo.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
            @Override
            public void onItemSelected(AdapterView<?> parent, View view, int position, long id) {

                String tipo = spinnerTipo.getSelectedItem().toString();

                ArrayAdapter<String> adapter;

                if (tipo.equals("Ingreso")) {
                    adapter = new ArrayAdapter<>(
                            requireContext(),
                            android.R.layout.simple_spinner_dropdown_item,
                            categoriasIngreso
                    );
                } else {
                    adapter = new ArrayAdapter<>(
                            requireContext(),
                            android.R.layout.simple_spinner_dropdown_item,
                            categoriasGasto
                    );
                }

                spinnerCategoria.setAdapter(adapter);
            }

            @Override
            public void onNothingSelected(AdapterView<?> parent) {}
        });
    }

    private void configurarSelectorFecha() {
        inputFecha.setOnClickListener(v -> {

            Calendar calendar = Calendar.getInstance();
            int aÃ±o = calendar.get(Calendar.YEAR);
            int mes = calendar.get(Calendar.MONTH);
            int dia = calendar.get(Calendar.DAY_OF_MONTH);

            DatePickerDialog dialog = new DatePickerDialog(
                    requireContext(),
                    (DatePicker view, int year, int month, int dayOfMonth) -> {
                        String fecha = String.format("%02d/%02d/%04d",
                                dayOfMonth, month + 1, year);
                        inputFecha.setText(fecha);
                    },
                    aÃ±o, mes, dia
            );

            dialog.show();
        });
    }

    private void configurarBotonGuardar() {

        btnGuardar.setOnClickListener(v -> {

            String cantidadStr = inputCantidad.getText().toString().trim();
            String fecha = inputFecha.getText().toString().trim();
            String descripcion = inputDescripcion.getText().toString().trim();

            if (cantidadStr.isEmpty() || fecha.isEmpty()) {
                Toast.makeText(requireContext(),
                        "Rellena cantidad y fecha",
                        Toast.LENGTH_SHORT).show();
                return;
            }

            double cantidad;
            try {
                cantidad = Double.parseDouble(cantidadStr);
            } catch (Exception e) {
                Toast.makeText(requireContext(),
                        "Formato de cantidad invÃ¡lido",
                        Toast.LENGTH_SHORT).show();
                return;
            }

            String tipo = spinnerTipo.getSelectedItem().toString();
            String categoria = spinnerCategoria.getSelectedItem().toString();

            // Obtener ID del usuario logueado
            SharedPreferences prefs = requireContext().getSharedPreferences("session", Context.MODE_PRIVATE);
            int userId = prefs.getInt("usuarioId", -1);

            if (userId == -1) {
                Toast.makeText(requireContext(),
                        "Error: usuario no encontrado",
                        Toast.LENGTH_SHORT).show();
                return;
            }

            Movimiento mov = new Movimiento(
                    tipo,
                    categoria,
                    cantidad,
                    fecha,
                    descripcion,
                    userId   // â† NUEVO
            );

            controlador.insertar(mov, id -> {

                requireActivity().runOnUiThread(() -> {

                    if (id > 0) {
                        Toast.makeText(requireContext(),
                                "Movimiento guardado",
                                Toast.LENGTH_SHORT).show();

                        Navigation.findNavController(v)
                                .navigate(R.id.nav_movimientos);

                    } else {
                        Toast.makeText(requireContext(),
                                "Error al guardar",
                                Toast.LENGTH_SHORT).show();
                    }
                });
            });

        });
    }
}

--- FILE: C:\AndroidProjects\HealthyWallet\app\src\main\java\com\example\healthywallet\ui\movimientos\PantallaMovimientos.java ---

package com.example.healthywallet.ui.movimientos;

import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;
import android.widget.Toast;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.appcompat.app.AlertDialog;
import androidx.fragment.app.Fragment;
import androidx.navigation.Navigation;
import androidx.recyclerview.widget.LinearLayoutManager;
import androidx.recyclerview.widget.RecyclerView;

import com.example.healthywallet.R;
import com.example.healthywallet.adapters.AdaptadorMovimientos;
import com.example.healthywallet.controller.MovimientosControlador;
import com.example.healthywallet.database.entities.Movimiento;
import com.google.android.material.floatingactionbutton.FloatingActionButton;

import java.util.Collections;
import java.util.List;

public class PantallaMovimientos extends Fragment {

    private RecyclerView recyclerView;
    private FloatingActionButton fabAgregarMovimiento;
    private TextView txtBalanceMensual;

    private MovimientosControlador movimientosControlador;
    private AdaptadorMovimientos adaptador;

    @Nullable
    @Override
    public View onCreateView(@NonNull LayoutInflater inflater,
                             @Nullable ViewGroup container,
                             @Nullable Bundle savedInstanceState) {

        View vista = inflater.inflate(R.layout.pantalla_movimientos, container, false);

        movimientosControlador = new MovimientosControlador(requireContext());

        recyclerView = vista.findViewById(R.id.recyclerMovimientos);
        fabAgregarMovimiento = vista.findViewById(R.id.fabAgregarMovimiento);
        txtBalanceMensual = vista.findViewById(R.id.txtBalanceCantidad);

        recyclerView.setLayoutManager(new LinearLayoutManager(getContext()));

        fabAgregarMovimiento.setOnClickListener(v ->
                Navigation.findNavController(v).navigate(R.id.fragmentoAgregarMovimiento)
        );

        cargarLista();
        return vista;
    }

    @Override
    public void onResume() {
        super.onResume();
        cargarLista();
    }

    private void cargarLista() {

        movimientosControlador.obtenerTodos(lista -> {

            requireActivity().runOnUiThread(() -> {

                List<Movimiento> movimientos =
                        (lista != null) ? lista : Collections.emptyList();

                if (adaptador == null) {
                    adaptador = new AdaptadorMovimientos(requireContext(), movimientos);
                    recyclerView.setAdapter(adaptador);

                    // ==========================================================
                    //      AÃ‘ADIR LISTENER DE PULSACIÃ“N LARGA  (NUEVO)
                    // ==========================================================
                    adaptador.setOnMovimientoLongClickListener(mov -> {

                        new AlertDialog.Builder(requireContext())
                                .setTitle("Eliminar movimiento")
                                .setMessage("Â¿Seguro que deseas eliminar este movimiento?")
                                .setPositiveButton("Eliminar", (dialog, which) -> {

                                    movimientosControlador.eliminar(mov, filas ->
                                            requireActivity().runOnUiThread(() -> {

                                                if (filas > 0) {
                                                    Toast.makeText(requireContext(),
                                                            "Movimiento eliminado", Toast.LENGTH_SHORT).show();
                                                    cargarLista();
                                                } else {
                                                    Toast.makeText(requireContext(),
                                                            "Error al eliminar el movimiento", Toast.LENGTH_SHORT).show();
                                                }
                                            })
                                    );

                                })
                                .setNegativeButton("Cancelar", null)
                                .show();
                    });
                    // ==========================================================

                } else {
                    adaptador.actualizarLista(movimientos);
                }

                actualizarBalance(movimientos);
            });
        });
    }

    private void actualizarBalance(List<Movimiento> lista) {

        double total = 0;

        for (Movimiento mov : lista) {
            if ("Ingreso".equals(mov.getTipo())) {
                total += mov.getCantidad();
            } else {
                total -= mov.getCantidad();
            }
        }

        txtBalanceMensual.setText(String.format("%.2f â‚¬", total));
    }
}

--- FILE: C:\AndroidProjects\HealthyWallet\app\src\main\java\com\example\healthywallet\ui\presupuestos\PantallaAgregarPresupuesto.java ---

package com.example.healthywallet.ui.presupuestos;

import android.content.Context;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Spinner;
import android.widget.Toast;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.navigation.Navigation;

import com.example.healthywallet.R;
import com.example.healthywallet.controller.PresupuestoControlador;
import com.example.healthywallet.database.entities.Presupuesto;

public class PantallaAgregarPresupuesto extends Fragment {

    private Spinner spinnerCategoria;
    private EditText inputLimite;
    private Button btnGuardar;

    private PresupuestoControlador controlador;

    public PantallaAgregarPresupuesto() { }

    @Nullable
    @Override
    public View onCreateView(@NonNull LayoutInflater inflater,
                             @Nullable ViewGroup container,
                             @Nullable Bundle savedInstanceState) {

        View vista = inflater.inflate(R.layout.pantalla_agregar_presupuesto, container, false);

        controlador = new PresupuestoControlador(requireContext());

        spinnerCategoria = vista.findViewById(R.id.spinnerCategoriaPresupuesto);
        inputLimite = vista.findViewById(R.id.inputLimite);
        btnGuardar = vista.findViewById(R.id.btnGuardarPresupuesto);

        configurarSpinner();
        configurarBotonGuardar(vista);

        return vista;
    }

    private void configurarSpinner() {
        String[] categorias = {"Comida", "Transporte", "EducaciÃ³n", "Ocio", "Hogar", "Otros"};

        ArrayAdapter<String> adapter = new ArrayAdapter<>(
                requireContext(),
                android.R.layout.simple_spinner_dropdown_item,
                categorias
        );

        spinnerCategoria.setAdapter(adapter);
    }

    private void configurarBotonGuardar(View vista) {
        btnGuardar.setOnClickListener(v -> {

            // ValidaciÃ³n bÃ¡sica
            String limiteStr = inputLimite.getText().toString().trim();
            if (limiteStr.isEmpty()) {
                Toast.makeText(requireContext(), "Introduce un lÃ­mite vÃ¡lido", Toast.LENGTH_SHORT).show();
                return;
            }

            double limite;
            try {
                limite = Double.parseDouble(limiteStr);
            } catch (Exception e) {
                Toast.makeText(requireContext(), "Formato de cantidad incorrecto", Toast.LENGTH_SHORT).show();
                return;
            }

            String categoria = spinnerCategoria.getSelectedItem().toString();

            // Obtener ID del usuario logueado
            SharedPreferences prefs = requireContext()
                    .getSharedPreferences("session", Context.MODE_PRIVATE);
            int userId = prefs.getInt("usuarioId", -1);

            if (userId == -1) {
                Toast.makeText(requireContext(),
                        "Error: usuario no identificado", Toast.LENGTH_SHORT).show();
                return;
            }

            // Crear presupuesto con userId
            Presupuesto nuevo = new Presupuesto(categoria, limite, 0, userId);

            controlador.insertar(nuevo, id -> {
                requireActivity().runOnUiThread(() -> {
                    Toast.makeText(requireContext(),
                            "Presupuesto creado", Toast.LENGTH_SHORT).show();
                    Navigation.findNavController(vista).popBackStack();
                });
            });
        });
    }
}

--- FILE: C:\AndroidProjects\HealthyWallet\app\src\main\java\com\example\healthywallet\ui\presupuestos\PantallaEditarPresupuesto.java ---

package com.example.healthywallet.ui.presupuestos;

import android.os.Bundle;
import android.text.TextUtils;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.navigation.Navigation;

import com.example.healthywallet.R;
import com.example.healthywallet.controller.PresupuestoControlador;
import com.example.healthywallet.database.entities.Presupuesto;

public class PantallaEditarPresupuesto extends Fragment {

    private EditText edtNombre, edtLimite;
    private Button btnGuardar;

    private PresupuestoControlador controlador;
    private Presupuesto presupuestoActual;
    private int presupuestoId;

    @Nullable
    @Override
    public View onCreateView(@NonNull LayoutInflater inflater,
                             @Nullable ViewGroup container,
                             @Nullable Bundle savedInstanceState) {

        View vista = inflater.inflate(R.layout.pantalla_editar_presupuesto, container, false);

        edtNombre = vista.findViewById(R.id.edtNombreEditarPresupuesto);
        edtLimite = vista.findViewById(R.id.edtLimiteEditarPresupuesto);
        btnGuardar = vista.findViewById(R.id.btnGuardarCambiosPresupuesto);

        controlador = new PresupuestoControlador(requireContext());

        // --- Recibir ID del presupuesto ---
        Bundle args = getArguments();
        if (args == null || !args.containsKey("presupuestoId")) {
            Toast.makeText(requireContext(), "Error: presupuesto no encontrado", Toast.LENGTH_SHORT).show();
            return vista;
        }

        presupuestoId = args.getInt("presupuestoId");

        cargarPresupuesto(); // carga inicial

        btnGuardar.setOnClickListener(v -> guardarCambios());

        return vista;
    }

    private void cargarPresupuesto() {

        controlador.obtenerPorId(presupuestoId, presupuesto ->
                requireActivity().runOnUiThread(() -> {

                    if (presupuesto == null) {
                        Toast.makeText(requireContext(), "No se pudo cargar el presupuesto", Toast.LENGTH_SHORT).show();
                        return;
                    }

                    presupuestoActual = presupuesto;

                    // Mostrar datos en los campos
                    edtNombre.setText(presupuesto.getCategoria());
                    edtLimite.setText(String.valueOf(presupuesto.getLimite()));
                })
        );
    }

    private void guardarCambios() {

        String nuevoNombre = edtNombre.getText().toString().trim();
        String nuevoLimiteStr = edtLimite.getText().toString().trim();

        // ValidaciÃ³n
        if (TextUtils.isEmpty(nuevoNombre)) {
            edtNombre.setError("Introduce un nombre");
            return;
        }

        if (TextUtils.isEmpty(nuevoLimiteStr)) {
            edtLimite.setError("Introduce un lÃ­mite");
            return;
        }

        double nuevoLimite;

        try {
            nuevoLimite = Double.parseDouble(nuevoLimiteStr);
        } catch (NumberFormatException e) {
            edtLimite.setError("Cantidad no vÃ¡lida");
            return;
        }

        // Actualizar objeto
        presupuestoActual.setCategoria(nuevoNombre);
        presupuestoActual.setLimite(nuevoLimite);

        // Guardar en BD
        controlador.actualizar(presupuestoActual, filas ->
                requireActivity().runOnUiThread(() -> {

                    if (filas > 0) {
                        Toast.makeText(requireContext(), "Presupuesto actualizado", Toast.LENGTH_SHORT).show();
                        Navigation.findNavController(requireView()).navigateUp();
                    } else {
                        Toast.makeText(requireContext(), "Error al actualizar", Toast.LENGTH_SHORT).show();
                    }

                })
        );
    }
}

--- FILE: C:\AndroidProjects\HealthyWallet\app\src\main\java\com\example\healthywallet\ui\presupuestos\PantallaPresupuestos.java ---

package com.example.healthywallet.ui.presupuestos;

import android.content.Context;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ProgressBar;
import android.widget.TextView;
import android.widget.Toast;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.appcompat.app.AlertDialog;
import androidx.fragment.app.Fragment;
import androidx.navigation.Navigation;
import androidx.recyclerview.widget.LinearLayoutManager;
import androidx.recyclerview.widget.RecyclerView;

import com.example.healthywallet.R;
import com.example.healthywallet.adapters.AdaptadorPresupuestos;
import com.example.healthywallet.controller.MovimientosControlador;
import com.example.healthywallet.controller.PresupuestoControlador;
import com.example.healthywallet.database.entities.Movimiento;
import com.example.healthywallet.database.entities.Presupuesto;
import com.google.android.material.floatingactionbutton.FloatingActionButton;

import java.util.ArrayList;
import java.util.List;

public class PantallaPresupuestos extends Fragment {

    private RecyclerView recycler;
    private AdaptadorPresupuestos adaptador;
    private FloatingActionButton fabAgregar;
    private TextView txtResumen;
    private ProgressBar barraProgreso;

    private final List<Presupuesto> lista = new ArrayList<>();

    private PresupuestoControlador controlador;
    private MovimientosControlador movControlador;

    private int userId;

    public PantallaPresupuestos() {}

    @Nullable
    @Override
    public View onCreateView(@NonNull LayoutInflater inflater,
                             @Nullable ViewGroup container,
                             @Nullable Bundle savedInstanceState) {

        View vista = inflater.inflate(R.layout.pantalla_presupuestos, container, false);

        controlador = new PresupuestoControlador(requireContext());
        movControlador = new MovimientosControlador(requireContext());

        SharedPreferences prefs = requireContext()
                .getSharedPreferences("session", Context.MODE_PRIVATE);
        userId = prefs.getInt("usuarioId", -1);

        recycler = vista.findViewById(R.id.recyclerPresupuestos);
        fabAgregar = vista.findViewById(R.id.fabAgregarPresupuesto);
        txtResumen = vista.findViewById(R.id.txtResumenPresupuesto);
        barraProgreso = vista.findViewById(R.id.progresoGeneralPresupuesto);

        recycler.setLayoutManager(new LinearLayoutManager(getContext()));
        adaptador = new AdaptadorPresupuestos(getContext(), lista);
        recycler.setAdapter(adaptador);

        // ======================================================
        //  NUEVO: PULSACIÃ“N LARGA â†’ MENÃš EDITAR / ELIMINAR
        // ======================================================
        adaptador.setOnPresupuestoLongClickListener(presupuesto -> {

            new AlertDialog.Builder(requireContext())
                    .setTitle("Opciones")
                    .setItems(new CharSequence[]{"Editar", "Eliminar"}, (dialog, which) -> {

                        if (which == 0) {
                            // EDITAR
                            Bundle bundle = new Bundle();
                            bundle.putInt("presupuestoId", presupuesto.getId());

                            Navigation.findNavController(requireView())
                                    .navigate(R.id.action_presupuestos_to_editarPresupuesto, bundle);

                        } else if (which == 1) {
                            // ELIMINAR
                            controlador.eliminar(presupuesto, filas ->
                                    requireActivity().runOnUiThread(() -> {

                                        if (filas > 0) {
                                            Toast.makeText(requireContext(),
                                                    "Presupuesto eliminado", Toast.LENGTH_SHORT).show();
                                            cargarPresupuestos();
                                        } else {
                                            Toast.makeText(requireContext(),
                                                    "Error al eliminar presupuesto", Toast.LENGTH_SHORT).show();
                                        }

                                    }));
                        }

                    })
                    .show();
        });
        // ======================================================

        fabAgregar.setOnClickListener(v ->
                Navigation.findNavController(v)
                        .navigate(R.id.action_presupuestos_to_agregarPresupuesto)
        );

        cargarPresupuestos();
        return vista;
    }

    @Override
    public void onResume() {
        super.onResume();
        cargarPresupuestos();
    }

    private void cargarPresupuestos() {

        controlador.obtenerTodos(listaPresupuestos -> {

            requireActivity().runOnUiThread(() -> {

                lista.clear();

                if (listaPresupuestos != null)
                    lista.addAll(listaPresupuestos);

                recalcularGastosPresupuestos();
            });
        });
    }

    private void recalcularGastosPresupuestos() {

        movControlador.obtenerTodos(movimientos -> {

            requireActivity().runOnUiThread(() -> {

                for (Presupuesto p : lista) {

                    double suma = 0;

                    for (Movimiento m : movimientos) {

                        if (m.getUserId() == p.getUserId() &&
                                m.getCategoria().equalsIgnoreCase(p.getCategoria()) &&
                                m.getTipo().equalsIgnoreCase("Gasto")) {

                            suma += m.getCantidad();
                        }
                    }

                    p.setGastoActual(suma);
                    controlador.actualizar(p, filas -> {});
                }

                adaptador.notifyDataSetChanged();
                actualizarResumen();
            });
        });
    }

    private void actualizarResumen() {

        double totalLimite = 0;
        double totalGasto = 0;

        for (Presupuesto p : lista) {
            totalLimite += p.getLimite();
            totalGasto += p.getGastoActual();
        }

        txtResumen.setText(String.format("%.2f â‚¬ gastados de %.2f â‚¬", totalGasto, totalLimite));

        barraProgreso.setMax((int) totalLimite);
        barraProgreso.setProgress((int) totalGasto);
    }
}

--- FILE: C:\AndroidProjects\HealthyWallet\app\src\main\java\com\example\healthywallet\ui\usuario\PantallaLogin.java ---

package com.example.healthywallet.ui.usuario;

import android.content.Context;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.util.Patterns;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.navigation.fragment.NavHostFragment;

import com.example.healthywallet.R;
import com.example.healthywallet.controller.UsuarioControlador;
import com.example.healthywallet.database.entities.Usuario;

public class PantallaLogin extends Fragment {

    private EditText etEmail, etPass;
    private Button btnLogin;
    private TextView tvIrRegistro;
    private UsuarioControlador controlador;

    @Nullable
    @Override
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.pantalla_login, container, false);

        etEmail = v.findViewById(R.id.etEmailLogin);
        etPass = v.findViewById(R.id.etPasswordLogin);
        btnLogin = v.findViewById(R.id.btnLogin);
        tvIrRegistro = v.findViewById(R.id.tvIrRegistro);

        controlador = new UsuarioControlador(requireContext());

        // âŒ YA NO AUTO-INICIA SESIÃ“N
        // SIEMPRE MOSTRAR LOGIN

        btnLogin.setOnClickListener(view -> login());

        tvIrRegistro.setOnClickListener(view ->
                NavHostFragment.findNavController(PantallaLogin.this)
                        .navigate(R.id.action_pantallaLogin_to_pantallaRegistroUsuario)
        );

        return v;
    }

    private void login() {
        String email = etEmail.getText().toString().trim();
        String pass = etPass.getText().toString().trim();

        // VALIDACIONES
        if (email.isEmpty() || pass.isEmpty()) {
            mostrar("Rellena todos los campos");
            return;
        }

        if (!Patterns.EMAIL_ADDRESS.matcher(email).matches()) {
            mostrar("El correo no es vÃ¡lido");
            return;
        }

        if (pass.length() < 6) {
            mostrar("La contraseÃ±a debe tener mÃ­nimo 6 caracteres");
            return;
        }

        // Loading visual
        mostrarCargando(true);

        controlador.login(email, pass, usuario -> {

            requireActivity().runOnUiThread(() -> {
                mostrarCargando(false);

                if (usuario != null) {
                    guardarSesion(usuario);
                    irAInicio();
                } else {
                    mostrar("Credenciales incorrectas");
                }
            });

        });
    }

    private void guardarSesion(Usuario usuario) {
        SharedPreferences prefs = requireContext().getSharedPreferences("session", Context.MODE_PRIVATE);
        prefs.edit()
                .putBoolean("logueado", true)
                .putInt("usuarioId", usuario.getId())
                .apply();
    }

    private void irAInicio() {
        NavHostFragment.findNavController(this)
                .navigate(R.id.nav_inicio);
    }

    private void mostrar(String msg) {
        Toast.makeText(getContext(), msg, Toast.LENGTH_SHORT).show();
    }

    private void mostrarCargando(boolean cargando) {
        if (cargando) {
            btnLogin.setEnabled(false);
            btnLogin.setText("Cargando...");
        } else {
            btnLogin.setEnabled(true);
            btnLogin.setText("ENTRAR");
        }
    }
}

--- FILE: C:\AndroidProjects\HealthyWallet\app\src\main\java\com\example\healthywallet\ui\usuario\PantallaRegistroUsuario.java ---

package com.example.healthywallet.ui.usuario;

import android.os.Bundle;
import android.util.Patterns;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

import androidx.annotation.NonNull;
import androidx.annotation.Nullable;
import androidx.fragment.app.Fragment;
import androidx.navigation.fragment.NavHostFragment;

import com.example.healthywallet.R;
import com.example.healthywallet.controller.UsuarioControlador;
import com.example.healthywallet.database.entities.Usuario;

public class PantallaRegistroUsuario extends Fragment {

    private EditText etNombre, etEmail, etPass, etPass2;
    private Button btnRegistrar;
    private TextView tvIrLogin;
    private UsuarioControlador controlador;

    @Nullable
    @Override
    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.pantalla_registro, container, false);

        etNombre = v.findViewById(R.id.etNombreRegistro);
        etEmail = v.findViewById(R.id.etEmailRegistro);
        etPass = v.findViewById(R.id.etPassRegistro);
        etPass2 = v.findViewById(R.id.etPassConfirmarRegistro);
        btnRegistrar = v.findViewById(R.id.btnRegistrar);
        tvIrLogin = v.findViewById(R.id.tvIrLogin);

        controlador = new UsuarioControlador(requireContext());

        btnRegistrar.setOnClickListener(view -> registrarUsuario());

        tvIrLogin.setOnClickListener(view ->
                NavHostFragment.findNavController(PantallaRegistroUsuario.this)
                        .navigate(R.id.action_pantallaRegistroUsuario_to_pantallaLogin)
        );

        return v;
    }

    private void registrarUsuario() {
        String nombre = etNombre.getText().toString().trim();
        String email = etEmail.getText().toString().trim();
        String pass = etPass.getText().toString().trim();
        String pass2 = etPass2.getText().toString().trim();

        // VALIDACIONES
        if (nombre.isEmpty() || email.isEmpty() || pass.isEmpty() || pass2.isEmpty()) {
            mostrar("Rellena todos los campos");
            return;
        }

        if (!Patterns.EMAIL_ADDRESS.matcher(email).matches()) {
            mostrar("Correo no vÃ¡lido");
            return;
        }

        if (pass.length() < 6) {
            mostrar("La contraseÃ±a debe tener al menos 6 caracteres");
            return;
        }

        if (!pass.equals(pass2)) {
            mostrar("Las contraseÃ±as no coinciden");
            return;
        }

        Usuario nuevo = new Usuario();
        nuevo.setNombre(nombre);
        nuevo.setEmail(email);
        nuevo.setPassword(pass);

        btnRegistrar.setEnabled(false);
        btnRegistrar.setText("Creando cuenta...");

        controlador.registrar(nuevo, resultado -> {
            requireActivity().runOnUiThread(() -> {

                btnRegistrar.setEnabled(true);
                btnRegistrar.setText("REGISTRARSE");

                if (!resultado) {
                    mostrar("El correo ya estÃ¡ registrado");
                    return;
                }

                mostrar("Cuenta creada correctamente. Inicia sesiÃ³n.");

                // IR A LOGIN
                NavHostFragment.findNavController(PantallaRegistroUsuario.this)
                        .navigate(R.id.action_pantallaRegistroUsuario_to_pantallaLogin);
            });
        });
    }

    private void mostrar(String msg) {
        Toast.makeText(getContext(), msg, Toast.LENGTH_SHORT).show();
    }
}

--- FILE: C:\AndroidProjects\HealthyWallet\app\src\main\java\com\example\healthywallet\ui\MainActivity.java ---

package com.example.healthywallet.ui;

import androidx.appcompat.app.AppCompatActivity;
import androidx.appcompat.app.AppCompatDelegate;
import androidx.navigation.NavController;
import androidx.navigation.fragment.NavHostFragment;
import androidx.navigation.ui.NavigationUI;

import android.os.Bundle;
import android.view.View;

import com.example.healthywallet.R;
import com.google.android.material.bottomnavigation.BottomNavigationView;

public class MainActivity extends AppCompatActivity {

    private BottomNavigationView bottomNav;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        AppCompatDelegate.setDefaultNightMode(AppCompatDelegate.MODE_NIGHT_NO);

        // Obtiene el NavHostFragment
        NavHostFragment navHostFragment =
                (NavHostFragment) getSupportFragmentManager()
                        .findFragmentById(R.id.contenedorFragments);

        if (navHostFragment == null) {
            throw new IllegalStateException("El contenedor de navegaciÃ³n no estÃ¡ disponible en el layout");
        }

        NavController navController = navHostFragment.getNavController();

        // Bottom Navigation
        bottomNav = findViewById(R.id.bottomNavigation);
        NavigationUI.setupWithNavController(bottomNav, navController);

        // ESCONDER O MOSTRAR NAV SEGÃšN LA PANTALLA
        navController.addOnDestinationChangedListener((controller, destination, arguments) -> {
            int id = destination.getId();

            if (id == R.id.pantallaLogin || id == R.id.pantallaRegistroUsuario) {
                ocultarBottomNav();
            } else {
                mostrarBottomNav();
            }
        });
    }

    private void ocultarBottomNav() {
        if (bottomNav != null) bottomNav.setVisibility(View.GONE);
    }

    private void mostrarBottomNav() {
        if (bottomNav != null) bottomNav.setVisibility(View.VISIBLE);
    }
}

--- FILE: C:\AndroidProjects\HealthyWallet\app\src\main\java\com\example\healthywallet\utils\UtilidadesFecha.java ---

package com.example.healthywallet.utils;

public class UtilidadesFecha {
}

--- FILE: C:\AndroidProjects\HealthyWallet\app\src\main\java\com\example\healthywallet\utils\UtilidadesMoneda.java ---

package com.example.healthywallet.utils;

public class UtilidadesMoneda {
}

--- FILE: C:\AndroidProjects\HealthyWallet\app\src\main\java\com\example\healthywallet\utils\Validaciones.java ---

package com.example.healthywallet.utils;

public class Validaciones {
}

===== LAYOUTS =====


--- LAYOUT: C:\AndroidProjects\HealthyWallet\app\src\main\res\layout\activity_main.xml ---

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:orientation="vertical"
    android:background="@color/fondo_app"
    android:padding="0dp"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <!-- CONTENEDOR DE FRAGMENTS -->
    <androidx.fragment.app.FragmentContainerView
        android:id="@+id/contenedorFragments"
        android:name="androidx.navigation.fragment.NavHostFragment"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        app:defaultNavHost="true"
        app:navGraph="@navigation/nav_graph" />

    <!-- SEPARADOR ELEGANTE -->
    <View
        android:layout_width="match_parent"
        android:layout_height="1dp"
        android:background="@color/separador_suave" />

    <!-- BOTTOM NAVIGATION MEJORADO -->
    <com.google.android.material.bottomnavigation.BottomNavigationView
        android:id="@+id/bottomNavigation"
        android:layout_width="match_parent"
        android:layout_height="70dp"
        android:background="@color/nav_fondo"
        android:elevation="10dp"
        app:itemIconTint="@color/nav_selector"
        app:itemTextColor="@color/nav_selector"
        app:labelVisibilityMode="labeled"
        app:menu="@menu/bottom_nav_menu" />

</LinearLayout>

--- LAYOUT: C:\AndroidProjects\HealthyWallet\app\src\main\res\layout\item_categoria.xml ---

<?xml version="1.0" encoding="utf-8"?>
<androidx.cardview.widget.CardView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:card="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="12dp"
    card:cardCornerRadius="14dp"
    card:cardElevation="5dp">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:padding="16dp">

        <TextView
            android:id="@+id/txtNombreCategoria"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Nombre categorÃ­a"
            android:textSize="18sp"
            android:textStyle="bold"/>

        <TextView
            android:id="@+id/txtDescripcionCategoria"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="DescripciÃ³n"
            android:layout_marginTop="4dp"
            android:textSize="15sp"/>

    </LinearLayout>

</androidx.cardview.widget.CardView>

--- LAYOUT: C:\AndroidProjects\HealthyWallet\app\src\main\res\layout\item_formacion.xml ---

<?xml version="1.0" encoding="utf-8"?>
<androidx.cardview.widget.CardView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:card="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="12dp"
    card:cardCornerRadius="14dp"
    card:cardElevation="5dp">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:padding="16dp">

        <TextView
            android:id="@+id/txtTituloFormacion"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TÃ­tulo"
            android:textSize="18sp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/txtNivelFormacion"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Nivel"
            android:layout_marginTop="4dp"
            android:textSize="15sp" />

        <TextView
            android:id="@+id/txtDescripcionFormacion"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="DescripciÃ³n"
            android:layout_marginTop="6dp"
            android:textSize="14sp" />

    </LinearLayout>

</androidx.cardview.widget.CardView>

--- LAYOUT: C:\AndroidProjects\HealthyWallet\app\src\main\res\layout\item_meta.xml ---

<?xml version="1.0" encoding="utf-8"?>
<androidx.cardview.widget.CardView
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:id="@+id/cardViewMeta"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginVertical="10dp"
    android:layout_marginHorizontal="4dp"
    app:cardCornerRadius="16dp"
    app:cardElevation="5dp"
    android:backgroundTint="#FFFFFF">

    <LinearLayout
        android:orientation="vertical"
        android:padding="18dp"
        android:layout_width="match_parent"
        android:layout_height="wrap_content">

        <!-- NOMBRE Y PORCENTAJE -->
        <LinearLayout
            android:orientation="horizontal"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="center_vertical">

            <!-- Nombre -->
            <TextView
                android:id="@+id/txtNombreMeta"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="Nombre Meta"
                android:textSize="20sp"
                android:textStyle="bold"
                android:textColor="#333333"/>

            <!-- Porcentaje -->
            <TextView
                android:id="@+id/txtPorcentajeMeta"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="40%"
                android:textSize="18sp"
                android:textStyle="bold"
                android:textColor="#4CAF50"/>
        </LinearLayout>

        <!-- Cantidades -->
        <TextView
            android:id="@+id/txtCantidadesMeta"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="400 â‚¬ / 1000 â‚¬"
            android:textSize="14sp"
            android:textColor="#777777"
            android:layout_marginTop="6dp"/>

        <!-- Barra de progreso -->
        <ProgressBar
            android:id="@+id/barraProgresoMeta"
            style="@android:style/Widget.ProgressBar.Horizontal"
            android:layout_width="match_parent"
            android:layout_height="10dp"
            android:progress="40"
            android:max="100"
            android:progressDrawable="@drawable/progress_meta_estilo"
            android:layout_marginTop="12dp"/>

        <!-- Fecha objetivo -->
        <TextView
            android:id="@+id/txtFechaMeta"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Fecha objetivo: 12/07/2025"
            android:textSize="13sp"
            android:textColor="#999999"
            android:layout_marginTop="10dp"/>
    </LinearLayout>

</androidx.cardview.widget.CardView>

--- LAYOUT: C:\AndroidProjects\HealthyWallet\app\src\main\res\layout\item_movimiento.xml ---

<?xml version="1.0" encoding="utf-8"?>
<androidx.cardview.widget.CardView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:card="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="12dp"
    card:cardCornerRadius="14dp"
    card:cardElevation="5dp">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:padding="16dp">

        <TextView
            android:id="@+id/txtTipoMovimiento"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Ingreso"
            android:textSize="18sp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/txtCategoriaMovimiento"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="CategorÃ­a"
            android:layout_marginTop="4dp"
            android:textSize="16sp" />

        <TextView
            android:id="@+id/txtCantidadMovimiento"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="0 â‚¬"
            android:layout_marginTop="4dp"
            android:textSize="16sp" />

        <TextView
            android:id="@+id/txtFechaMovimiento"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="01/01/2025"
            android:layout_marginTop="4dp"
            android:textSize="14sp" />

    </LinearLayout>

</androidx.cardview.widget.CardView>

--- LAYOUT: C:\AndroidProjects\HealthyWallet\app\src\main\res\layout\item_presupuesto.xml ---

<?xml version="1.0" encoding="utf-8"?>
<androidx.cardview.widget.CardView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:card="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginBottom="12dp"
    card:cardCornerRadius="14dp"
    card:cardElevation="5dp">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:padding="16dp">

        <TextView
            android:id="@+id/txtCategoriaPresupuesto"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="CategorÃ­a"
            android:textSize="18sp"
            android:textStyle="bold"/>

        <TextView
            android:id="@+id/txtLimitePresupuesto"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="LÃ­mite: 0 â‚¬"
            android:layout_marginTop="4dp"
            android:textSize="16sp"/>

        <TextView
            android:id="@+id/txtGastoActualPresupuesto"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Gastado: 0 â‚¬"
            android:layout_marginTop="4dp"
            android:textSize="16sp"/>

    </LinearLayout>

</androidx.cardview.widget.CardView>

--- LAYOUT: C:\AndroidProjects\HealthyWallet\app\src\main\res\layout\item_video.xml ---

<?xml version="1.0" encoding="utf-8"?>
<com.google.android.material.card.MaterialCardView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="10dp"
    android:layout_marginBottom="6dp"
    app:cardCornerRadius="14dp"
    app:cardElevation="4dp"
    android:foreground="?attr/selectableItemBackground">

    <androidx.constraintlayout.widget.ConstraintLayout
        android:padding="14dp"
        android:layout_width="match_parent"
        android:layout_height="wrap_content">

        <!-- ICONO DE VIDEO -->
        <ImageView
            android:id="@+id/iconVideo"
            android:layout_width="32dp"
            android:layout_height="32dp"
            android:src="@drawable/ic_video"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintTop_toTopOf="parent"
            app:layout_constraintBottom_toBottomOf="parent"
            app:tint="#4CAF50" />

        <!-- TÃTULO -->
        <TextView
            android:id="@+id/txtTituloVideo"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:text="TÃ­tulo del video"
            android:textStyle="bold"
            android:textSize="16sp"
            android:textColor="#212121"
            android:layout_marginStart="12dp"
            app:layout_constraintStart_toEndOf="@id/iconVideo"
            app:layout_constraintTop_toTopOf="parent"
            app:layout_constraintEnd_toStartOf="@id/checkCompletado"
            app:layout_constraintHorizontal_bias="0"/>

        <!-- ESTADO: COMPLETADO / PENDIENTE -->
        <TextView
            android:id="@+id/txtEstadoVideo"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:text="Pendiente"
            android:textSize="14sp"
            android:textColor="#777"
            android:layout_marginStart="12dp"
            android:layout_marginTop="4dp"
            app:layout_constraintStart_toEndOf="@id/iconVideo"
            app:layout_constraintTop_toBottomOf="@id/txtTituloVideo"
            app:layout_constraintEnd_toStartOf="@id/checkCompletado" />

        <!-- CHECKBOX MARCAR COMPLETADO -->
        <CheckBox
            android:id="@+id/checkCompletado"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:buttonTint="#4CAF50"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintTop_toTopOf="parent"
            app:layout_constraintBottom_toBottomOf="parent"/>

    </androidx.constraintlayout.widget.ConstraintLayout>

</com.google.android.material.card.MaterialCardView>

--- LAYOUT: C:\AndroidProjects\HealthyWallet\app\src\main\res\layout\pantalla_agregar_ahorro.xml ---

<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#F5F5F5">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:padding="22dp">

        <!-- HEADER -->
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="center_vertical"
            android:orientation="horizontal">

            <ImageView
                android:layout_width="32dp"
                android:layout_height="32dp"
                android:src="@drawable/ic_metas"
                app:tint="#4CAF50" />

            <TextView
                android:id="@+id/txtTituloAhorro"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="AÃ±adir ahorro"
                android:textSize="26sp"
                android:textStyle="bold"
                android:textColor="#333333"
                android:layout_marginStart="12dp"/>
        </LinearLayout>

        <!-- TARJETA META -->
        <androidx.cardview.widget.CardView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:backgroundTint="#FFFFFF"
            android:layout_marginTop="24dp"
            app:cardElevation="5dp"
            app:cardCornerRadius="18dp">

            <LinearLayout
                android:padding="20dp"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical">

                <TextView
                    android:id="@+id/txtNombreMetaAhorro"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Nombre meta"
                    android:textColor="#333333"
                    android:textSize="20sp"
                    android:textStyle="bold"/>

                <TextView
                    android:id="@+id/txtResumenAhorro"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="400 â‚¬ / 1000 â‚¬"
                    android:textColor="#777777"
                    android:textSize="16sp"
                    android:layout_marginTop="6dp"/>

                <ProgressBar
                    android:id="@+id/barraMetaAhorro"
                    style="@android:style/Widget.ProgressBar.Horizontal"
                    android:layout_width="match_parent"
                    android:layout_height="10dp"
                    android:progress="40"
                    android:max="100"
                    android:progressDrawable="@drawable/progress_meta_estilo"
                    android:layout_marginTop="12dp"/>

            </LinearLayout>
        </androidx.cardview.widget.CardView>


        <!-- TARJETA FORMULARIO -->
        <androidx.cardview.widget.CardView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:backgroundTint="#FFFFFF"
            android:layout_marginTop="20dp"
            app:cardElevation="5dp"
            app:cardCornerRadius="18dp">

            <LinearLayout
                android:padding="20dp"
                android:orientation="vertical"
                android:layout_width="match_parent"
                android:layout_height="wrap_content">

                <TextView
                    android:text="Cantidad a aÃ±adir (â‚¬)"
                    android:textSize="14sp"
                    android:textColor="#666666"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" />

                <EditText
                    android:id="@+id/inputCantidadAhorro"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:hint="Ej: 50"
                    android:inputType="numberDecimal"
                    android:padding="14dp"
                    android:textSize="18sp" />
            </LinearLayout>

        </androidx.cardview.widget.CardView>


        <!-- BOTÃ“N GUARDAR -->
        <com.google.android.material.floatingactionbutton.FloatingActionButton
            android:id="@+id/btnGuardarAhorro"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="end"
            android:layout_marginTop="28dp"
            android:src="@drawable/ic_check"
            android:contentDescription="Guardar"
            app:tint="#FFFFFF"
            android:backgroundTint="#4CAF50"/>

    </LinearLayout>

</ScrollView>

--- LAYOUT: C:\AndroidProjects\HealthyWallet\app\src\main\res\layout\pantalla_agregar_meta.xml ---

<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#F5F5F5">

    <LinearLayout
        android:orientation="vertical"
        android:padding="22dp"
        android:layout_width="match_parent"
        android:layout_height="wrap_content">

        <!-- HEADER -->
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:gravity="center_vertical">

            <ImageView
                android:layout_width="32dp"
                android:layout_height="32dp"
                android:src="@drawable/ic_metas"
                app:tint="#4CAF50"/>

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Nueva Meta"
                android:textColor="#333333"
                android:textStyle="bold"
                android:textSize="26sp"
                android:layout_marginStart="12dp"/>
        </LinearLayout>


        <!-- TARJETA FORMULARIO -->
        <androidx.cardview.widget.CardView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="24dp"
            android:backgroundTint="#FFFFFF"
            app:cardCornerRadius="18dp"
            app:cardElevation="6dp">

            <LinearLayout
                android:padding="22dp"
                android:orientation="vertical"
                android:layout_width="match_parent"
                android:layout_height="wrap_content">

                <!-- Nombre -->
                <TextView
                    android:text="Nombre de la meta"
                    android:textColor="#666666"
                    android:textSize="14sp"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" />

                <EditText
                    android:id="@+id/inputNombreMeta"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:hint="Ej: Ahorro para coche"
                    android:padding="12dp"
                    android:textSize="18sp"
                    android:layout_marginBottom="16dp"/>


                <!-- Cantidad objetivo -->
                <TextView
                    android:text="Cantidad objetivo (â‚¬)"
                    android:textColor="#666666"
                    android:textSize="14sp"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" />

                <EditText
                    android:id="@+id/inputCantidadObjetivo"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:inputType="numberDecimal"
                    android:padding="12dp"
                    android:textSize="18sp"
                    android:hint="Ej: 1000"
                    android:layout_marginBottom="16dp"/>


                <!-- Cantidad inicial -->
                <TextView
                    android:text="Cantidad actual (â‚¬)"
                    android:textSize="14sp"
                    android:textColor="#666666"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"/>

                <EditText
                    android:id="@+id/inputCantidadActual"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:inputType="numberDecimal"
                    android:padding="12dp"
                    android:textSize="18sp"
                    android:hint="Ej: 0"
                    android:layout_marginBottom="16dp"/>


                <!-- Fecha objetivo -->
                <TextView
                    android:text="Fecha objetivo"
                    android:textColor="#666666"
                    android:textSize="14sp"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content" />

                <EditText
                    android:id="@+id/inputFechaObjetivo"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:focusable="false"
                    android:padding="12dp"
                    android:textSize="18sp"
                    android:hint="Seleccionar fecha"
                    android:layout_marginBottom="16dp"/>

            </LinearLayout>

        </androidx.cardview.widget.CardView>


        <!-- BOTÃ“N GUARDAR -->
        <com.google.android.material.floatingactionbutton.FloatingActionButton
            android:id="@+id/btnGuardarMeta"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="end"
            android:layout_marginTop="28dp"
            android:src="@drawable/ic_check"
            app:tint="#FFFFFF"
            android:backgroundTint="#4CAF50" />

    </LinearLayout>

</ScrollView>

--- LAYOUT: C:\AndroidProjects\HealthyWallet\app\src\main\res\layout\pantalla_agregar_movimiento.xml ---

<?xml version="1.0" encoding="utf-8"?>
<ScrollView
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#F3F3F3">

    <LinearLayout
        android:orientation="vertical"
        android:padding="20dp"
        android:layout_width="match_parent"
        android:layout_height="wrap_content">

        <!-- HEADER -->
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="center_vertical"
            android:orientation="horizontal">

            <ImageView
                android:layout_width="28dp"
                android:layout_height="28dp"
                android:src="@drawable/ic_mas"
                app:tint="#4CAF50"/>

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="AÃ±adir Movimiento"
                android:textSize="24sp"
                android:textStyle="bold"
                android:textColor="#333333"
                android:layout_marginStart="12dp"/>
        </LinearLayout>


        <!-- TARJETA DEL FORMULARIO -->
        <androidx.cardview.widget.CardView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            android:backgroundTint="#FFFFFF"
            app:cardElevation="5dp"
            app:cardCornerRadius="14dp">

            <LinearLayout
                android:orientation="vertical"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:padding="18dp">

                <!-- CANTIDAD -->
                <TextView
                    android:text="Cantidad (â‚¬)"
                    android:textColor="#666666"
                    android:textSize="14sp"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"/>

                <EditText
                    android:id="@+id/inputCantidad"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:minHeight="48dp"
                    android:inputType="numberDecimal"
                    android:padding="8dp"
                    android:textSize="18sp"
                    android:hint="0.00"
                    android:layout_marginBottom="16dp"/>


                <!-- TIPO DE MOVIMIENTO -->
                <TextView
                    android:text="Tipo"
                    android:textColor="#666666"
                    android:textSize="14sp"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"/>

                <Spinner
                    android:id="@+id/spinnerTipo"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:minHeight="48dp"
                    android:paddingVertical="12dp"
                    android:layout_marginBottom="16dp"/>


                <!-- CATEGORÃA -->
                <TextView
                    android:text="CategorÃ­a"
                    android:textColor="#666666"
                    android:textSize="14sp"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"/>

                <Spinner
                    android:id="@+id/spinnerCategoria"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:minHeight="48dp"
                    android:paddingVertical="12dp"
                    android:layout_marginBottom="16dp"/>


                <!-- FECHA -->
                <TextView
                    android:text="Fecha"
                    android:textColor="#666666"
                    android:textSize="14sp"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"/>

                <EditText
                    android:id="@+id/inputFecha"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:minHeight="48dp"
                    android:inputType="date"
                    android:focusable="false"
                    android:padding="8dp"
                    android:hint="Seleccionar fecha"
                    android:layout_marginBottom="16dp"/>


                <!-- DESCRIPCIÃ“N -->
                <TextView
                    android:text="DescripciÃ³n"
                    android:textColor="#666666"
                    android:textSize="14sp"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"/>

                <EditText
                    android:id="@+id/inputDescripcion"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:minLines="2"
                    android:minHeight="48dp"
                    android:gravity="top"
                    android:inputType="textMultiLine"
                    android:padding="8dp"
                    android:hint="AÃ±ade una nota opcional"/>
            </LinearLayout>
        </androidx.cardview.widget.CardView>


        <!-- BOTÃ“N GUARDAR -->
        <com.google.android.material.floatingactionbutton.FloatingActionButton
            android:id="@+id/btnGuardarMovimiento"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="30dp"
            android:layout_gravity="end"
            android:contentDescription="Guardar movimiento"
            android:src="@drawable/ic_check"
            app:tint="#FFFFFF"
            app:backgroundTint="#4CAF50"/>

    </LinearLayout>

</ScrollView>

--- LAYOUT: C:\AndroidProjects\HealthyWallet\app\src\main\res\layout\pantalla_agregar_presupuesto.xml ---

<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:padding="20dp"
    android:background="#FFFFFF">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical">

        <!-- TÃ­tulo -->
        <TextView
            android:id="@+id/txtTituloAgregarPresupuesto"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Crear Presupuesto"
            android:textSize="22sp"
            android:textStyle="bold"
            android:layout_marginBottom="20dp"
            android:textColor="#000000" />

        <!-- CategorÃ­a -->
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="CategorÃ­a"
            android:textSize="15sp"
            android:layout_marginBottom="6dp"
            android:textColor="#000000" />

        <Spinner
            android:id="@+id/spinnerCategoriaPresupuesto"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:padding="8dp"
            android:layout_marginBottom="20dp" />

        <!-- LÃ­mite -->
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="LÃ­mite (â‚¬)"
            android:textSize="15sp"
            android:layout_marginBottom="6dp"
            android:textColor="#000000" />

        <EditText
            android:id="@+id/inputLimite"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:hint="Ej: 150.00"
            android:inputType="numberDecimal"
            android:padding="12dp"
            android:layout_marginBottom="30dp" />

        <!-- BotÃ³n Guardar -->
        <Button
            android:id="@+id/btnGuardarPresupuesto"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="Guardar"
            android:textAllCaps="false"
            android:textSize="16sp"
            android:padding="12dp" />

    </LinearLayout>
</ScrollView>

--- LAYOUT: C:\AndroidProjects\HealthyWallet\app\src\main\res\layout\pantalla_balance_general.xml ---

<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#F5F7F8">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:padding="20dp"
        android:orientation="vertical">

        <!-- TÃTULO -->
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Balance del mes"
            android:textSize="26sp"
            android:textStyle="bold"
            android:textColor="#212121" />

        <!-- TARJETA PRINCIPAL DEL BALANCE -->
        <androidx.cardview.widget.CardView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="18dp"
            android:padding="18dp"
            android:backgroundTint="#FFFFFF"
            android:elevation="7dp"
            android:radius="16dp">

            <LinearLayout
                android:orientation="vertical"
                android:layout_width="match_parent"
                android:layout_height="wrap_content">

                <TextView
                    android:id="@+id/txtBalanceMes"
                    android:text="0.00 â‚¬"
                    android:textSize="32sp"
                    android:textStyle="bold"
                    android:textColor="#4CAF50"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"/>

                <TextView
                    android:id="@+id/txtIngresosGastosMes"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="+0.00 ingresos | -0.00 gastos"
                    android:textColor="#757575"
                    android:textSize="14sp"
                    android:layout_marginTop="6dp"/>

            </LinearLayout>
        </androidx.cardview.widget.CardView>

        <!-- AHORRO -->
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Ahorro del mes"
            android:textSize="18sp"
            android:textColor="#333"
            android:textStyle="bold"
            android:layout_marginTop="26dp"/>

        <ProgressBar
            android:id="@+id/barraAhorroMes"
            style="?android:attr/progressBarStyleHorizontal"
            android:layout_width="match_parent"
            android:layout_height="14dp"
            android:progressTint="#4CAF50"
            android:max="100"
            android:layout_marginTop="8dp"/>

        <TextView
            android:id="@+id/txtPctAhorro"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="0%"
            android:textColor="#777"
            android:layout_marginTop="4dp"/>

        <!-- PRESUPUESTOS -->
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Presupuestos del mes"
            android:textSize="18sp"
            android:textColor="#333"
            android:textStyle="bold"
            android:layout_marginTop="26dp"/>

        <ProgressBar
            android:id="@+id/barraPresupuestoMes"
            style="?android:attr/progressBarStyleHorizontal"
            android:layout_width="match_parent"
            android:layout_height="14dp"
            android:progressTint="#FF9800"
            android:max="100"
            android:layout_marginTop="8dp"/>

        <TextView
            android:id="@+id/txtPctPresupuesto"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="0%"
            android:textColor="#777"
            android:layout_marginTop="4dp"/>

        <!-- METAS -->
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Progreso de metas"
            android:textSize="18sp"
            android:textColor="#333"
            android:textStyle="bold"
            android:layout_marginTop="26dp"/>

        <ProgressBar
            android:id="@+id/barraMetas"
            style="?android:attr/progressBarStyleHorizontal"
            android:layout_width="match_parent"
            android:layout_height="14dp"
            android:progressTint="#03A9F4"
            android:max="100"
            android:layout_marginTop="8dp"/>

        <TextView
            android:id="@+id/txtPctMetas"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="0%"
            android:textColor="#777"
            android:layout_marginTop="4dp"/>

        <!-- ESTADÃSTICAS -->
        <androidx.cardview.widget.CardView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="26dp"
            android:backgroundTint="#FFFFFF"
            android:elevation="7dp"
            android:padding="18dp"
            android:radius="16dp">

            <LinearLayout
                android:orientation="vertical"
                android:layout_width="match_parent"
                android:layout_height="wrap_content">

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="AnÃ¡lisis de tus gastos"
                    android:textSize="20sp"
                    android:textStyle="bold"
                    android:textColor="#212121"
                    android:layout_marginBottom="12dp"/>

                <TextView
                    android:id="@+id/txtCategoriaMayorGasto"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="CategorÃ­a con mÃ¡s gasto: ---"
                    android:textColor="#444"
                    android:textSize="16sp"
                    android:layout_marginBottom="8dp"/>

                <TextView
                    android:id="@+id/txtGastoSuperfluo"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Gasto superfluo: ---"
                    android:textColor="#444"
                    android:textSize="16sp"
                    android:layout_marginBottom="8dp"/>

                <TextView
                    android:id="@+id/txtRecomendacion"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="RecomendaciÃ³n: ---"
                    android:textColor="#009688"
                    android:textSize="16sp"/>

            </LinearLayout>
        </androidx.cardview.widget.CardView>

        <!-- DETALLE POR CATEGORÃAS -->
        <TextView
            android:id="@+id/txtDetalleCat"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Detalle por categorÃ­as"
            android:textSize="18sp"
            android:textColor="#333"
            android:textStyle="bold"
            android:layout_marginTop="26dp"/>

        <LinearLayout
            android:id="@+id/layoutCategorias"
            android:orientation="vertical"
            android:layout_marginTop="10dp"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"/>

    </LinearLayout>
</ScrollView>

--- LAYOUT: C:\AndroidProjects\HealthyWallet\app\src\main\res\layout\pantalla_detalle_meta.xml ---

<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#F3F3F3">

    <LinearLayout
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:padding="20dp">

        <!-- TITULO -->
        <TextView
            android:id="@+id/txtTituloMeta"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Nombre Meta"
            android:textSize="28sp"
            android:textColor="#333333"
            android:textStyle="bold"
            android:layout_marginBottom="10dp"/>

        <!-- TARJETA PRINCIPAL -->
        <androidx.cardview.widget.CardView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:backgroundTint="#FFFFFF"
            app:cardCornerRadius="16dp"
            app:cardElevation="5dp"
            android:layout_marginBottom="20dp">

            <LinearLayout
                android:orientation="vertical"
                android:padding="18dp"
                android:layout_width="match_parent"
                android:layout_height="wrap_content">

                <!-- Cantidades -->
                <TextView
                    android:id="@+id/txtCantidadesDetalle"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="400 â‚¬ / 1000 â‚¬"
                    android:textSize="20sp"
                    android:textStyle="bold"
                    android:textColor="#4CAF50"
                    android:layout_marginBottom="10dp"/>

                <!-- Porcentaje -->
                <TextView
                    android:id="@+id/txtPorcentajeDetalle"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="40%"
                    android:textSize="24sp"
                    android:textStyle="bold"
                    android:textColor="#333333"
                    android:layout_marginBottom="10dp"/>

                <!-- Barra de progreso -->
                <ProgressBar
                    android:id="@+id/barraDetalleMeta"
                    style="@android:style/Widget.ProgressBar.Horizontal"
                    android:layout_width="match_parent"
                    android:layout_height="12dp"
                    android:max="100"
                    android:progress="40"
                    android:progressDrawable="@drawable/progress_meta_estilo"
                    android:layout_marginBottom="15dp"/>

                <!-- Fecha lÃ­mite -->
                <TextView
                    android:id="@+id/txtFechaDetalle"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Fecha objetivo: 12/11/2025"
                    android:textSize="16sp"
                    android:textColor="#666666"/>
            </LinearLayout>
        </androidx.cardview.widget.CardView>

        <!-- BOTÃ“N AGREGAR AHORRO -->
        <Button
            android:id="@+id/btnAgregarAhorro"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="Agregar ahorro"
            android:textSize="18sp"
            android:layout_marginBottom="15dp"
            android:padding="12dp"
            android:backgroundTint="#4CAF50"
            android:textColor="#FFFFFF"
            app:cornerRadius="8dp"/>

        <!-- BOTÃ“N ELIMINAR META -->
        <Button
            android:id="@+id/btnEliminarMeta"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="Eliminar meta"
            android:textSize="18sp"
            android:padding="12dp"
            android:backgroundTint="#E53935"
            android:textColor="#FFFFFF"
            app:cornerRadius="8dp"/>
    </LinearLayout>
</ScrollView>

--- LAYOUT: C:\AndroidProjects\HealthyWallet\app\src\main\res\layout\pantalla_editar_presupuesto.xml ---

<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:padding="20dp"
    android:background="@color/colorBlanco">

    <LinearLayout
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="wrap_content">

        <!-- NOMBRE DEL PRESUPUESTO -->
        <com.google.android.material.textfield.TextInputLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:hint="Nombre del presupuesto"
            app:boxBackgroundMode="outline">

            <com.google.android.material.textfield.TextInputEditText
                android:id="@+id/edtNombreEditarPresupuesto"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:inputType="textPersonName" />
        </com.google.android.material.textfield.TextInputLayout>

        <!-- LÃMITE -->
        <com.google.android.material.textfield.TextInputLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:hint="LÃ­mite (â‚¬)"
            android:layout_marginTop="20dp"
            app:boxBackgroundMode="outline">

            <com.google.android.material.textfield.TextInputEditText
                android:id="@+id/edtLimiteEditarPresupuesto"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:inputType="numberDecimal" />
        </com.google.android.material.textfield.TextInputLayout>

        <!-- BOTÃ“N GUARDAR -->
        <Button
            android:id="@+id/btnGuardarCambiosPresupuesto"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="Guardar cambios"
            android:textAllCaps="false"
            android:layout_marginTop="30dp"
            android:backgroundTint="@color/teal_700"
            android:textColor="@android:color/white"
            android:padding="12dp" />

    </LinearLayout>

</ScrollView>

--- LAYOUT: C:\AndroidProjects\HealthyWallet\app\src\main\res\layout\pantalla_educacion.xml ---

<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#F2F4F7">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:padding="20dp">


        <!-- ========= HEADER ========= -->
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="EducaciÃ³n Financiera"
            android:textSize="26sp"
            android:textStyle="bold"
            android:textColor="#212121" />


        <!-- ========= PROGRESO GLOBAL ========= -->
        <com.google.android.material.card.MaterialCardView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            app:cardCornerRadius="18dp"
            app:cardElevation="5dp">

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:padding="18dp"
                android:orientation="vertical">

                <TextView
                    android:id="@+id/txtProgresoGlobalTitulo"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Progreso del programa"
                    android:textSize="16sp"
                    android:textColor="#555" />

                <TextView
                    android:id="@+id/txtProgresoGlobal"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="0% completado"
                    android:textStyle="bold"
                    android:textColor="#4CAF50"
                    android:textSize="20sp"
                    android:layout_marginTop="4dp" />

                <com.google.android.material.progressindicator.LinearProgressIndicator
                    android:id="@+id/progresoGlobalBarra"
                    android:layout_width="match_parent"
                    android:layout_height="16dp"
                    app:trackThickness="8dp"
                    app:indicatorColor="#4CAF50"
                    android:layout_marginTop="10dp"/>
            </LinearLayout>
        </com.google.android.material.card.MaterialCardView>


        <!-- ========= NIVELES DE VÃDEOS ========= -->
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="25dp"
            android:text="Rutas de Aprendizaje"
            android:textSize="20sp"
            android:textStyle="bold"
            android:textColor="#1A1A1A" />


        <!-- === NIVEL PRINCIPIANTE === -->
        <com.google.android.material.card.MaterialCardView
            android:id="@+id/cardNivelPrincipiante"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="15dp"
            app:cardCornerRadius="16dp"
            app:cardElevation="3dp">

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="vertical"
                android:padding="16dp">

                <TextView
                    android:id="@+id/txtNivelPrincipianteTitulo"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Nivel Principiante"
                    android:textSize="18sp"
                    android:textStyle="bold" />

                <com.google.android.material.progressindicator.LinearProgressIndicator
                    android:id="@+id/barraNivelPrincipiante"
                    android:layout_width="match_parent"
                    android:layout_height="14dp"
                    app:indicatorColor="#2196F3"
                    android:layout_marginTop="10dp"/>

                <LinearLayout
                    android:id="@+id/contenedorVideosPrincipiante"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:layout_marginTop="15dp" />

            </LinearLayout>
        </com.google.android.material.card.MaterialCardView>


        <!-- === NIVEL INTERMEDIO === -->
        <com.google.android.material.card.MaterialCardView
            android:id="@+id/cardNivelIntermedio"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="15dp"
            app:cardCornerRadius="16dp"
            app:cardElevation="3dp">

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:padding="16dp"
                android:orientation="vertical">

                <TextView
                    android:id="@+id/txtNivelIntermedioTitulo"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Nivel Intermedio"
                    android:textSize="18sp"
                    android:textStyle="bold" />

                <com.google.android.material.progressindicator.LinearProgressIndicator
                    android:id="@+id/barraNivelIntermedio"
                    android:layout_width="match_parent"
                    android:layout_height="14dp"
                    app:indicatorColor="#FF9800"
                    android:layout_marginTop="10dp" />

                <LinearLayout
                    android:id="@+id/contenedorVideosIntermedio"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:layout_marginTop="15dp" />

            </LinearLayout>
        </com.google.android.material.card.MaterialCardView>


        <!-- === NIVEL EXPERTO === -->
        <com.google.android.material.card.MaterialCardView
            android:id="@+id/cardNivelExperto"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="15dp"
            app:cardCornerRadius="16dp"
            app:cardElevation="3dp">

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:padding="16dp"
                android:orientation="vertical">

                <TextView
                    android:id="@+id/txtNivelExpertoTitulo"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Nivel Experto"
                    android:textSize="18sp"
                    android:textStyle="bold" />

                <com.google.android.material.progressindicator.LinearProgressIndicator
                    android:id="@+id/barraNivelExperto"
                    android:layout_width="match_parent"
                    android:layout_height="14dp"
                    app:indicatorColor="#E91E63"
                    android:layout_marginTop="10dp" />

                <LinearLayout
                    android:id="@+id/contenedorVideosExperto"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:orientation="vertical"
                    android:layout_marginTop="15dp" />

            </LinearLayout>
        </com.google.android.material.card.MaterialCardView>



        <!-- ========= LIBRO DE LA SEMANA ========= -->
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="30dp"
            android:text="Libro de la Semana"
            android:textSize="20sp"
            android:textStyle="bold"
            android:textColor="#1A1A1A" />

        <com.google.android.material.card.MaterialCardView
            android:id="@+id/cardLibroSemana"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="15dp"
            app:cardCornerRadius="16dp"
            app:cardElevation="4dp">

            <LinearLayout
                android:padding="18dp"
                android:orientation="vertical"
                android:layout_width="match_parent"
                android:layout_height="wrap_content">

                <TextView
                    android:id="@+id/txtLibroTitulo"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="TÃ­tulo del libro"
                    android:textSize="17sp"
                    android:textStyle="bold" />

                <TextView
                    android:id="@+id/txtLibroAutor"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Autor"
                    android:layout_marginTop="6dp"
                    android:textColor="#777" />

                <Button
                    android:id="@+id/btnAbrirLibro"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="12dp"
                    android:text="Ver libro" />
            </LinearLayout>
        </com.google.android.material.card.MaterialCardView>



        <!-- ========= HERRAMIENTAS ÃšTILES ========= -->
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="30dp"
            android:text="Herramientas Ãštiles"
            android:textSize="20sp"
            android:textStyle="bold"
            android:textColor="#1A1A1A" />


        <!-- ======= HERRAMIENTA 1 (EMOJI) ======= -->
        <com.google.android.material.card.MaterialCardView
            android:id="@+id/toolCalculadoraInteres"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="15dp"
            app:cardCornerRadius="14dp"
            app:cardElevation="4dp">

            <LinearLayout
                android:padding="16dp"
                android:orientation="horizontal"
                android:gravity="center_vertical"
                android:layout_width="match_parent"
                android:layout_height="wrap_content">

                <TextView
                    android:text="ðŸ“ˆ"
                    android:textSize="26sp"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:contentDescription="@null"/>

                <TextView
                    android:layout_marginStart="12dp"
                    android:text="Calculadora de interÃ©s compuesto"
                    android:textSize="16sp"
                    android:textStyle="bold"
                    android:textColor="#333"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"/>
            </LinearLayout>
        </com.google.android.material.card.MaterialCardView>


        <!-- ======= HERRAMIENTA 2 (EMOJI) ======= -->
        <com.google.android.material.card.MaterialCardView
            android:id="@+id/toolSimuladorInversion"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="12dp"
            app:cardCornerRadius="14dp"
            app:cardElevation="4dp">

            <LinearLayout
                android:padding="16dp"
                android:orientation="horizontal"
                android:gravity="center_vertical"
                android:layout_width="match_parent"
                android:layout_height="wrap_content">

                <TextView
                    android:text="ðŸ’¹"
                    android:textSize="26sp"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:contentDescription="@null"/>

                <TextView
                    android:layout_marginStart="12dp"
                    android:text="Simulador de inversiÃ³n"
                    android:textSize="16sp"
                    android:textStyle="bold"
                    android:textColor="#333"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"/>
            </LinearLayout>
        </com.google.android.material.card.MaterialCardView>


        <!-- ======= HERRAMIENTA 3 (EMOJI) ======= -->
        <com.google.android.material.card.MaterialCardView
            android:id="@+id/toolDiccionarioFinanciero"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="12dp"
            app:cardCornerRadius="14dp"
            app:cardElevation="4dp">

            <LinearLayout
                android:padding="16dp"
                android:orientation="horizontal"
                android:gravity="center_vertical"
                android:layout_width="match_parent"
                android:layout_height="wrap_content">

                <TextView
                    android:text="ðŸ“Š"
                    android:textSize="26sp"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:contentDescription="@null"/>

                <TextView
                    android:layout_marginStart="12dp"
                    android:text="Graficos del mercado"
                    android:textSize="16sp"
                    android:textStyle="bold"
                    android:textColor="#333"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"/>
            </LinearLayout>
        </com.google.android.material.card.MaterialCardView>

    </LinearLayout>
</ScrollView>

--- LAYOUT: C:\AndroidProjects\HealthyWallet\app\src\main\res\layout\pantalla_inicio.xml ---

<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:fillViewport="true"
    android:background="@color/fondo_app">

    <LinearLayout
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:padding="22dp">

        <!-- HEADER -->
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:gravity="center_vertical">

            <ImageView
                android:layout_width="42dp"
                android:layout_height="42dp"
                android:src="@drawable/ic_home"
                app:tint="@color/colorPrincipal" />

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Inicio"
                android:textSize="30sp"
                android:textStyle="bold"
                android:textColor="@color/titulo_principal"
                android:layout_marginStart="14dp" />
        </LinearLayout>

        <View
            android:layout_width="match_parent"
            android:layout_height="14dp" />

        <!-- BALANCE GENERAL -->
        <com.google.android.material.card.MaterialCardView
            android:id="@+id/cardBalanceGeneral"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:backgroundTint="@color/card_fondo"
            app:cardCornerRadius="20dp"
            app:cardElevation="5dp"
            app:rippleColor="@color/ripple_suave"
            android:foreground="?attr/selectableItemBackground">

            <LinearLayout
                android:orientation="vertical"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:padding="22dp">

                <TextView
                    android:id="@+id/txtBalanceTituloInicio"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Balance total"
                    android:textColor="@color/texto_secundario"
                    android:textSize="16sp" />

                <TextView
                    android:id="@+id/txtBalanceCantidadInicio"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="0,00 â‚¬"
                    android:textColor="@color/colorPrincipal"
                    android:textStyle="bold"
                    android:textSize="28sp"
                    android:layout_marginTop="6dp" />
            </LinearLayout>
        </com.google.android.material.card.MaterialCardView>

        <!-- PRESUPUESTOS -->
        <com.google.android.material.card.MaterialCardView
            android:id="@+id/cardPresupuestos"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="18dp"
            android:backgroundTint="@color/card_fondo"
            app:cardCornerRadius="20dp"
            app:cardElevation="4dp"
            android:foreground="?attr/selectableItemBackground">

            <LinearLayout
                android:orientation="vertical"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:padding="20dp">

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Presupuestos"
                    android:textSize="20sp"
                    android:textStyle="bold"
                    android:textColor="@color/titulo_principal" />

                <TextView
                    android:id="@+id/txtResumenPresupuestosInicio"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="0 â‚¬ gastados / 0 â‚¬"
                    android:textColor="@color/texto_secundario"
                    android:layout_marginTop="6dp" />
            </LinearLayout>
        </com.google.android.material.card.MaterialCardView>

        <!-- MOVIMIENTOS -->
        <com.google.android.material.card.MaterialCardView
            android:id="@+id/cardMovimientos"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="18dp"
            android:backgroundTint="@color/card_fondo"
            app:cardCornerRadius="20dp"
            app:cardElevation="4dp"
            android:foreground="?attr/selectableItemBackground">

            <LinearLayout
                android:orientation="vertical"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:padding="20dp">

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Movimientos"
                    android:textSize="20sp"
                    android:textStyle="bold"
                    android:textColor="@color/titulo_principal" />

                <TextView
                    android:id="@+id/txtResumenMovimientosInicio"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="+0 ingresos | -0 gastos"
                    android:textColor="@color/texto_secundario"
                    android:layout_marginTop="6dp" />
            </LinearLayout>
        </com.google.android.material.card.MaterialCardView>

        <!-- METAS -->
        <com.google.android.material.card.MaterialCardView
            android:id="@+id/cardMetas"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="18dp"
            android:backgroundTint="@color/card_fondo"
            app:cardCornerRadius="20dp"
            app:cardElevation="4dp"
            android:foreground="?attr/selectableItemBackground">

            <LinearLayout
                android:orientation="vertical"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:padding="20dp">

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Metas"
                    android:textSize="20sp"
                    android:textStyle="bold"
                    android:textColor="@color/titulo_principal" />

                <TextView
                    android:id="@+id/txtResumenMetasInicio"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="0 activas | 0 completadas"
                    android:textColor="@color/texto_secundario"
                    android:layout_marginTop="6dp" />
            </LinearLayout>
        </com.google.android.material.card.MaterialCardView>

        <!-- EDUCACIÃ“N -->
        <com.google.android.material.card.MaterialCardView
            android:id="@+id/cardEducacion"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="18dp"
            android:backgroundTint="@color/card_fondo"
            app:cardCornerRadius="20dp"
            app:cardElevation="4dp"
            android:foreground="?attr/selectableItemBackground">

            <LinearLayout
                android:orientation="vertical"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:padding="20dp">

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="EducaciÃ³n financiera"
                    android:textColor="@color/titulo_principal"
                    android:textSize="20sp"
                    android:textStyle="bold"/>

                <TextView
                    android:id="@+id/txtResumenEducacionInicio"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="0 mÃ³dulos registrados"
                    android:textColor="@color/texto_secundario"
                    android:layout_marginTop="6dp"/>
            </LinearLayout>
        </com.google.android.material.card.MaterialCardView>

    </LinearLayout>
</ScrollView>

--- LAYOUT: C:\AndroidProjects\HealthyWallet\app\src\main\res\layout\pantalla_login.xml ---

<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:padding="24dp">

    <!-- CONTENEDOR CENTRADO -->
    <LinearLayout
        android:id="@+id/layoutCentral"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:gravity="center_horizontal"
        android:orientation="vertical">

        <!-- LOGO -->
        <ImageView
            android:id="@+id/logoHealthy"
            android:layout_width="130dp"
            android:layout_height="130dp"
            android:src="@drawable/logo_wallet"
            android:layout_marginBottom="24dp"
            android:contentDescription="Logo Healthy Wallet" />

        <!-- TÃTULO -->
        <TextView
            android:id="@+id/tvTituloLogin"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Iniciar sesiÃ³n"
            android:textSize="22sp"
            android:textStyle="bold"
            android:layout_marginBottom="32dp" />

        <!-- EMAIL -->
        <EditText
            android:id="@+id/etEmailLogin"
            android:layout_width="match_parent"
            android:layout_height="48dp"
            android:hint="Correo electrÃ³nico"
            android:inputType="textEmailAddress"
            android:background="@drawable/edittext_borde"
            android:padding="12dp" />

        <!-- PASSWORD -->
        <EditText
            android:id="@+id/etPasswordLogin"
            android:layout_width="match_parent"
            android:layout_height="48dp"
            android:hint="ContraseÃ±a"
            android:inputType="textPassword"
            android:background="@drawable/edittext_borde"
            android:padding="12dp"
            android:layout_marginTop="16dp" />

        <!-- BOTÃ“N LOGIN -->
        <Button
            android:id="@+id/btnLogin"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="ENTRAR"
            android:layout_marginTop="24dp"
            android:backgroundTint="@color/teal_700"
            android:textColor="@color/colorBlanco"
            android:padding="12dp" />

        <!-- ENLACE A REGISTRO -->
        <TextView
            android:id="@+id/tvIrRegistro"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Â¿No tienes cuenta? RegÃ­strate"
            android:textColor="@color/teal_700"
            android:textStyle="bold"
            android:layout_marginTop="16dp" />

    </LinearLayout>

</RelativeLayout>

--- LAYOUT: C:\AndroidProjects\HealthyWallet\app\src\main\res\layout\pantalla_metas.xml ---

<?xml version="1.0" encoding="utf-8"?>
<androidx.coordinatorlayout.widget.CoordinatorLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#F5F5F5">

    <!-- CONTENEDOR PRINCIPAL -->
    <LinearLayout
        android:orientation="vertical"
        android:padding="22dp"
        android:layout_width="match_parent"
        android:layout_height="match_parent">

        <!-- HEADER -->
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="center_vertical"
            android:orientation="horizontal">

            <ImageView
                android:layout_width="32dp"
                android:layout_height="32dp"
                android:src="@drawable/ic_metas"
                app:tint="#4CAF50"/>

            <TextView
                android:id="@+id/tituloMetas"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Metas"
                android:textSize="28sp"
                android:textStyle="bold"
                android:textColor="#222222"
                android:layout_marginStart="12dp"/>
        </LinearLayout>


        <!-- TARJETA RESUMEN -->
        <androidx.cardview.widget.CardView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="20dp"
            app:cardElevation="6dp"
            app:cardCornerRadius="18dp"
            android:backgroundTint="#FFFFFF">

            <LinearLayout
                android:orientation="vertical"
                android:padding="20dp"
                android:layout_width="match_parent"
                android:layout_height="wrap_content">

                <TextView
                    android:id="@+id/txtResumenTitulo"
                    android:text="Progreso general"
                    android:textSize="15sp"
                    android:textColor="#777777"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"/>

                <TextView
                    android:id="@+id/txtResumenCantidad"
                    android:text="0 â‚¬ / 0 â‚¬"
                    android:textSize="24sp"
                    android:textStyle="bold"
                    android:textColor="#4CAF50"
                    android:layout_marginTop="6dp"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"/>

            </LinearLayout>

        </androidx.cardview.widget.CardView>


        <!-- LISTA DE METAS -->
        <androidx.recyclerview.widget.RecyclerView
            android:id="@+id/recyclerMetas"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:layout_marginTop="24dp"/>

    </LinearLayout>


    <!-- BOTÃ“N FLOTANTE AÃ‘ADIR -->
    <com.google.android.material.floatingactionbutton.FloatingActionButton
        android:id="@+id/fabAgregarMeta"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/ic_add"
        android:contentDescription="AÃ±adir meta"
        app:tint="#FFFFFF"
        android:backgroundTint="#4CAF50"
        android:layout_margin="22dp"
        android:layout_gravity="bottom|end"
        app:elevation="8dp"/>

</androidx.coordinatorlayout.widget.CoordinatorLayout>

--- LAYOUT: C:\AndroidProjects\HealthyWallet\app\src\main\res\layout\pantalla_movimientos.xml ---

<?xml version="1.0" encoding="utf-8"?>
<androidx.coordinatorlayout.widget.CoordinatorLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#F3F3F3">

    <!-- CONTENIDO PRINCIPAL -->
    <LinearLayout
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:padding="20dp">

        <!-- HEADER -->
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:gravity="center_vertical">

            <ImageView
                android:layout_width="28dp"
                android:layout_height="35dp"
                android:src="@drawable/ic_movimientos"
                app:tint="#4CAF50" />

            <TextView
                android:id="@+id/tituloMovimientos"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Movimientos"
                android:textSize="26sp"
                android:textStyle="bold"
                android:textColor="#333333"
                android:layout_marginStart="12dp"/>
        </LinearLayout>

        <!-- TARJETA BALANCE -->
        <androidx.cardview.widget.CardView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="18dp"
            app:cardCornerRadius="14dp"
            app:cardElevation="4dp"
            android:backgroundTint="#FFFFFF">

            <LinearLayout
                android:orientation="vertical"
                android:padding="18dp"
                android:layout_width="match_parent"
                android:layout_height="wrap_content">

                <TextView
                    android:id="@+id/txtBalanceTitulo"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Balance del mes"
                    android:textColor="#888888"
                    android:textSize="16sp"/>

                <TextView
                    android:id="@+id/txtBalanceCantidad"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="0,00 â‚¬"
                    android:textColor="#4CAF50"
                    android:textStyle="bold"
                    android:textSize="24sp"
                    android:layout_marginTop="6dp"/>
            </LinearLayout>

        </androidx.cardview.widget.CardView>

        <!-- LISTA MOVIMIENTOS -->
        <androidx.recyclerview.widget.RecyclerView
            android:id="@+id/recyclerMovimientos"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_weight="1"
            android:layout_marginTop="20dp"/>

    </LinearLayout>

    <!-- FAB flotante -->
    <com.google.android.material.floatingactionbutton.FloatingActionButton
        android:id="@+id/fabAgregarMovimiento"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="20dp"
        android:contentDescription="Agregar movimiento"
        android:src="@drawable/ic_add"
        app:tint="#FFFFFF"
        android:backgroundTint="#4CAF50"
        app:layout_anchorGravity="bottom|end"
        android:layout_gravity="bottom|end"/>

</androidx.coordinatorlayout.widget.CoordinatorLayout>

--- LAYOUT: C:\AndroidProjects\HealthyWallet\app\src\main\res\layout\pantalla_presupuestos.xml ---

<?xml version="1.0" encoding="utf-8"?>
<androidx.coordinatorlayout.widget.CoordinatorLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#F3F3F3">

    <LinearLayout
        android:orientation="vertical"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:padding="20dp">

        <!-- HEADER -->
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:gravity="center_vertical">

            <ImageView
                android:layout_width="28dp"
                android:layout_height="28dp"
                android:src="@drawable/ic_presupuesto"
                app:tint="#4CAF50"/>

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Presupuestos"
                android:textColor="#333333"
                android:textSize="26sp"
                android:textStyle="bold"
                android:layout_marginStart="12dp"/>
        </LinearLayout>

        <!-- TARJETA RESUMEN -->
        <androidx.cardview.widget.CardView
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="18dp"
            app:cardCornerRadius="14dp"
            app:cardElevation="4dp"
            android:backgroundTint="#FFFFFF">

            <LinearLayout
                android:orientation="vertical"
                android:padding="18dp"
                android:layout_width="match_parent"
                android:layout_height="wrap_content">

                <TextView
                    android:text="Presupuesto total mensual"
                    android:textColor="#888888"
                    android:textSize="16sp"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"/>

                <TextView
                    android:id="@+id/txtResumenPresupuesto"
                    android:text="0 â‚¬ gastados de 0 â‚¬"
                    android:textColor="#333333"
                    android:textStyle="bold"
                    android:textSize="20sp"
                    android:layout_marginTop="4dp"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"/>

                <!-- Barra de progreso largo -->
                <ProgressBar
                    android:id="@+id/progresoGeneralPresupuesto"
                    style="@style/PresupuestoProgressBar"
                    android:layout_width="match_parent"
                    android:layout_height="14dp"
                    android:layout_marginTop="12dp"/>
            </LinearLayout>

        </androidx.cardview.widget.CardView>

        <!-- LISTA DE PRESUPUESTOS -->
        <androidx.recyclerview.widget.RecyclerView
            android:id="@+id/recyclerPresupuestos"
            android:layout_width="match_parent"
            android:layout_height="0dp"
            android:layout_marginTop="20dp"
            android:layout_weight="1"/>

    </LinearLayout>

    <!-- FAB -->
    <com.google.android.material.floatingactionbutton.FloatingActionButton
        android:id="@+id/fabAgregarPresupuesto"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="20dp"
        android:src="@drawable/ic_add"
        app:tint="#FFFFFF"
        app:backgroundTint="#4CAF50"
        android:layout_gravity="end|bottom"/>

</androidx.coordinatorlayout.widget.CoordinatorLayout>

--- LAYOUT: C:\AndroidProjects\HealthyWallet\app\src\main\res\layout\pantalla_registro.xml ---

<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:padding="24dp">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal"
        android:orientation="vertical"
        android:layout_gravity="center">

        <!-- LOGO -->
        <ImageView
            android:id="@+id/logoRegistro"
            android:layout_width="130dp"
            android:layout_height="130dp"
            android:src="@drawable/logo_wallet"
            android:layout_marginBottom="24dp"
            android:contentDescription="Logo Healthy Wallet" />

        <!-- TÃTULO -->
        <TextView
            android:id="@+id/tvTituloRegistro"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Crear cuenta"
            android:textSize="22sp"
            android:textStyle="bold"
            android:layout_marginBottom="32dp" />

        <!-- NOMBRE -->
        <EditText
            android:id="@+id/etNombreRegistro"
            android:layout_width="match_parent"
            android:layout_height="48dp"
            android:hint="Nombre completo"
            android:background="@drawable/edittext_borde"
            android:padding="12dp"
            android:inputType="textPersonName" />

        <!-- EMAIL -->
        <EditText
            android:id="@+id/etEmailRegistro"
            android:layout_width="match_parent"
            android:layout_height="48dp"
            android:hint="Correo electrÃ³nico"
            android:background="@drawable/edittext_borde"
            android:layout_marginTop="16dp"
            android:padding="12dp"
            android:inputType="textEmailAddress" />

        <!-- CONTRASEÃ‘A -->
        <EditText
            android:id="@+id/etPassRegistro"
            android:layout_width="match_parent"
            android:layout_height="48dp"
            android:hint="ContraseÃ±a"
            android:background="@drawable/edittext_borde"
            android:layout_marginTop="16dp"
            android:padding="12dp"
            android:inputType="textPassword" />

        <!-- REPETIR CONTRASEÃ‘A -->
        <EditText
            android:id="@+id/etPassConfirmarRegistro"
            android:layout_width="match_parent"
            android:layout_height="48dp"
            android:hint="Confirmar contraseÃ±a"
            android:background="@drawable/edittext_borde"
            android:layout_marginTop="16dp"
            android:padding="12dp"
            android:inputType="textPassword" />

        <!-- BOTÃ“N REGISTRARSE -->
        <Button
            android:id="@+id/btnRegistrar"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="REGISTRARSE"
            android:layout_marginTop="24dp"
            android:backgroundTint="@color/teal_700"
            android:textColor="@color/colorBlanco"
            android:padding="12dp" />

        <!-- IR A LOGIN -->
        <TextView
            android:id="@+id/tvIrLogin"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Â¿Ya tienes cuenta? Inicia sesiÃ³n"
            android:textColor="@color/teal_700"
            android:textStyle="bold"
            android:layout_marginTop="16dp" />

    </LinearLayout>

</ScrollView>

===== MENU =====


--- MENU: C:\AndroidProjects\HealthyWallet\app\src\main\res\menu\bottom_nav_menu.xml ---

<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">

    <item
        android:id="@+id/nav_inicio"
        android:icon="@drawable/ic_home"
        android:title="Inicio" />

    <item
        android:id="@+id/nav_movimientos"
        android:icon="@drawable/ic_movimientos"
        android:title="Movimientos" />

    <item
        android:id="@+id/nav_presupuestos"
        android:icon="@drawable/ic_presupuesto"
        android:title="Presupuestos" />

    <item
        android:id="@+id/nav_metas"
        android:icon="@drawable/ic_metas"
        android:title="Metas" />

    <item
        android:id="@+id/nav_educacion"
        android:icon="@drawable/ic_educacion"
        android:title="EducaciÃ³n" />

</menu>

===== NAVIGATION =====


--- NAV: C:\AndroidProjects\HealthyWallet\app\src\main\res\navigation\nav_graph.xml ---

<?xml version="1.0" encoding="utf-8"?>
<navigation xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    app:startDestination="@id/pantallaLogin">

    <!-- LOGIN -->
    <fragment
        android:id="@+id/pantallaLogin"
        android:name="com.example.healthywallet.ui.usuario.PantallaLogin"
        android:label="Iniciar SesiÃ³n"
        tools:layout="@layout/pantalla_login">

        <action
            android:id="@+id/action_pantallaLogin_to_pantallaRegistroUsuario"
            app:destination="@id/pantallaRegistroUsuario" />

        <action
            android:id="@+id/action_pantallaLogin_to_nav_inicio"
            app:destination="@id/nav_inicio" />

    </fragment>

    <!-- REGISTRO -->
    <fragment
        android:id="@+id/pantallaRegistroUsuario"
        android:name="com.example.healthywallet.ui.usuario.PantallaRegistroUsuario"
        android:label="Registrarse"
        tools:layout="@layout/pantalla_registro">

        <action
            android:id="@+id/action_pantallaRegistroUsuario_to_pantallaLogin"
            app:destination="@id/pantallaLogin" />
    </fragment>

    <!-- INICIO -->
    <fragment
        android:id="@+id/nav_inicio"
        android:name="com.example.healthywallet.ui.inicio.PantallaInicio"
        android:label="Inicio"
        tools:layout="@layout/pantalla_inicio" />

    <!-- MOVIMIENTOS -->
    <fragment
        android:id="@+id/nav_movimientos"
        android:name="com.example.healthywallet.ui.movimientos.PantallaMovimientos"
        android:label="Movimientos"
        tools:layout="@layout/pantalla_movimientos">

        <action
            android:id="@+id/action_movimientos_to_agregarMovimiento"
            app:destination="@id/fragmentoAgregarMovimiento" />
    </fragment>

    <!-- AGREGAR MOVIMIENTO -->
    <fragment
        android:id="@+id/fragmentoAgregarMovimiento"
        android:name="com.example.healthywallet.ui.movimientos.PantallaAgregarMovimiento"
        android:label="Agregar movimiento"
        tools:layout="@layout/pantalla_agregar_movimiento" />

    <!-- PRESUPUESTOS -->
    <fragment
        android:id="@+id/nav_presupuestos"
        android:name="com.example.healthywallet.ui.presupuestos.PantallaPresupuestos"
        android:label="Presupuestos"
        tools:layout="@layout/pantalla_presupuestos">

        <action
            android:id="@+id/action_presupuestos_to_agregarPresupuesto"
            app:destination="@id/pantallaAgregarPresupuesto" />

        <action
            android:id="@+id/action_presupuestos_to_editarPresupuesto"
            app:destination="@id/pantallaEditarPresupuesto" />

    </fragment>

    <!-- AGREGAR PRESUPUESTO -->
    <fragment
        android:id="@+id/pantallaAgregarPresupuesto"
        android:name="com.example.healthywallet.ui.presupuestos.PantallaAgregarPresupuesto"
        android:label="Agregar Presupuesto"
        tools:layout="@layout/pantalla_agregar_presupuesto" />

    <!-- EDITAR PRESUPUESTO -->
    <fragment
        android:id="@+id/pantallaEditarPresupuesto"
        android:name="com.example.healthywallet.ui.presupuestos.PantallaEditarPresupuesto"
        android:label="Editar presupuesto"
        tools:layout="@layout/pantalla_editar_presupuesto" />

    <!-- METAS -->
    <fragment
        android:id="@+id/nav_metas"
        android:name="com.example.healthywallet.ui.metas.PantallaMetas"
        android:label="Metas"
        tools:layout="@layout/pantalla_metas">

        <action
            android:id="@+id/action_metas_to_detalleMeta"
            app:destination="@id/pantallaDetalleMeta" />

        <action
            android:id="@+id/action_metas_to_agregarMeta"
            app:destination="@id/pantallaAgregarMeta" />
    </fragment>

    <!-- DETALLE META -->
    <fragment
        android:id="@+id/pantallaDetalleMeta"
        android:name="com.example.healthywallet.ui.metas.PantallaDetalleMeta"
        android:label="Detalle Meta"
        tools:layout="@layout/pantalla_detalle_meta">

        <action
            android:id="@+id/action_detalle_to_agregarAhorro"
            app:destination="@id/pantallaAgregarAhorro" />
    </fragment>

    <!-- AGREGAR META -->
    <fragment
        android:id="@+id/pantallaAgregarMeta"
        android:name="com.example.healthywallet.ui.metas.PantallaAgregarMeta"
        android:label="Agregar Meta"
        tools:layout="@layout/pantalla_agregar_meta" />

    <!-- AGREGAR AHORRO -->
    <fragment
        android:id="@+id/pantallaAgregarAhorro"
        android:name="com.example.healthywallet.ui.metas.PantallaAgregarAhorro"
        android:label="Agregar Ahorro"
        tools:layout="@layout/pantalla_agregar_ahorro" />

    <!-- EDUCACIÃ“N -->
    <fragment
        android:id="@+id/nav_educacion"
        android:name="com.example.healthywallet.ui.educacion.PantallaEducacion"
        android:label="EducaciÃ³n"
        tools:layout="@layout/pantalla_educacion" />

    <!-- BALANCE -->
    <fragment
        android:id="@+id/pantallaBalanceGeneral"
        android:name="com.example.healthywallet.ui.inicio.PantallaBalanceGeneral"
        android:label="Balance General"
        tools:layout="@layout/pantalla_balance_general" />

</navigation>

===== DRAWABLES (XML) =====


--- DRAWABLE: C:\AndroidProjects\HealthyWallet\app\src\main\res\drawable\barra_presupuesto.xml ---

<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:id="@android:id/background">
        <shape android:shape="rectangle">
            <corners android:radius="8dp"/>
            <solid android:color="#DADADA"/>
        </shape>
    </item>

    <item android:id="@android:id/progress">
        <clip>
            <shape android:shape="rectangle">
                <corners android:radius="8dp"/>
                <solid android:color="#4CAF50"/>
            </shape>
        </clip>
    </item>

</layer-list>

--- DRAWABLE: C:\AndroidProjects\HealthyWallet\app\src\main\res\drawable\edittext_borde.xml ---

<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">

    <solid android:color="@android:color/white" />
    <stroke android:width="2dp" android:color="#DDDDDD" />
    <corners android:radius="12dp" />

</shape>

--- DRAWABLE: C:\AndroidProjects\HealthyWallet\app\src\main\res\drawable\icono_inicio.xml ---

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:aapt="http://schemas.android.com/aapt"
    android:width="108dp"
    android:height="108dp"
    android:viewportWidth="108"
    android:viewportHeight="108">
  <group android:scaleX="1.6"
      android:scaleY="1.6"
      android:translateX="-32.4"
      android:translateY="-32.4">
    <path
        android:pathData="M31,63.928c0,0 6.4,-11 12.1,-13.1c7.2,-2.6 26,-1.4 26,-1.4l38.1,38.1L107,108.928l-32,-1L31,63.928zM43.4,57.328c-0.8,0 -1.5,-0.5 -1.8,-1.2c-0.3,-0.7 -0.1,-1.5 0.4,-2.1c0.5,-0.5 1.4,-0.7 2.1,-0.4c0.7,0.3 1.2,1 1.2,1.8C45.3,56.528 44.5,57.328 43.4,57.328L43.4,57.328zM64.6,57.328c-0.8,0 -1.5,-0.5 -1.8,-1.2s-0.1,-1.5 0.4,-2.1c0.5,-0.5 1.4,-0.7 2.1,-0.4c0.7,0.3 1.2,1 1.2,1.8C66.5,56.528 65.6,57.328 64.6,57.328L64.6,57.328z"
        android:fillType="evenOdd">
      <aapt:attr name="android:fillColor">
        <gradient
            android:startY="49.59793"
            android:startX="42.9492"
            android:endY="92.4963"
            android:endX="85.84757"
            android:type="linear">
          <item
              android:color="#44000000"
              android:offset="0"/>
          <item
              android:color="#00000000"
              android:offset="1"/>
        </gradient>
      </aapt:attr>
    </path>

    <path
        android:pathData="M65.3,45.828l3.8,-6.6c0.2,-0.4 0.1,-0.9 -0.3,-1.1c-0.4,-0.2 -0.9,-0.1 -1.1,0.3l-3.9,6.7c-6.3,-2.8 -13.4,-2.8 -19.7,0l-3.9,-6.7c-0.2,-0.4 -0.7,-0.5 -1.1,-0.3C38.8,38.328 38.7,38.828 38.9,39.228l3.8,6.6C36.2,49.428 31.7,56.028 31,63.928h46C76.3,56.028 71.8,49.428 65.3,45.828zM43.4,57.328c-0.8,0 -1.5,-0.5 -1.8,-1.2c-0.3,-0.7 -0.1,-1.5 0.4,-2.1c0.5,-0.5 1.4,-0.7 2.1,-0.4c0.7,0.3 1.2,1 1.2,1.8C45.3,56.528 44.5,57.328 43.4,57.328L43.4,57.328zM64.6,57.328c-0.8,0 -1.5,-0.5 -1.8,-1.2s-0.1,-1.5 0.4,-2.1c0.5,-0.5 1.4,-0.7 2.1,-0.4c0.7,0.3 1.2,1 1.2,1.8C66.5,56.528 65.6,57.328 64.6,57.328L64.6,57.328z"
        android:fillColor="#3DDC84"
        android:fillType="evenOdd"
        android:strokeWidth="1"
        android:strokeColor="#00000000"/>
  </group>
</vector>

--- DRAWABLE: C:\AndroidProjects\HealthyWallet\app\src\main\res\drawable\ic_add.xml ---

<vector xmlns:android="http://schemas.android.com/apk/res/android" android:height="24dp" android:tint="#000000" android:viewportHeight="24" android:viewportWidth="24" android:width="24dp">
      
    <path android:fillColor="@android:color/white" android:pathData="M13,7h-2v4L7,11v2h4v4h2v-4h4v-2h-4L13,7zM12,2C6.48,2 2,6.48 2,12s4.48,10 10,10 10,-4.48 10,-10S17.52,2 12,2zM12,20c-4.41,0 -8,-3.59 -8,-8s3.59,-8 8,-8 8,3.59 8,8 -3.59,8 -8,8z"/>
    
</vector>

--- DRAWABLE: C:\AndroidProjects\HealthyWallet\app\src\main\res\drawable\ic_check.xml ---

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="24"
    android:viewportHeight="24">
    <path
        android:fillColor="#FFFFFF"
        android:pathData="M9,16.17l-3.5,-3.5L4.08,14.09l4.92,4.92 10,-10 -1.41,-1.41z"/>
</vector>

--- DRAWABLE: C:\AndroidProjects\HealthyWallet\app\src\main\res\drawable\ic_educacion.xml ---

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="24"
    android:viewportHeight="24">

    <path
        android:fillColor="#4CAF50"
        android:pathData="M6,4h11c1.66,0 3,1.34 3,3v11c0,1.66 -1.34,3 -3,3H6c-1.66,0 -3,-1.34 -3,-3V7c0,-1.66 1.34,-3 3,-3zm0,2c-0.55,0 -1,0.45 -1,1v11c0,0.55 0.45,1 1,1h11c0.55,0 1,-0.45 1,-1V7c0,-0.55 -0.45,-1 -1,-1H6zm2,3h7v1H8V9zm0,3h7v1H8v-1zm0,3h5v1H8v-1z"/>
</vector>

--- DRAWABLE: C:\AndroidProjects\HealthyWallet\app\src\main\res\drawable\ic_home.xml ---

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="24"
    android:viewportHeight="24"
    android:tint="#4CAF50">

    <path
        android:fillColor="#4CAF50"
        android:pathData="M10,20v-6h4v6h5v-8h3L12,3 2,12h3v8z"/>
</vector>

--- DRAWABLE: C:\AndroidProjects\HealthyWallet\app\src\main\res\drawable\ic_launcher_foreground.xml ---

<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
        <bitmap
            android:src="@drawable/logo_texto"
            android:gravity="center"
            android:antialias="true" />
    </item>
</layer-list>

--- DRAWABLE: C:\AndroidProjects\HealthyWallet\app\src\main\res\drawable\ic_mas.xml ---

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="24"
    android:viewportHeight="24">
    <path
        android:fillColor="#4CAF50"
        android:pathData="M19,13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
</vector>

--- DRAWABLE: C:\AndroidProjects\HealthyWallet\app\src\main\res\drawable\ic_metas.xml ---

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="24"
    android:viewportHeight="24"
    android:tint="#4CAF50">

    <path
        android:fillColor="#4CAF50"
        android:pathData="M12,2A10,10 0 1,0 22,12A10,10 0 0,0 12,2zM11,17.5L6.5,13l1.41,-1.41L11,14.67l5.59,-5.59L18,10.5L11,17.5z"/>
</vector>

--- DRAWABLE: C:\AndroidProjects\HealthyWallet\app\src\main\res\drawable\ic_movimientos.xml ---

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="24"
    android:viewportHeight="24"
    android:tint="#4CAF50">

    <path
        android:fillColor="#4CAF50"
        android:pathData="M3,13h2v-2H3v2zM3,17h2v-2H3v2zM3,9h2V7H3v2zM7,13h14v-2H7v2zM7,17h14v-2H7v2zM7,7v2h14V7H7z"/>
</vector>

--- DRAWABLE: C:\AndroidProjects\HealthyWallet\app\src\main\res\drawable\ic_presupuesto.xml ---

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="24"
    android:viewportHeight="24"
    android:tint="#4CAF50">

    <path
        android:fillColor="#4CAF50"
        android:pathData="M21,7H3c-1.1,0 -2,0.9 -2,2v10c0,1.1 0.9,2 2,2h18c1.1,0 2,-0.9 2,-2V9c0,-1.1 -0.9,-2 -2,-2zM21,19H3V9h18v10zM16,13c-1.1,0 -2,0.9 -2,2s0.9,2 2,2 2,-0.9 2,-2 -0.9,-2 -2,-2z"/>
</vector>

--- DRAWABLE: C:\AndroidProjects\HealthyWallet\app\src\main\res\drawable\ic_video.xml ---

<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="24"
    android:viewportHeight="24"
    android:tint="#4CAF50">

    <path
        android:fillColor="@android:color/white"
        android:pathData="M10,16.5l6,-4.5 -6,-4.5zM20,4L4,4c-1.1,0 -2,0.9 -2,2v12c0,1.1 0.9,2 2,2h16c1.1,0 2,-0.9 2,-2L22,6c0,-1.1 -0.9,-2 -2,-2zM20,18L4,18L4,6h16v12z"/>
</vector>

--- DRAWABLE: C:\AndroidProjects\HealthyWallet\app\src\main\res\drawable\progress_meta_estilo.xml ---

<layer-list xmlns:android="http://schemas.android.com/apk/res/android">

    <!-- Fondo -->
    <item android:id="@android:id/background">
        <shape>
            <corners android:radius="50dp" />
            <solid android:color="#E0E0E0"/>
        </shape>
    </item>

    <!-- Progreso -->
    <item android:id="@android:id/progress">
        <clip>
            <shape>
                <corners android:radius="50dp" />
                <solid android:color="#4CAF50"/> <!-- Verde bonito -->
            </shape>
        </clip>
    </item>

</layer-list>
